/* ============================================================================
   TBJS Design Patch — Terminal Style + Subtle Glass for Three.js BG
   ============================================================================
   Laden NACH tbjs-main.css:
   <link rel="stylesheet" href="tbjs-main.css">
   <link rel="stylesheet" href="tbjs-patch.css">

   Font-Import (im <head> vor diesem CSS):
   <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
   ============================================================================ */


/* ==========================================================================
   1. TOKEN OVERRIDES — Farben, Fonts, Radii
   ========================================================================== */

:root {
  /* --- Fonts → IBM Plex --- */
  --font-sans: 'IBM Plex Sans', system-ui, -apple-system, sans-serif;
  --font-mono: 'IBM Plex Mono', ui-monospace, SFMono-Regular, monospace;

  /* --- Type Scale Cap: max 22px --- */
  --text-4xl: clamp(1.25rem, 1rem + 1vw, 1.375rem);   /* max ~22px */
  --text-3xl: clamp(1.125rem, 0.9rem + 0.8vw, 1.25rem); /* max ~20px */
  --text-2xl: clamp(1rem, 0.85rem + 0.6vw, 1.125rem);   /* max ~18px */
  --text-xl:  1rem;        /* 16px */
  --text-lg:  0.9375rem;   /* 15px */
  --text-base: 0.8125rem;  /* 13px */
  --text-sm:  0.75rem;     /* 12px */
  --text-xs:  0.6875rem;   /* 11px */

  /* --- Border Radius: max 8px, bevorzugt 4-6 --- */
  --radius-sm:   4px;
  --radius-md:   6px;
  --radius-lg:   8px;
  --radius-xl:   8px;
  --radius-full: 4px;  /* Keine rounded-full mehr */

  /* --- Glass: subtil, damit Three.js durchscheint --- */
  --glass-blur: 8px;
  --glass-saturation: 1.0;

  /* --- Transitions: schnell und subtil --- */
  --duration-fast:   150ms;
  --duration-normal: 150ms;
  --duration-slow:   250ms;
}


/* ==========================================================================
   2. DARK THEME — Neue Farbpalette (immer aktiv)
   ========================================================================== */

:root,
[data-theme="light"],
[data-theme="dark"] {
  color-scheme: dark;

  /* --- Backgrounds --- */
  --bg-base:     #08080d;
  --bg-surface:  rgba(255,255,255,0.015);
  --bg-elevated: rgba(255,255,255,0.03);
  --bg-sunken:   rgba(255,255,255,0.01);

  /* --- Text --- */
  --text-primary:   #e2e2e8;
  --text-secondary: rgba(255,255,255,0.65);
  --text-muted:     rgba(255,255,255,0.45);
  --text-inverse:   #08080d;

  /* --- Borders: ultra-subtil --- */
  --border-default: rgba(255,255,255,0.06);
  --border-subtle:  rgba(255,255,255,0.04);
  --border-strong:  rgba(255,255,255,0.10);

  /* --- Interactive: Indigo --- */
  --interactive:       #6366f1;
  --interactive-hover: #a5b4fc;
  --interactive-muted: rgba(99,102,241,0.06);

  /* --- Semantic Colors --- */
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error:   #ef4444;
  --color-info:    #6366f1;
  --color-accent:  #a5b4fc;

  /* --- Primary Overrides (flat, no oklch) --- */
  --color-primary-400: #818cf8;
  --color-primary-500: #6366f1;
  --color-primary-600: #4f46e5;
  --color-primary-700: #4338ca;

  /* --- Glass: semi-transparent für Three.js Durchschein --- */
  --glass-bg:     rgba(8,8,13,0.65);
  --glass-border: rgba(255,255,255,0.06);
  --glass-shadow: 0 1px 2px rgba(0,0,0,0.3);

  /* --- Shadows: minimal --- */
  --highlight-subtle: none;
  --highlight-strong: none;
  --shadow-xs:  none;
  --shadow-sm:  0 1px 2px rgba(0,0,0,0.2);
  --shadow-md:  0 2px 4px rgba(0,0,0,0.25);
  --shadow-lg:  0 4px 8px rgba(0,0,0,0.3);
  --shadow-xl:  0 4px 8px rgba(0,0,0,0.3);
  --shadow-2xl: 0 4px 8px rgba(0,0,0,0.3);
  --shadow-primary: none;

  /* --- Inputs --- */
  --input-bg:     rgba(255,255,255,0.02);
  --input-border: rgba(255,255,255,0.06);
  --input-focus:  #6366f1;

  /* --- Scrollbar --- */
  --scrollbar-track: transparent;
  --scrollbar-thumb: rgba(255,255,255,0.08);
  --scrollbar-hover: rgba(255,255,255,0.15);

  /* --- Theme BG transparent für Three.js --- */
  --theme-bg-sun: transparent;
  --theme-bg-light: transparent;
}


/* ==========================================================================
   3. BASE OVERRIDES
   ========================================================================== */

body {
  background: transparent;  /* Three.js canvas sichtbar */
  color: var(--text-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
}

/* H1 auf max 22px, leicht */
h1 { font-size: var(--text-4xl); font-weight: 300; }
h2 { font-size: var(--text-3xl); font-weight: 300; }
h3 { font-size: var(--text-2xl); font-weight: 500; }
h4, h5, h6 { font-weight: 500; }


/* ==========================================================================
   4. LABEL UTILITY — 9px uppercase tracking (neuer Stil)
   ========================================================================== */

.label,
.tb-label {
  font-family: var(--font-mono);
  font-size: 9px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.25);
  font-weight: 500;
}


/* ==========================================================================
   5. BADGE COMPONENT
   ========================================================================== */

.badge {
  display: inline-block;
  padding: 2px 7px;
  border-radius: 4px;
  font-size: 9px;
  font-weight: 600;
  font-family: var(--font-mono);
}

.badge-accent {
  background: rgba(99,102,241,0.09);
  color: #6366f1;
  border: 1px solid rgba(99,102,241,0.19);
}

.badge-success {
  background: rgba(16,185,129,0.09);
  color: #10b981;
  border: 1px solid rgba(16,185,129,0.19);
}

.badge-warning {
  background: rgba(245,158,11,0.09);
  color: #f59e0b;
  border: 1px solid rgba(245,158,11,0.19);
}

.badge-error {
  background: rgba(239,68,68,0.09);
  color: #ef4444;
  border: 1px solid rgba(239,68,68,0.19);
}


/* ==========================================================================
   6. SCORE BARS (ersetzt Prozent-Balken)
   ========================================================================== */

.score-bars {
  display: flex;
  gap: 2px;
  align-items: center;
}

.score-bar {
  width: 14px;
  height: 6px;
  border-radius: 1px;
  background: rgba(255,255,255,0.06);
}

.score-bar.filled         { background: #6366f1; }
.score-bar.filled.green   { background: #10b981; }
.score-bar.filled.warning { background: #f59e0b; }
.score-bar.filled.error   { background: #ef4444; }


/* ==========================================================================
   7. BUTTONS — Flat, kein Gradient, keine Shadows
   ========================================================================== */

button,
.btn {
  border-radius: var(--radius-md);
  transition: all 0.15s;
}

.btn-primary,
button[type="submit"] {
  color: #e2e2e8;
  background: rgba(99,102,241,0.15);
  border: 1px solid rgba(99,102,241,0.3);
  box-shadow: none;
}

.btn-primary:hover,
button[type="submit"]:hover {
  background: rgba(99,102,241,0.25);
  border-color: rgba(99,102,241,0.5);
  transform: none;
  box-shadow: none;
}

.btn-primary:active,
button[type="submit"]:active {
  background: rgba(99,102,241,0.2);
  transform: none;
  box-shadow: none;
}

.btn-secondary {
  background: rgba(255,255,255,0.015);
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: none;
}

.btn-secondary:hover {
  background: rgba(99,102,241,0.06);
  border-color: rgba(99,102,241,0.2);
  transform: none;
  box-shadow: none;
}

.btn-ghost:hover {
  background: rgba(99,102,241,0.06);
}


/* ==========================================================================
   8. CARDS — Transparent, leichter Glass-Effekt
   ========================================================================== */

.card {
  background: rgba(8,8,13,0.55);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: var(--radius-lg);
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.card:hover {
  transform: none;
  border-color: rgba(255,255,255,0.08);
  box-shadow: 0 2px 4px rgba(0,0,0,0.25);
}


/* ==========================================================================
   9. GLASS — Reduziert, leicht transparent für Three.js
   ========================================================================== */

.glass {
  background: rgba(8,8,13,0.65);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-lg);
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}


/* ==========================================================================
   10. NAVIGATION — Subtiles Glass, Grid statt Flex
   ========================================================================== */

.nav-controls {
  background: rgba(8,8,13,0.7);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-lg);
  box-shadow: none;
  display: grid;
  grid-template-columns: auto auto;
  gap: 6px;
  padding: 6px;
}

.nav-toggle {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-md);
}

.nav-toggle:hover {
  background: rgba(99,102,241,0.06);
}

/* Dropdown: subtiles Glass */
.nav-dropdown {
  background: rgba(8,8,13,0.85);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.nav-dropdown a:hover,
.nav-dropdown a:focus {
  background: rgba(99,102,241,0.1);
  color: #a5b4fc;
}


/* ==========================================================================
   11. MAIN CONTENT — Transparent, Three.js sichtbar
   ========================================================================== */

#MainContent {
  background: transparent;
}

.main-content {
  background: rgba(8,8,13,0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: var(--radius-lg);
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}


/* ==========================================================================
   12. WIDGETS — Subtiles Glass
   ========================================================================== */

.widget {
  background: rgba(8,8,13,0.7);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-lg);
  box-shadow: 0 2px 4px rgba(0,0,0,0.25);
}


/* ==========================================================================
   13. MODALS — Stärkerer Blur, aber noch transparent
   ========================================================================== */

.overlay {
  background: rgba(8,8,13,0.5);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.modal {
  background: rgba(8,8,13,0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}


/* ==========================================================================
   14. INPUTS — Dunkel transparent
   ========================================================================== */

input,
textarea,
select {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-md);
  color: #e2e2e8;
}

input:focus,
textarea:focus,
select:focus {
  border-color: #6366f1;
  box-shadow: 0 0 0 2px rgba(99,102,241,0.15);
}

input::placeholder,
textarea::placeholder {
  color: rgba(255,255,255,0.25);
}


/* ==========================================================================
   15. LINKS — Indigo Accent
   ========================================================================== */

a {
  color: #a5b4fc;
  transition: color 0.15s;
}

a:hover,
a:focus {
  color: #c7d2fe;
  text-decoration: none;
}


/* ==========================================================================
   16. SCROLLBAR — Ultra-subtil
   ========================================================================== */

::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.08);
  border-radius: 2px;
  border: none;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.15);
}


/* ==========================================================================
   17. RESPONSIVE — Tighter Mobile
   ========================================================================== */

@media screen and (max-width: 767px) {
  .nav-controls {
    padding: 4px;
    gap: 4px;
  }

  .nav-toggle {
    width: 28px;
    height: 28px;
  }

  .main-content {
    border-radius: var(--radius-md);
  }

  button,
  .btn {
    max-width: none;
  }
}


#tbjs-cookie-banner {
    /* Core Positioning & Sizing (from Tailwind: fixed bottom-0 inset-x-0 z-[1000]) */
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;

    /* Background & Border (from Tailwind: bg-gray-100 p-4 border-t border-gray-300 shadow-lg) */
    background-color:var(--bg-base); /* Equivalent to bg-gray-100 */
    padding: 1rem; /* Equivalent to p-4 */
    border-top: 1px solid var(--color-primary-300); /* Equivalent to border-t border-gray-300 */
    box-shadow: 0 -10px 15px -3px rgba(var(--text-color), 0.1), 0 -4px 6px -2px rgba(var(--text-color), 0.05); /* Equivalent to shadow-lg (applied from bottom) */

    /* Text (from Tailwind: text-sm text-text-color) */
    font-size: 0.875rem; /* Equivalent to text-sm */
    line-height: 1.25rem;
    color: var(--text-color); /* Example: text-gray-700. Replace with your actual 'text-text-color' */

    /* Animation - Initial State (from Tailwind: transition-all duration-300 ease-in-out transform translate-y-full opacity-0) */
    opacity: 0;
    transform: translateY(100%);
    transition-property: opacity, transform;
    transition-timing-function: ease-in-out;
    transition-duration: 300ms;

    /* --- FOR DEBUGGING: Uncomment this to make it VERY obvious if CSS is applying at all --- */
    /* border: 5px solid red !important;
    background-color: yellow !important; */
}

/* Styles for when the banner is active/visible (JS will set opacity to 1 and transform to translateY(0)) */
/* (No specific CSS needed here if JS directly manipulates these styles for the 'shown' state) */


/* Dark Mode Styles (mimicking Tailwind dark: variants) */
/* Add a class like "dark" to your <html> or <body> tag to enable these */
.dark #tbjs-cookie-banner {
    background-color: var(--bg-base); /* Equivalent to dark:bg-gray-800 or dark:bg-gray-900 */
    border-top-color:var(--color-primary-300); /* Equivalent to dark:border-gray-700 */
    color: var(--text-color); /* Example: dark:text-gray-200. Replace with your dark 'text-text-color' */
}

/* --- CSS for the inner container of #tbjs-cookie-banner --- */
/* This is the div that gets 'max-w-screen-lg mx-auto ...' */
#tbjs-cookie-banner > div:first-child {
    max-width: 1024px; /* Equivalent to max-w-screen-lg */
    margin-left: auto;
    margin-right: auto;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem 1rem; /* Approximates gap-y-2 gap-x-4 */
}

/* Optional: Specific styles for elements inside the banner if needed */
#tbjs-cookie-banner #tb-cookie-banner-close {
    position: absolute; /* Tailwind: absolute */
    top: 0.5rem;      /* Tailwind: top-2 */
    right: 0.5rem;     /* Tailwind: right-2 */
    color: #6b7280;   /* Tailwind: text-gray-500 */
    font-size: 1.25rem;/* Tailwind: text-xl (adjust if material icon needs different sizing) */
    padding: 0.25rem;  /* Tailwind: p-1 */
    margin: -0.25rem;  /* Tailwind: -m-1 */
    cursor: pointer;
    line-height: 1; /* Ensure icon aligns well */
}
.dark #tbjs-cookie-banner #tb-cookie-banner-close {
    color: var(--theme-accent);   /* Tailwind: dark:text-gray-300 */
}
#tbjs-cookie-banner #tb-cookie-banner-close:hover {
    color: var(--color-primary-300);   /* Tailwind: hover:text-gray-700 */
}
.dark #tbjs-cookie-banner #tb-cookie-banner-close:hover {
    color: var(--theme-accent);   /* Tailwind: dark:hover:text-gray-400 */
}


#tbjs-cookie-banner h3 {
    font-weight: 600; /* Tailwind: font-semibold */
    font-size: 1rem;   /* Tailwind: text-base */
    line-height: 1.5rem;
}

#tbjs-cookie-banner p {
    margin-top: 0.25rem; /* Tailwind: mt-1 */
    font-size: 0.75rem; /* Tailwind: text-xs */
    /* sm:text-sm equivalent would require a media query */
}

@media (min-width: 640px) { /* sm breakpoint */
    #tbjs-cookie-banner p {
        font-size: 0.875rem; /* Tailwind: sm:text-sm */
    }
    #tbjs-cookie-banner #tb-cookie-banner-accept-minimal {
        padding-left: 1rem;    /* Tailwind: sm:px-4 */
        padding-right: 1rem;   /* Tailwind: sm:px-4 */
        padding-top: 0.5rem;   /* Tailwind: sm:py-2 */
        padding-bottom: 0.5rem;/* Tailwind: sm:py-2 */
    }
}


#tbjs-cookie-banner #tb-cookie-banner-show-settings {
    font-size: 0.75rem; /* Tailwind: text-xs */
    text-decoration: underline;
}
#tbjs-cookie-banner #tb-cookie-banner-show-settings:hover {
    color: var(--color-primary-300); /* Example: hover:text-primary-500, replace with your primary color */
}

#tbjs-cookie-banner #tb-cookie-banner-accept-minimal {
    padding: 0.375rem 0.75rem; /* Tailwind: px-3 py-1.5 */
    border-radius: 0.375rem; /* Tailwind: rounded-md */
    background-color:  var(--bg-base); /* Example: bg-primary-600, replace with your primary color */
    color: var(--text-color);
    font-size: 0.75rem; /* Tailwind: text-xs */
    font-weight: 500; /* Tailwind: font-medium */
}
#tbjs-cookie-banner #tb-cookie-banner-accept-minimal:hover {
    background-color:var(--bg-base); /* Example: hover:bg-primary-700 */
}

/* --- START OF FILE Modal.css --- */

/*
    CSS for TB.ui.Modal Component
    This CSS aims to replicate the Tailwind CSS classes defined in Modal.js.
    If Tailwind CSS is properly configured and working, these explicit CSS rules
    might not be necessary, or can serve as a fallback/reference.
*/

/* --- General Modal Variables (Optional - for easier theming) --- */
:root {
    --tb-modal-overlay-bg-light: rgba(0, 0, 0, 0.3);          /* bg-black/30 */
    --tb-modal-overlay-bg-dark: rgba(0, 0, 0, 0.6);           /* dark:bg-black/60 */
    --tb-modal-backdrop-blur: blur(2px);                      /* backdrop-blur-sm on overlay */

    --tb-modal-bg-light: rgba(255, 255, 255, 0.6);            /* bg-white/60 */
    --tb-modal-bg-dark: rgba(38, 38, 38, 0.7);              /* dark:bg-neutral-800/70 (approx) */
    --tb-modal-text-light: #171717;                         /* text-neutral-900 (approx) */
    --tb-modal-text-dark: #f5f5f5;                          /* text-neutral-100 (approx) */
    --tb-modal-border-light: rgba(255, 255, 255, 0.4);        /* border-white/40 */
    --tb-modal-border-dark: rgba(64, 64, 64, 0.5);           /* dark:border-neutral-600/50 (approx) */
    --tb-modal-container-blur: blur(8px);                    /* backdrop-blur-lg */
    --tb-modal-container-blur-dark: blur(12px);              /* dark:backdrop-blur-xl */

    --tb-modal-header-border-light: rgba(229, 229, 229, 0.5); /* border-neutral-300/50 (approx) */
    --tb-modal-header-border-dark: rgba(64, 64, 64, 0.5);    /* dark:border-neutral-700/50 (approx) */

    --tb-modal-close-btn-text-light: #525252;               /* text-neutral-600 */
    --tb-modal-close-btn-text-dark: #a3a3a3;                /* dark:text-neutral-400 */
    --tb-modal-close-btn-hover-bg-light: rgba(82, 82, 82, 0.2); /* hover:bg-neutral-500/20 */
    --tb-modal-close-btn-hover-bg-dark: rgba(212, 212, 212, 0.2);/* dark:hover:bg-neutral-300/20 */

    --tb-modal-transition-duration: 300ms;
    --tb-modal-transition-timing: ease-in-out;
    --tb-modal-z-index-overlay: 1050;
}

/* --- Modal Overlay --- */
/* Targets elements with IDs like "tb-modal-xxxx-overlay" */
[id^="tb-modal-"][id$="-overlay"] {
    /* Core Positioning & Sizing (fixed inset-0 z-[1050]) */
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--tb-modal-z-index-overlay);

    /* Background & Blur (bg-black/30 dark:bg-black/60 backdrop-blur-sm) */
    background-color: var(--tb-modal-overlay-bg-light);
    backdrop-filter: var(--tb-modal-backdrop-blur);
    -webkit-backdrop-filter: var(--tb-modal-backdrop-blur); /* Safari */

    /* Centering Content (flex items-center justify-center) */
    display: flex;
    align-items: center;
    justify-content: center;

    /* Padding (p-4) */
    padding: 1rem;

    /* Animation - Initial State (opacity-0 transition-opacity duration-300 ease-in-out) */
    opacity: 0;
    transition-property: opacity;
    transition-duration: var(--tb-modal-transition-duration);
    transition-timing-function: var(--tb-modal-transition-timing);
}

.dark [id^="tb-modal-"][id$="-overlay"] {
    background-color: var(--tb-modal-overlay-bg-dark);
}

/* --- Modal Container --- */
/* Targets elements with IDs like "tb-modal-xxxx" BUT NOT "tb-modal-xxxx-overlay" */
[id^="tb-modal-"]:not([id$="-overlay"]) {
    /* Background & Glass Effect (bg-white/60 dark:bg-neutral-800/70 backdrop-blur-lg dark:backdrop-blur-xl) */
    background-color: var(--tb-modal-bg-light);
    backdrop-filter: var(--tb-modal-container-blur);
    -webkit-backdrop-filter: var(--tb-modal-container-blur); /* Safari */

    /* Border (border border-white/40 dark:border-neutral-600/50) */
    border: 1px solid var(--text-color);

    /* Text Color (text-neutral-900 dark:text-neutral-100) */
    color: var(--tb-modal-text-light);

    /* Shape & Shadow (rounded-2xl shadow-xl) */
    border-radius: 1rem; /* rounded-2xl */
    box-shadow: 0 20px 25px -5px rgba(var(--text-color),0.1), 0 10px 10px -5px rgba(var(--text-color),0.04); /* shadow-xl */

    /* Sizing & Layout (w-full ${this.options.maxWidth} p-0 max-h-[90vh] overflow-y-auto flex flex-col) */
    width: 100%; /* w-full */
    /* max-width is applied by Tailwind class from options.maxWidth in JS */
    padding: 0; /* p-0 */
    max-height: 90vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;

    /* Animation - Initial State (transform transition-all duration-300 ease-in-out scale-95 opacity-0) */
    opacity: 0;
    transform: scale(0.95);
    transition-property: opacity, transform;
    transition-duration: var(--tb-modal-transition-duration);
    transition-timing-function: var(--tb-modal-transition-timing);
}

.dark [id^="tb-modal-"]:not([id$="-overlay"]) {
    background-color: var(--tb-modal-bg-dark);
    backdrop-filter: var(--tb-modal-container-blur-dark);
    -webkit-backdrop-filter: var(--tb-modal-container-blur-dark); /* Safari */
    border-color: var(--tb-modal-border-dark);
    color: var(--tb-modal-text-dark);
}

/* --- Modal Header --- */
/* Targets the first div child of the modal container IF it's used for the header */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child { /* This selector assumes header is the first div */
    /* Layout (flex justify-between items-center flex-shrink-0) */
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;

    /* Padding (p-4 md:p-6) */
    padding: 1rem; /* p-4 */

    /* Border (border-b border-neutral-300/50 dark:border-neutral-700/50) */
    border-bottom: 1px solid var(--tb-modal-header-border-light);
}

.dark [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child {
    border-bottom-color: var(--tb-modal-header-border-dark);
}

@media (min-width: 768px) { /* md breakpoint */
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child {
        padding: 1.5rem; /* md:p-6 */
    }
}

/* --- Modal Title (within header) --- */
/* Targets h3 with id like "tb-modal-xxxx-title" */
[id^="tb-modal-"][id$="-title"] {
    /* Typography (text-lg font-semibold) */
    font-size: 1.125rem; /* text-lg */
    line-height: 1.75rem;
    font-weight: 600; /* font-semibold */
}

/* --- Modal Close Button (within header) --- */
/* Targets button.material-symbols-outlined within the header-like div */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child button.material-symbols-outlined {
    /* Icon specific styles are assumed to be handled by .material-symbols-outlined global class */
    padding: 0.25rem; /* p-1 */
    border-radius: 0.25rem; /* rounded */
    color: var(--tb-modal-close-btn-text-light);
    transition-property: background-color, color;
    transition-duration: 150ms; /* Common transition duration for interactive elements */
    background-color: transparent;
    border: none;
    cursor: pointer;
}

.dark [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child button.material-symbols-outlined {
    color: var(--tb-modal-close-btn-text-dark);
}

[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child button.material-symbols-outlined:hover {
    background-color: var(--tb-modal-close-btn-hover-bg-light);
}

.dark [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child button.material-symbols-outlined:hover {
    background-color: var(--tb-modal-close-btn-hover-bg-dark);
}


/* --- Modal Body --- */
/* This styling relies on the body being the second div if a header exists,
   or the first if no header. A more specific class from JS would be better.
   For now, targeting a div that is a direct child and likely the body:
*/
[id^="tb-modal-"]:not([id$="-overlay"]) > div:not(:first-child):not(:last-child), /* If header and footer exist */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child:last-child, /* If only body */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child:not(:last-child):nth-child(1) ~ div:nth-child(2), /* If header exists, body is 2nd */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:only-child /* If body is the only child, no header/footer via JS options */
{
    /* Layout (flex-grow overflow-y-auto) */
    flex-grow: 1;
    /* overflow-y: auto; /* Already on modal container, maybe not needed here unless specific */

    /* Padding (p-4 md:p-6) */
    padding: 1rem; /* p-4 */
}
/* More robust if body gets a specific class via `customClasses.body` option */
[id^="tb-modal-"]:not([id$="-overlay"]) .tb-modal-body-js-applied-class { /* Example if you add a class in JS */
    flex-grow: 1;
    padding: 1rem;
}


@media (min-width: 768px) { /* md breakpoint */
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:not(:first-child):not(:last-child),
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child:last-child,
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child:not(:last-child):nth-child(1) ~ div:nth-child(2),
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:only-child,
    [id^="tb-modal-"]:not([id$="-overlay"]) .tb-modal-body-js-applied-class {
        padding: 1.5rem; /* md:p-6 */
    }
}

/* --- Modal Footer --- */
/* Targets the last div child of the modal container IF it's used for the footer */
[id^="tb-modal-"]:not([id$="-overlay"]) > div:last-child { /* This selector assumes footer is the last div */
    /* Layout (mt-auto flex flex-wrap justify-end gap-3 flex-shrink-0) */
    margin-top: auto; /* Pushes footer to bottom if modal body doesn't fill height */
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end;
    gap: 0.75rem; /* gap-3 */
    flex-shrink: 0;

    /* Padding (p-4 md:p-6) */
    padding: 1rem; /* p-4 */

    /* Border (border-t border-neutral-300/50 dark:border-neutral-700/50) */
    border-top: 1px solid var(--tb-modal-header-border-light); /* Reusing header border color var */
}

.dark [id^="tb-modal-"]:not([id$="-overlay"]) > div:last-child {
    border-top-color: var(--tb-modal-header-border-dark);
}

@media (min-width: 768px) { /* md breakpoint */
    [id^="tb-modal-"]:not([id$="-overlay"]) > div:last-child {
        padding: 1.5rem; /* md:p-6 */
    }
}


/* --- Material Symbols Outlined (Ensure this is globally available or defined here) --- */
.material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 400,
  'GRAD' 0,
  'opsz' 24; /* Default size, can be overridden */
  font-family: 'Material Symbols Outlined'; /* Ensure this font is loaded in your project */
  font-weight: normal;
  font-style: normal;
  font-size: 24px;  /* Default icon size */
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
}

/*
  NOTE:
  - Max width for the modal container ([id^="tb-modal-"]:not([id$="-overlay"]))
    is intended to be applied via a Tailwind class (e.g., 'max-w-lg')
    passed in `this.options.maxWidth` and added directly to the element's class list in JS.
    If you remove that from JS, you'd need to add max-width here or via specific classes.
  - Button styling for buttons within the footer is assumed to be handled by TB.ui.Button.create()
    and its own styling (variants, custom classes).
  - The actual animation (changing opacity and transform values) is handled by JavaScript in the
    show() and close() methods. This CSS sets up the initial state and transition properties.
  - For more robust styling of header, body, and footer, consider adding specific classes to them
    via the `customClasses` option in `Modal.js` (e.g., `this.options.customClasses.header`, etc.)
    and targeting those classes here. The current selectors are based on DOM structure which can be fragile.
*/

/* --- FOR DEBUGGING: Uncomment this to make elements very obvious if CSS is applying --- */
/*
[id^="tb-modal-"][id$="-overlay"] { border: 3px solid blue !important; }
[id^="tb-modal-"]:not([id$="-overlay"]) { border: 3px solid red !important; }
[id^="tb-modal-"]:not([id$="-overlay"]) > div:first-child { border: 2px dashed green !important; } // Header
[id^="tb-modal-"]:not([id$="-overlay"]) > div:last-child { border: 2px dashed purple !important; } // Footer
*/

/* --- END OF FILE Modal.css --- */

/* Modern Toast Styles - Slim, Plastic, Minimalistic */

/* Container for all toasts */
.tb-toast-container {
    max-width: 400px;
    width: 100%;
}

/* Main toast element */
.tb-toast {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.12),
        0 2px 8px rgba(0, 0, 0, 0.08);
    color: #1f2937;
    font-size: 14px;
    line-height: 1.4;
    min-width: 280px;
    max-width: 380px;
    overflow: hidden;
    position: relative;
    transform: translateY(-20px) scale(0.95);
    opacity: 0;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, opacity;
}

/* Dark mode */
:root[data-theme="dark"] {
    .tb-toast {
        background: rgba(17, 24, 39, 0.95);
        border-color: rgba(75, 85, 99, 0.3);
        color: #f9fafb;
        box-shadow:
            0 8px 32px rgba(0, 0, 0, 0.3),
            0 2px 8px rgba(0, 0, 0, 0.2);
    }
}

/* Toast states */
.tb-toast.tb-toast-showing {
    transform: translateY(0) scale(1);
    opacity: 1;
}

.tb-toast.tb-toast-hiding {
    transform: translateY(-10px) scale(0.98);
    opacity: 0;
    transition: all 0.2s ease-in;
}

.tb-toast.tb-toast-hidden {
    display: none;
}

/* Header section */
.tb-toast-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px 8px;
    min-height: 40px;
}

/* Icon */
.tb-toast-icon {
    color: var(--toast-color);
    font-size: 18px !important;
    flex-shrink: 0;
    line-height: 1;
}

/* Title */
.tb-toast-title {
    color: var(--toast-color);
    font-weight: 600;
    font-size: 13px;
    flex: 1;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.9;
}

/* Close button */
.tb-toast-close {
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    opacity: 0.6;
    padding: 4px;
    border-radius: 6px;
    transition: all 0.15s ease;
    flex-shrink: 0;
    margin-left: auto;
}

.tb-toast-close:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.05);
}

@media (prefers-color-scheme: dark) {
    .tb-toast-close:hover {
        background: rgba(255, 255, 255, 0.1);
    }
}

.tb-toast-close .material-symbols-outlined {
    font-size: 16px !important;
    line-height: 1;
}

/* Message content */
.tb-toast-message {
    padding: 0 16px 12px;
    color: inherit;
    opacity: 0.9;
    line-height: 1.5;
}

/* Action buttons */
.tb-toast-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    padding: 8px 16px 12px;
}

.tb-toast-action-btn {
    background: var(--toast-color);
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    padding: 6px 12px;
    transition: all 0.15s ease;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.tb-toast-action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    filter: brightness(1.1);
}

.tb-toast-action-btn:active {
    transform: translateY(0);
}

/* Progress bar */
.tb-toast-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: rgba(0, 0, 0, 0.05);
    overflow: hidden;
}

@media (prefers-color-scheme: dark) {
    .tb-toast-progress {
        background: rgba(255, 255, 255, 0.1);
    }
}

.tb-toast-progress-bar {
    height: 100%;
    background: var(--toast-color);
    transform-origin: left;
    transition: transform 0.1s linear;
    will-change: transform;
}

/* Dot indicator (after toast is hidden) */
.tb-toast-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    cursor: pointer;
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    animation: tb-toast-dot-appear 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    margin: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.tb-toast-dot:hover {
    transform: scale(1.3);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

.tb-toast-dot.tb-toast-dot-hiding {
    animation: tb-toast-dot-disappear 0.2s ease-in forwards;
}

/* Dot animations */
@keyframes tb-toast-dot-appear {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes tb-toast-dot-disappear {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.5);
    }
}

/* Responsive adjustments */
@media (max-width: 640px) {
    .tb-toast-container {
        max-width: calc(100vw - 32px);
        margin: 0 16px;
    }

    .tb-toast {
        min-width: 240px;
        max-width: none;
        width: 100%;
    }

    .tb-toast-header {
        padding: 10px 14px 6px;
    }

    .tb-toast-message {
        padding: 0 14px 10px;
    }

    .tb-toast-actions {
        padding: 6px 14px 10px;
    }
}

/* Utility classes for positioning (used by JS) */
.tb-fixed { position: fixed; }
.tb-z-\[9999\] { z-index: 9999; }
.tb-flex { display: flex; }
.tb-flex-col { flex-direction: column; }
.tb-pointer-events-none { pointer-events: none; }
.tb-p-4 { padding: 1rem; }
.tb-gap-2 { gap: 0.5rem; }
.tb-top-0 { top: 0; }
.tb-right-0 { right: 0; }
.tb-bottom-0 { bottom: 0; }
.tb-left-0 { left: 0; }
.tb-left-1\/2 { left: 50%; }
.tb--translate-x-1\/2 { transform: translateX(-50%); }
.tb-items-end { align-items: flex-end; }
.tb-items-start { align-items: flex-start; }
.tb-items-center { align-items: center; }

/* Animation performance optimizations */
.tb-toast,
.tb-toast-dot {
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Print styles */
@media print {
    .tb-toast-container,
    .tb-toast,
    .tb-toast-dot {
        display: none !important;
    }
}

/* tbjs/ui/components/Chat/Chat.css */

.tb-chat-widget {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-height: 70vh;
    width: 100%;
    max-width: 600px;
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--glass-shadow);
    overflow: hidden;
    font-size: var(--font-size-sm);
}

.tb-chat-header {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--theme-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.tb-chat-header h3 {
    margin: 0;
    font-size: var(--font-size-base);
    color: var(--theme-text);
}

.tb-chat-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--theme-text-muted);
}

.tb-chat-status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--color-warning); /* Gelb für Verbindungsaufbau/getrennt */
    transition: background-color var(--transition-fast);
}

.tb-chat-status-dot.connected {
    background-color: var(--color-success);
}

.tb-chat-status-dot.error {
    background-color: var(--color-error);
}

.tb-chat-messages {
    flex-grow: 1;
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.tb-chat-message {
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-md);
    max-width: 80%;
    word-wrap: break-word;
}

.tb-chat-message.user-message {
    background-color: var(--theme-primary);
    color: var(--theme-text-on-primary);
    align-self: flex-end; /* Eigene Nachrichten */
}

.tb-chat-message.other-message {
    background-color: var(--input-bg);
    border: 1px solid var(--theme-border);
    align-self: flex-start; /* Nachrichten von anderen */
}

.tb-chat-message.system-message {
    font-style: italic;
    color: var(--theme-text-muted);
    font-size: 0.8rem;
    text-align: center;
    align-self: center;
    background: none;
    padding: 0.2rem;
}

.tb-chat-message .msg-user {
    font-weight: var(--font-weight-semibold);
    display: block;
    margin-bottom: 0.25rem;
    font-size: 0.75rem;
}

.tb-chat-input-area {
    display: flex;
    padding: 0.75rem;
    border-top: 1px solid var(--theme-border);
    gap: 0.5rem;
}

.tb-chat-input {
    flex-grow: 1;
    padding: 0.6rem 0.75rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--input-border);
    background-color: var(--input-bg);
    color: var(--theme-text);
    font-size: var(--font-size-sm);
}

.tb-chat-input:focus {
    outline: none;
    border-color: var(--input-focus-border);
}

/**
 * Desktop/Mobile Platform Styles
 * ===============================
 */

/* Platform-specific body spacing */
body.platform-desktop {
    padding-bottom: 28px;
}

body.platform-mobile {
    padding-bottom: 64px;
    padding-bottom: calc(64px + env(safe-area-inset-bottom));
}

body.platform-mobile .header {
    padding-top: env(safe-area-inset-top);
}

/* ===== Quick Capture Popup ===== */
.tb-quick-capture {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    width: 400px;
    max-width: 90vw;
    background: var(--tb-bg-secondary, #1e1e1e);
    border: 1px solid var(--tb-border, #333);
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
}

.tb-quick-capture.visible {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

.tb-quick-capture-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--tb-border, #333);
    font-weight: 600;
}

.tb-quick-capture-close {
    background: none;
    border: none;
    color: var(--tb-text-secondary, #888);
    font-size: 20px;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 4px;
}

.tb-quick-capture-close:hover {
    background: var(--tb-bg-hover, #333);
    color: var(--tb-text, #fff);
}

.tb-quick-capture-body {
    padding: 16px;
}

.tb-quick-capture-body textarea {
    width: 100%;
    background: var(--tb-bg, #121212);
    border: 1px solid var(--tb-border, #333);
    border-radius: 8px;
    color: var(--tb-text, #fff);
    padding: 12px;
    font-size: 14px;
    resize: none;
    font-family: inherit;
}

.tb-quick-capture-body textarea:focus {
    outline: none;
    border-color: var(--tb-primary, #6366f1);
}

.tb-quick-capture-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
}

.tb-quick-capture-hint {
    font-size: 12px;
    color: var(--tb-text-secondary, #888);
}

.tb-quick-capture-save {
    background: var(--tb-primary, #6366f1);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
}

.tb-quick-capture-save:hover {
    background: var(--tb-primary-hover, #5558e3);
}

/* ===== Desktop Status Bar ===== */
.tb-status-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 24px;
    background: var(--tb-bg-secondary, #1e1e1e);
    border-top: 1px solid var(--tb-border, #333);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 12px;
    font-size: 12px;
    color: var(--tb-text-secondary, #888);
    z-index: 9999;
}

.tb-status-bar-left,
.tb-status-bar-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.tb-status-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.tb-status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--tb-text-secondary, #888);
}

.tb-status-dot.online {
    background: #22c55e;
}

.tb-status-dot.offline {
    background: #ef4444;
}

.tb-status-dot.warning {
    background: #f59e0b;
}

.tb-status-dot.disabled {
    background: #6b7280;
    opacity: 0.5;
}

.tb-status-info {
    font-size: 11px;
    color: var(--tb-text-secondary, #666);
    opacity: 0.8;
}

.tb-status-item {
    cursor: default;
    transition: opacity 0.2s;
}

.tb-status-item:hover {
    opacity: 0.8;
}

/* ===== Mobile Bottom Navigation ===== */
.tb-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    padding-bottom: env(safe-area-inset-bottom);
    background: var(--tb-bg-secondary, #1e1e1e);
    border-top: 1px solid var(--tb-border, #333);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 9999;
}

.tb-bottom-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    background: none;
    border: none;
    color: var(--tb-text-secondary, #888);
    padding: 8px 16px;
    cursor: pointer;
    transition: color 0.2s;
    -webkit-tap-highlight-color: transparent;
}

.tb-bottom-nav-item.active {
    color: var(--tb-primary, #6366f1);
}

.tb-bottom-nav-icon {
    font-size: 20px;
}

.tb-bottom-nav-label {
    font-size: 10px;
    font-weight: 500;
}

/* ===== Light Theme Overrides ===== */
@media (prefers-color-scheme: light) {
    .tb-quick-capture {
        background: #fff;
        border-color: #e5e5e5;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }

    .tb-quick-capture-body textarea {
        background: #f5f5f5;
        border-color: #e5e5e5;
        color: #1a1a1a;
    }

    .tb-status-bar {
        background: #f5f5f5;
        border-color: #e5e5e5;
        color: #666;
    }

    .tb-bottom-nav {
        background: #fff;
        border-color: #e5e5e5;
    }
}

/* Theme class overrides */
[data-theme="light"] .tb-quick-capture,
.light .tb-quick-capture {
    background: #fff;
    border-color: #e5e5e5;
}

[data-theme="light"] .tb-status-bar,
.light .tb-status-bar {
    background: #f5f5f5;
    border-color: #e5e5e5;
}

[data-theme="light"] .tb-bottom-nav,
.light .tb-bottom-nav {
    background: #fff;
    border-color: #e5e5e5;
}


