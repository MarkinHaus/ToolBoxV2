
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://MarkinHaus.github.io/ReSimpleToolBox/toolboxv2/">
      
      
        <link rel="prev" href="../changelog/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>toolboxv2 module - ReSimpleToolBox</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#toolboxv2-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ReSimpleToolBox" class="md-header__button md-logo" aria-label="ReSimpleToolBox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ReSimpleToolBox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              toolboxv2 module
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MarkinHaus/ReSimpleToolBox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ReSimpleToolBox" class="md-nav__button md-logo" aria-label="ReSimpleToolBox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ReSimpleToolBox
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MarkinHaus/ReSimpleToolBox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/MarkinHaus/ReSimpleToolBox/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    toolboxv2 module
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    toolboxv2 module
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.toolbox.App
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_exit" class="md-nav__link">
    <span class="md-ellipsis">
      a_exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_fuction_runner" class="md-nav__link">
    <span class="md-ellipsis">
      a_fuction_runner()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_remove_mod" class="md-nav__link">
    <span class="md-ellipsis">
      a_remove_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_run_any" class="md-nav__link">
    <span class="md-ellipsis">
      a_run_any()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_run_function" class="md-nav__link">
    <span class="md-ellipsis">
      a_run_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.debug_rains" class="md-nav__link">
    <span class="md-ellipsis">
      debug_rains()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.disconnect" class="md-nav__link">
    <span class="md-ellipsis">
      disconnect()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.exit" class="md-nav__link">
    <span class="md-ellipsis">
      exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.exit_main" class="md-nav__link">
    <span class="md-ellipsis">
      exit_main()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.fuction_runner" class="md-nav__link">
    <span class="md-ellipsis">
      fuction_runner()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_all_mods" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_mods()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_autocompletion_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_autocompletion_dict()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_function" class="md-nav__link">
    <span class="md-ellipsis">
      get_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_mod" class="md-nav__link">
    <span class="md-ellipsis">
      get_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_username" class="md-nav__link">
    <span class="md-ellipsis">
      get_username()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.hide_console" class="md-nav__link">
    <span class="md-ellipsis">
      hide_console()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.inplace_load_instance" class="md-nav__link">
    <span class="md-ellipsis">
      inplace_load_instance()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.load_all_mods_in_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_all_mods_in_file()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.load_mod" class="md-nav__link">
    <span class="md-ellipsis">
      load_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.mod_online" class="md-nav__link">
    <span class="md-ellipsis">
      mod_online()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.print" class="md-nav__link">
    <span class="md-ellipsis">
      print()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.reload_mod" class="md-nav__link">
    <span class="md-ellipsis">
      reload_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.remove_mod" class="md-nav__link">
    <span class="md-ellipsis">
      remove_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_a_from_sync" class="md-nav__link">
    <span class="md-ellipsis">
      run_a_from_sync()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_any" class="md-nav__link">
    <span class="md-ellipsis">
      run_any()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_function" class="md-nav__link">
    <span class="md-ellipsis">
      run_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_http" class="md-nav__link">
    <span class="md-ellipsis">
      run_http()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_runnable" class="md-nav__link">
    <span class="md-ellipsis">
      run_runnable()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_autocompletion_dict" class="md-nav__link">
    <span class="md-ellipsis">
      save_autocompletion_dict()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_exit" class="md-nav__link">
    <span class="md-ellipsis">
      save_exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_initialized_module" class="md-nav__link">
    <span class="md-ellipsis">
      save_initialized_module()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_instance" class="md-nav__link">
    <span class="md-ellipsis">
      save_instance()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_load" class="md-nav__link">
    <span class="md-ellipsis">
      save_load()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_registry_as_enums" class="md-nav__link">
    <span class="md-ellipsis">
      save_registry_as_enums()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.set_logger" class="md-nav__link">
    <span class="md-ellipsis">
      set_logger()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.set_runnable" class="md-nav__link">
    <span class="md-ellipsis">
      set_runnable()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.show_console" class="md-nav__link">
    <span class="md-ellipsis">
      show_console()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.sprint" class="md-nav__link">
    <span class="md-ellipsis">
      sprint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.tb" class="md-nav__link">
    <span class="md-ellipsis">
      tb()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.watch_mod" class="md-nav__link">
    <span class="md-ellipsis">
      watch_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.system.main_tool.MainTool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.webInstall" class="md-nav__link">
    <span class="md-ellipsis">
      webInstall()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.file_handler.FileHandler" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.system.file_handler.FileHandler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.extras.Style.Style" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.extras.Style.Style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.runabel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel.chat" class="md-nav__link">
    <span class="md-ellipsis">
      chat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="chat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolboxv2.runabel.chat.init" class="md-nav__link">
    <span class="md-ellipsis">
      init()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel.demon" class="md-nav__link">
    <span class="md-ellipsis">
      demon
    </span>
  </a>
  
    <nav class="md-nav" aria-label="demon">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolboxv2.runabel.demon.run" class="md-nav__link">
    <span class="md-ellipsis">
      run()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/utils" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.toolbox.App
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_exit" class="md-nav__link">
    <span class="md-ellipsis">
      a_exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_fuction_runner" class="md-nav__link">
    <span class="md-ellipsis">
      a_fuction_runner()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_remove_mod" class="md-nav__link">
    <span class="md-ellipsis">
      a_remove_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_run_any" class="md-nav__link">
    <span class="md-ellipsis">
      a_run_any()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.a_run_function" class="md-nav__link">
    <span class="md-ellipsis">
      a_run_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.debug_rains" class="md-nav__link">
    <span class="md-ellipsis">
      debug_rains()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.disconnect" class="md-nav__link">
    <span class="md-ellipsis">
      disconnect()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.exit" class="md-nav__link">
    <span class="md-ellipsis">
      exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.exit_main" class="md-nav__link">
    <span class="md-ellipsis">
      exit_main()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.fuction_runner" class="md-nav__link">
    <span class="md-ellipsis">
      fuction_runner()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_all_mods" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_mods()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_autocompletion_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_autocompletion_dict()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_function" class="md-nav__link">
    <span class="md-ellipsis">
      get_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_mod" class="md-nav__link">
    <span class="md-ellipsis">
      get_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.get_username" class="md-nav__link">
    <span class="md-ellipsis">
      get_username()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.hide_console" class="md-nav__link">
    <span class="md-ellipsis">
      hide_console()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.inplace_load_instance" class="md-nav__link">
    <span class="md-ellipsis">
      inplace_load_instance()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.load_all_mods_in_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_all_mods_in_file()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.load_mod" class="md-nav__link">
    <span class="md-ellipsis">
      load_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.mod_online" class="md-nav__link">
    <span class="md-ellipsis">
      mod_online()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.print" class="md-nav__link">
    <span class="md-ellipsis">
      print()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.reload_mod" class="md-nav__link">
    <span class="md-ellipsis">
      reload_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.remove_mod" class="md-nav__link">
    <span class="md-ellipsis">
      remove_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_a_from_sync" class="md-nav__link">
    <span class="md-ellipsis">
      run_a_from_sync()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_any" class="md-nav__link">
    <span class="md-ellipsis">
      run_any()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_function" class="md-nav__link">
    <span class="md-ellipsis">
      run_function()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_http" class="md-nav__link">
    <span class="md-ellipsis">
      run_http()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.run_runnable" class="md-nav__link">
    <span class="md-ellipsis">
      run_runnable()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_autocompletion_dict" class="md-nav__link">
    <span class="md-ellipsis">
      save_autocompletion_dict()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_exit" class="md-nav__link">
    <span class="md-ellipsis">
      save_exit()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_initialized_module" class="md-nav__link">
    <span class="md-ellipsis">
      save_initialized_module()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_instance" class="md-nav__link">
    <span class="md-ellipsis">
      save_instance()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_load" class="md-nav__link">
    <span class="md-ellipsis">
      save_load()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.save_registry_as_enums" class="md-nav__link">
    <span class="md-ellipsis">
      save_registry_as_enums()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.set_logger" class="md-nav__link">
    <span class="md-ellipsis">
      set_logger()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.set_runnable" class="md-nav__link">
    <span class="md-ellipsis">
      set_runnable()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.show_console" class="md-nav__link">
    <span class="md-ellipsis">
      show_console()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.sprint" class="md-nav__link">
    <span class="md-ellipsis">
      sprint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.tb" class="md-nav__link">
    <span class="md-ellipsis">
      tb()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.toolbox.App.watch_mod" class="md-nav__link">
    <span class="md-ellipsis">
      watch_mod()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.system.main_tool.MainTool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.main_tool.MainTool.webInstall" class="md-nav__link">
    <span class="md-ellipsis">
      webInstall()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.system.file_handler.FileHandler" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.system.file_handler.FileHandler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.utils.extras.Style.Style" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.utils.extras.Style.Style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel" class="md-nav__link">
    <span class="md-ellipsis">
      toolboxv2.runabel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel.chat" class="md-nav__link">
    <span class="md-ellipsis">
      chat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="chat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolboxv2.runabel.chat.init" class="md-nav__link">
    <span class="md-ellipsis">
      init()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolboxv2.runabel.demon" class="md-nav__link">
    <span class="md-ellipsis">
      demon
    </span>
  </a>
  
    <nav class="md-nav" aria-label="demon">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolboxv2.runabel.demon.run" class="md-nav__link">
    <span class="md-ellipsis">
      run()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
  


<h1 id="toolboxv2-module">toolboxv2 module<a class="headerlink" href="#toolboxv2-module" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-class">

<a id="toolboxv2.utils.toolbox.App"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">AppType</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">Singleton</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">AppArgs</span><span class="p">()</span><span class="o">.</span><span class="n">default</span><span class="p">()):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="n">abspath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_flag</span> <span class="o">=</span> <span class="n">system</span><span class="p">()</span>  <span class="c1"># Linux: Linux Mac: Darwin Windows: Windows</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">appdata</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;APPDATA&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;nt&#39;</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;XDG_CONFIG_HOME&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
                <span class="s1">&#39;~/.config&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;posix&#39;</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_flag</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_flag</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>
            <span class="n">dir_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">abspath</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/utils&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dir_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">abspath</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">utils&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>

        <span class="n">lapp</span> <span class="o">=</span> <span class="n">dir_name</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.data</span><span class="se">\\</span><span class="s1">&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">lapp</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">prefix_file</span><span class="p">:</span>
                <span class="n">cont</span> <span class="o">=</span> <span class="n">prefix_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">cont</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="n">cont</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">lapp</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lapp</span><span class="si">}</span><span class="s2">last-app-prefix.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">prefix_file</span><span class="p">:</span>
                <span class="n">prefix_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>

        <span class="n">node_</span> <span class="o">=</span> <span class="n">node</span><span class="p">()</span>

        <span class="k">if</span> <span class="s1">&#39;localhost&#39;</span> <span class="ow">in</span> <span class="n">node_</span> <span class="ow">and</span> <span class="p">(</span><span class="n">host</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;HOSTNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;localhost&#39;</span><span class="p">))</span> <span class="o">!=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">:</span>
            <span class="n">node_</span> <span class="o">=</span> <span class="n">node_</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">node_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">globals</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;root&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">**</span><span class="nb">globals</span><span class="p">()},</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">locals</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;app&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="nb">locals</span><span class="p">()},</span>
        <span class="p">}</span>

        <span class="n">identification</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_flag</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_flag</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>
                <span class="n">start_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;ToolBoxV2/toolboxv2&quot;</span><span class="p">,</span> <span class="s2">&quot;toolboxv2&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">start_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;ToolBoxV2</span><span class="se">\\</span><span class="s2">toolboxv2&quot;</span><span class="p">,</span> <span class="s2">&quot;toolboxv2&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.data</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;test&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">=</span> <span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.config</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;test&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info_dir</span> <span class="o">=</span> <span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.info</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;test&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.data</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">identification</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.config</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">identification</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">.info</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">identification</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">appdata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appdata</span> <span class="o">+=</span> <span class="s2">&quot;/ToolBoxV2&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">appdata</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">appdata</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting ToolBox as </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2"> from :&quot;</span><span class="p">,</span> <span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>

        <span class="n">logger_info_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logging_filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_logger</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Logger &quot;</span> <span class="o">+</span> <span class="n">logger_info_str</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;================================&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Logger initialized&quot;</span><span class="p">)</span>
        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREEN</span><span class="p">(</span><span class="s2">&quot;Starting Application instance&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">init</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CONFIG_FILE&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">dir_name</span><span class="si">}</span><span class="s1">/toolbox.yaml&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
            <span class="n">_version</span> <span class="o">=</span> <span class="n">safe_load</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
            <span class="n">__version__</span> <span class="o">=</span> <span class="n">_version</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;-.-.-&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">__version__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;MACRO&quot;</span><span class="p">:</span> <span class="s2">&quot;macro~~~~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MACRO_C&quot;</span><span class="p">:</span> <span class="s2">&quot;m_color~~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;HELPER&quot;</span><span class="p">:</span> <span class="s2">&quot;helper~~~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="s2">&quot;debug~~~~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;name-spa~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;st-load&quot;</span><span class="p">:</span> <span class="s2">&quot;mute~load:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;comm-his&quot;</span><span class="p">:</span> <span class="s2">&quot;comm-his~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;develop-mode&quot;</span><span class="p">:</span> <span class="s2">&quot;dev~mode~:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;provider::&quot;</span><span class="p">:</span> <span class="s2">&quot;provider::&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;MACRO&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Exit&#39;</span><span class="p">],</span>
            <span class="s2">&quot;MACRO_C&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;HELPER&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;st-load&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;comm-his&quot;</span><span class="p">:</span> <span class="p">[[]],</span>
            <span class="s2">&quot;develop-mode&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span> <span class="o">=</span> <span class="n">FileHandler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s2">&quot;.config&quot;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="n">defaults</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">load_file_handler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="s2">&quot;develop-mode&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="s2">&quot;provider::&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;provider::&quot;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="o">.</span><span class="n">port</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;localhost&quot;</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;HOSTNAME&quot;</span><span class="p">,</span>
                                                                     <span class="s2">&quot;localhost&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;https://simplecore.app&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modules</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span> <span class="o">=</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">native</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PREFIX</span> <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;~</span><span class="si">{</span><span class="n">node</span><span class="p">()</span><span class="si">}</span><span class="s2">@&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_exit</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Infos:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="s1">&#39;Name&#39;</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">node</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="s1">&#39;ID&#39;</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="s1">&#39;Version&#39;</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">GREEN</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Finish init up in </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span> <span class="o">=</span> <span class="n">args</span>

        <span class="kn">from</span> <span class="nn">.system.session</span> <span class="kn">import</span> <span class="n">Session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_username</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_input</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">user_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="s2">&quot;ac_user:::&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_input</span> <span class="ow">and</span> <span class="n">user_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user_name</span> <span class="o">!=</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">user_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Input your username</span><span class="se">\n</span><span class="s2">be sure to make no typos: &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;ac_user:::&quot;</span><span class="p">,</span> <span class="n">user_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">user_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="n">user_name</span>

    <span class="k">def</span> <span class="nf">reset_username</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;ac_user:::&quot;</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">exit_main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">hide_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">show_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">set_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-test&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                     <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Test Mode&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;live&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-live&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                     <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Live Mode&quot;</span>
            <span class="c1"># setup_logging(logging.WARNING, name=&quot;toolbox-live&quot;, is_online=True</span>
            <span class="c1">#              , online_level=logging.WARNING).info(&quot;Logger initialized&quot;)</span>
        <span class="k">elif</span> <span class="s2">&quot;debug&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-debug&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-debug&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                     <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in debug Mode&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;toolbox-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">-debug&quot;</span><span class="p">,</span>
                                                     <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                     <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in args debug Mode&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;toolbox-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Default&quot;</span>

        <span class="k">return</span> <span class="n">logger_info_str</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span>

    <span class="nd">@debug</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value must be an boolean. is : </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> type of </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value must be an boolean.&quot;</span><span class="p">)</span>

        <span class="c1"># self.logger.info(f&quot;Setting debug {value}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">debug_rains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span> <span class="nf">set_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span> <span class="o">=</span> <span class="n">r</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">..runabel</span> <span class="kn">import</span> <span class="n">runnable_dict</span> <span class="k">as</span> <span class="n">runnable_dict_func</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">,</span> <span class="o">**</span><span class="n">runnable_dict_func</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">)}</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">]):</span>
                <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">](</span><span class="n">get_app</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="s2">&quot;runner&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">](</span><span class="n">get_app</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="s2">&quot;runner&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_coppy_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">new_mod_dir</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;py&#39;</span><span class="p">):</span>

        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;xb&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; coppy mod </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">new_mod_dir</span><span class="si">}</span><span class="s2"> size : </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">8388608</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> mb&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">new_mod_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">new_mod_dir</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">new_mod_dir</span><span class="si">}</span><span class="s2">/__init__.py&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nmd</span><span class="p">:</span>
                <span class="n">nmd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__version__ = &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">new_mod_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">new_mod_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">d</span><span class="p">:</span>
                <span class="n">runtime_mod</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Testing version but not efficient</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">runtime_mod</span><span class="p">):</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;wb&#39;</span>

        <span class="k">if</span> <span class="n">mode</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">new_mod_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_pre_lib_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">path_to</span><span class="o">=</span><span class="s2">&quot;./runtime&quot;</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;py&#39;</span><span class="p">):</span>
        <span class="n">working_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">lib_mod_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;toolboxv2.runtime.</span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">.mod_lib.&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pre_lib_mod </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">lib_mod_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">postfix</span> <span class="o">=</span> <span class="s2">&quot;_dev&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">mod_file_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./mods</span><span class="si">{</span><span class="n">postfix</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">new_mod_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_to</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">/mod_lib&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">mod_file_dir</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coppy_mod</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">new_mod_dir</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="n">file_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lib_mod_dir</span>

    <span class="k">def</span> <span class="nf">_copy_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;py&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pre_lib_mod</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">file_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">helper_install_pip_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;main&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Installing </span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2"> GREEDY&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="si">}</span><span class="s2"> -m pip install </span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">python_module_import_classifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">error_message</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">error_message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;No module named &#39;toolboxv2.utils&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;404 </span><span class="si">{</span><span class="n">error_message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">error_message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;No module named &#39;toolboxv2.mods&quot;</span><span class="p">):</span>
            <span class="c1"># TODO: install from remote optional</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;404 </span><span class="si">{</span><span class="n">error_message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;mods&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">error_message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;No module named &#39;&quot;</span><span class="p">):</span>
            <span class="n">pip_requ</span> <span class="o">=</span> <span class="n">error_message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1"># if &#39;y&#39; in input(f&quot;\t\t\tAuto install {pip_requ} Y/n&quot;).lower:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">helper_install_pip_module</span><span class="p">(</span><span class="n">pip_requ</span><span class="p">)</span>
            <span class="c1"># return Result.default_internal_error(f&quot;404 {pip_requ} not found&quot;)</span>

    <span class="k">def</span> <span class="nf">inplace_load_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mfo</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="ow">and</span> <span class="n">loc</span> <span class="o">==</span> <span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="s2">&quot;toolboxv2.mods_dev.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">mod_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloading mod from : </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_mod</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">mfo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">modular_file_object</span>
            <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> not found is type sensitive </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> not found is type sensitive </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="o">.</span><span class="n">sysPrint</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">python_module_import_classifier</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> is not valid&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">):</span>
            <span class="n">tools_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">):</span>
                <span class="n">tools_class</span> <span class="o">=</span> <span class="n">modular_file_object</span>
                <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tools_class</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">modular_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="n">modular_file_object</span>
        <span class="n">app_instance_type</span> <span class="o">=</span> <span class="s2">&quot;file/application&quot;</span>

        <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">modular_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">modular_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">modular_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">modular_file_object</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance loaded </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">modular_file_object</span>

        <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tools_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_initialized_module</span><span class="p">(</span><span class="n">tools_class</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
            <span class="n">modular_id</span> <span class="o">=</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">name</span>
            <span class="n">app_instance_type</span> <span class="o">=</span> <span class="s2">&quot;functions/class&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>
        <span class="c1"># if private:</span>
        <span class="c1">#     self.functions[modular_id][f&quot;{spec}_private&quot;] = private</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">save</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">instance</span> <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">tools_class</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_instance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">app_instance_type</span><span class="p">,</span> <span class="n">tools_class</span><span class="o">=</span><span class="n">tools_class</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;file/application&quot;</span><span class="p">,</span> <span class="n">tools_class</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">modular_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="ow">and</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;ERROR OVERRIDE&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module already known </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">on_start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_start&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">on_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_start</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">modular_id</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On start </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_start</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                            <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                            <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On start result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;starting function not found </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                            <span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_start error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_start</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
                    <span class="k">finally</span><span class="p">:</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">elif</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">modular_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools_class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tools_class</span><span class="p">,</span> <span class="s1">&#39;tools&#39;</span><span class="p">):</span>
                    <span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">get_version</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">function_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">t_function_name</span> <span class="o">=</span> <span class="n">function_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">t_function_name</span> <span class="o">!=</span> <span class="s2">&quot;all&quot;</span> <span class="ow">and</span> <span class="n">t_function_name</span> <span class="o">!=</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">mod_name</span><span class="o">=</span><span class="n">modular_id</span><span class="p">)(</span><span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">function_name</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;/BC&quot;</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting Module </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2"> compatibility failed with : </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">modular_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="ow">and</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Modular </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2"> is not a valid mod&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">instance</span> <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">tools_class</span>

    <span class="k">def</span> <span class="nf">save_initialized_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tools_class</span><span class="p">,</span> <span class="n">spec</span><span class="p">):</span>
        <span class="n">tools_class</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>
        <span class="n">live_tools_class</span> <span class="o">=</span> <span class="n">tools_class</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">live_tools_class</span>

    <span class="k">def</span> <span class="nf">mod_online</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">installed</span> <span class="ow">and</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">(</span><span class="n">mod_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mod_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span>

    <span class="k">def</span> <span class="nf">_get_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                      <span class="n">specification</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span>
                      <span class="n">metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_str</span><span class="p">:</span> <span class="nb">tuple</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">as_str</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">modular_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">function_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_str</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">modular_id</span><span class="p">,</span> <span class="n">function_id</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">modular_id</span><span class="p">,</span> <span class="n">function_id</span> <span class="o">=</span> <span class="n">as_str</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;getting function : </span><span class="si">{</span><span class="n">specification</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">modular_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">(</span><span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">specification</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">modular_id</span><span class="p">,</span> <span class="n">function_id</span><span class="p">),</span>
                                         <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
                                         <span class="n">specification</span><span class="o">=</span><span class="n">specification</span><span class="p">,</span>
                                         <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                                         <span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;function modular not found </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2"> 404&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">,</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="n">function_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;function data not found </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_id</span><span class="si">}</span><span class="s2"> 404&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">,</span> <span class="mi">404</span>

        <span class="n">function_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="n">function_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;functions </span><span class="si">{</span><span class="n">function_id</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">function_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">function_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="n">function_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

        <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;func&quot;</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">)</span>

        <span class="n">state_</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">state_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">state</span> <span class="o">!=</span> <span class="n">state_</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">state_</span>

        <span class="k">if</span> <span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No function found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">,</span> <span class="mi">300</span>

        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No function (params) found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">,</span> <span class="mi">301</span>

        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning metadata stateless&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">function_data</span><span class="p">,</span> <span class="n">function</span><span class="p">),</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">state</span><span class="p">:</span>  <span class="c1"># mens a stateless function</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning stateless function&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">function</span><span class="p">,</span> <span class="mi">0</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">specification</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>

        <span class="c1"># instance_type = self.functions[modular_id].get(f&quot;{specification}_instance_type&quot;, &quot;functions/class&quot;)</span>

        <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="n">get_app</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;fuction </span><span class="si">{</span><span class="n">specification</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">alive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">modular_id</span><span class="p">)</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">specification</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No live Instance found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">,</span> <span class="mi">400</span>

        <span class="c1"># if instance_type.endswith(&quot;/BC&quot;):  # for backwards compatibility  functions/class/BC old modules</span>
        <span class="c1">#     # returning as stateless</span>
        <span class="c1">#     # return &quot;422&quot;, -1</span>
        <span class="c1">#     self.logger.info(</span>
        <span class="c1">#         f&quot;returning stateless function, cant find tools class for state handling found {instance_type}&quot;)</span>
        <span class="c1">#     if metadata:</span>
        <span class="c1">#         self.logger.info(f&quot;returning metadata stateless&quot;)</span>
        <span class="c1">#         return (function_data, function), 0</span>
        <span class="c1">#     return function, 0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wrapping in higher_order_function&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returned fuction </span><span class="si">{</span><span class="n">specification</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">higher_order_function</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning metadata stateful&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">function_data</span><span class="p">,</span> <span class="n">higher_order_function</span><span class="p">),</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning stateful function&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">higher_order_function</span><span class="p">,</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">save_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;save exiting saving data to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> states of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">load_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mlm</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">action_list_helper</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I (inplace load dill on error python)&#39;</span><span class="p">,</span>
                              <span class="c1"># &#39;C (coppy py file to runtime dir)&#39;,</span>
                              <span class="c1"># &#39;S (save py file to dill)&#39;,</span>
                              <span class="c1"># &#39;CS (coppy and save py file)&#39;,</span>
                              <span class="c1"># &#39;D (development mode, inplace load py file)&#39;</span>
                              <span class="p">]</span>
        <span class="n">action_list</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;I&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span>
                       <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copy_load</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                       <span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mlm</span> <span class="ow">in</span> <span class="n">action_list</span><span class="p">:</span>

                <span class="k">return</span> <span class="n">action_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mlm</span><span class="p">)()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;config mlm must be </span><span class="si">{</span><span class="s1">&#39; or &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">action_list_helper</span><span class="p">)</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">mlm</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;config mlm must be </span><span class="si">{</span><span class="s1">&#39; or &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">action_list_helper</span><span class="p">)</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">mlm</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with critical error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="s2">&quot;info&#39;s in logs.&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">load_all_mods_in_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s2">&quot;mods&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LOADING ALL MODS FROM FOLDER : </span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="c1"># Get the list of all modules</span>
        <span class="n">module_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_mods</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>
        <span class="n">open_modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">start_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">open_modules</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">om</span> <span class="ow">in</span> <span class="n">open_modules</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">om</span> <span class="ow">in</span> <span class="n">module_list</span><span class="p">:</span>
                <span class="n">module_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">om</span><span class="p">)</span>

        <span class="n">tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># if &#39;isaa&#39; in module_list:</span>
        <span class="c1">#     threading.Thread(target=self.save_load, args=(&quot;isaa&quot;, &#39;app&#39;), daemon=True).start()</span>
        <span class="c1">#     module_list.remove(&#39;isaa&#39;)</span>

        <span class="n">_</span> <span class="o">=</span> <span class="p">{</span><span class="n">tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">)))</span> <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">module_list</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">t</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An Error occurred while opening all modules error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="n">opened</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">start_len</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">opened</span><span class="si">}</span><span class="s2"> modules in </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">opened</span><span class="si">}</span><span class="s2"> modules in </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span>

    <span class="k">def</span> <span class="nf">get_all_mods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s2">&quot;mods&quot;</span><span class="p">,</span> <span class="n">path_to</span><span class="o">=</span><span class="s2">&quot;./runtime&quot;</span><span class="p">,</span> <span class="n">use_wd</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;collating all mods in working directory </span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">pr</span> <span class="o">=</span> <span class="s2">&quot;_dev&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">working_dir</span> <span class="o">==</span> <span class="s2">&quot;mods&quot;</span> <span class="ow">and</span> <span class="n">use_wd</span><span class="p">:</span>
            <span class="n">working_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./mods</span><span class="si">{</span><span class="n">pr</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">use_wd</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">w_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="n">working_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_to</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">w_dir</span><span class="si">}</span><span class="s2">/mod_lib</span><span class="si">{</span><span class="n">pr</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="si">}</span><span class="s2"> files&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">do_helper</span><span class="p">(</span><span class="n">_mod</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;mainTool&quot;</span> <span class="ow">in</span> <span class="n">_mod</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># if not _mod.endswith(&quot;.py&quot;):</span>
            <span class="c1">#     return False</span>
            <span class="k">if</span> <span class="n">_mod</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">_mod</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">r_endings</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">mods_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">r_endings</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">do_helper</span><span class="p">,</span> <span class="n">res</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">mods_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> Modules&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mods_list</span>

    <span class="k">def</span> <span class="nf">remove_all_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing: </span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_mod</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mod not active </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">on_exit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_exit&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
            <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/BC&quot;</span><span class="p">):</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;on_exit&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">delete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">helper</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_exit</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On exit </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f_</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f_</span><span class="p">)</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;closing function not found&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_exit error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">helper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_remove_all_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing: </span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_remove_mod</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mod not active </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">on_exit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_exit&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
            <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/BC&quot;</span><span class="p">):</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;on_exit&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">):</span>
                    <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">delete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">helper</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_exit</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On exit </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f_</span><span class="p">):</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="k">await</span> <span class="n">f_</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;closing function not found&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_exit error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">helper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hide_console</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">remove_all</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_all_modules</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exiting ToolBox interface&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alive</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_exit</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_exit</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">save_file_handler</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">SystemExit</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;If u ar testing this is fine else ...&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;daemon_app&#39;</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">threading</span>

            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;MainThread&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">Spinner</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing Thread </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s2">^50</span><span class="si">}</span><span class="s2">|&quot;</span><span class="p">,</span> <span class="n">symbols</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="n">count_down</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                 <span class="n">time_in_s</span><span class="o">=</span><span class="mf">0.751</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="k">else</span> <span class="mf">0.6</span><span class="p">):</span>
                        <span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">0.751</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="k">else</span> <span class="mf">0.6</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Timeout error on exit </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Timeout </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unsave Exit&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;loop&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">Spinner</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing Event loop:&quot;</span><span class="p">,</span> <span class="n">symbols</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_remove_all_modules</span><span class="p">()</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="o">*</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">f</span><span class="p">())</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span> <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">remove_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Save load module </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">modname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;no filename specified&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_mod</span><span class="p">(</span><span class="n">modname</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Kwargs for _get_function</span>
<span class="sd">            metadata:: return the registered function dictionary</span>
<span class="sd">                stateless: (function_data, None), 0</span>
<span class="sd">                stateful: (function_data, higher_order_function), 0</span>
<span class="sd">            state::boolean</span>
<span class="sd">                specification::str default app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">as_str</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                             <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span>
                             <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
        <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown function type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">modular_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>

        <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                      <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received fuction : </span><span class="si">{</span><span class="n">mod_function_name</span><span class="si">}</span><span class="s2">, with execode: </span><span class="si">{</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;async_initialized&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mod</span><span class="o">.</span><span class="n">async_initialized</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">mod</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                          <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function Not Found&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Result</span><span class="o">.</span><span class="n">default_user_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                              <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                              <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function is not decorated&quot;</span><span class="p">)</span><span class="o">.</span>
                    <span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">300</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot; has no state (instance)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">exec_code</span><span class="o">=</span><span class="n">error_code</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Internal error&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">tb_run_function_with_state</span><span class="p">:</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_data</span>
            <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">function</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profiling function&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                     <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span>
                     <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                     <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
        <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown function type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">modular_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>

        <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                      <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received fuction : </span><span class="si">{</span><span class="n">mod_function_name</span><span class="si">}</span><span class="s2">, with execode: </span><span class="si">{</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                          <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function Not Found&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Result</span><span class="o">.</span><span class="n">default_user_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                              <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                              <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function is not decorated&quot;</span><span class="p">)</span><span class="o">.</span>
                    <span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot; has no state (instance)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">error_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">exec_code</span><span class="o">=</span><span class="n">error_code</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Internal error&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.&quot;</span>
                                                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">tb_run_function_with_state</span><span class="p">:</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_data</span>
            <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">function_data</span><span class="p">,</span> <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">function</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                                 <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                                 <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profiling function&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fuction </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> is Async use a_run_any&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_a_from_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>
        <span class="n">modular_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span>
        <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func_name&#39;</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">)</span>
        <span class="n">mod_function_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">if_self_state</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">parameters</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution done&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
                <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">formatted_result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
                <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">formatted_result</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">row</span><span class="p">:</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Wrap the result in a Result object</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span>
                    <span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                    <span class="n">data_info</span><span class="o">=</span><span class="s2">&quot;Auto generated result&quot;</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                    <span class="n">info</span><span class="o">=</span><span class="s2">&quot;Function executed successfully&quot;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Function Exec code: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">exec_code</span><span class="si">}</span><span class="s2"> Info&#39;s: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">help_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Function Exec data: </span><span class="si">{</span><span class="n">formatted_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
            <span class="c1"># Wrap the exception in a Result object</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="c1"># res = formatted_result</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; executed wit an error </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_ok</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; executed successfully&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">formatted_result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>
        <span class="n">modular_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span>
        <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func_name&#39;</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">)</span>
        <span class="n">mod_function_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">if_self_state</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">parameters</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution done&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
                <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">formatted_result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
                <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">formatted_result</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">row</span><span class="p">:</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Wrap the result in a Result object</span>
                <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span>
                    <span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                    <span class="n">data_info</span><span class="o">=</span><span class="s2">&quot;Auto generated result&quot;</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                    <span class="n">info</span><span class="o">=</span><span class="s2">&quot;Function executed successfully&quot;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Function Exec code: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">exec_code</span><span class="si">}</span><span class="s2"> Info&#39;s: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">help_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Function Exec data: </span><span class="si">{</span><span class="n">formatted_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
            <span class="c1"># Wrap the exception in a Result object</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
            <span class="c1"># res = formatted_result</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; executed wit an error </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_ok</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; executed successfully&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">formatted_result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run_http</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
                       <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
        <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

        <span class="n">modular_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
        <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_name</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">function_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>


        <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/api/</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">function_name</span><span class="si">}{</span><span class="s1">&#39;?&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">args_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">args_</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                                     <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">run_local</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_any</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_run_local</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_run_any</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># if self.debug:</span>
        <span class="c1">#     self.logger.info(f&#39;Called from: {getouterframes(currentframe(), 2)}&#39;)</span>

        <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
        <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backwords_compability_variabel_string_holder</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="p">)</span>

        <span class="n">res</span><span class="p">:</span> <span class="n">Result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span>
                                        <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                        <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">,</span>
                                        <span class="n">args_</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">show_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">get_results</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">a_run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                        <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># if self.debug:</span>
        <span class="c1">#     self.logger.info(f&#39;Called from: {getouterframes(currentframe(), 2)}&#39;)</span>

        <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
        <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backwords_compability_variabel_string_holder</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="p">)</span>

        <span class="n">res</span><span class="p">:</span> <span class="n">Result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_run_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span>
                                                <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">,</span>
                                                <span class="n">args_</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">show_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">get_results</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">get_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModuleType</span> <span class="ow">or</span> <span class="n">MainToolType</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mod</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">Result</span><span class="p">)</span> <span class="ow">and</span> <span class="n">mod</span><span class="o">.</span><span class="n">is_error</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> pleas install the module&quot;</span><span class="p">)</span>
        <span class="c1"># private = self.functions[name].get(f&quot;{spec}_private&quot;)</span>
        <span class="c1"># if private is not None:</span>
        <span class="c1">#     if private and spec != &#39;app&#39;:</span>
        <span class="c1">#         raise ValueError(&quot;Module is private&quot;)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; is not found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_mod</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># self.logger.info(f&quot;Output : {text}&quot;)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprint</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System$</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">sprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># self.logger.info(f&quot;Output : {text}&quot;)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System$</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">kwargs</span> <span class="o">==</span> <span class="p">{}</span> <span class="ow">and</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">stram_print</span><span class="p">(</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Decorators for the toolbox</span>

    <span class="k">def</span> <span class="nf">reload_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">is_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_file</span><span class="p">:</span>
            <span class="n">mods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_mods</span><span class="p">(</span><span class="s2">&quot;./mods/&quot;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">mods</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">reload</span><span class="p">(</span><span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">mod</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloaded </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not load </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">,</span> <span class="n">mfo</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">watch_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">,</span> <span class="n">use_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">path_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">path_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">path_name</span> <span class="o">=</span> <span class="n">mod_name</span>
        <span class="n">is_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">path_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">watchfiles</span>
        <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
            <span class="n">paths</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;mods/</span><span class="si">{</span><span class="n">path_name</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;.py&#39;</span> <span class="k">if</span> <span class="n">is_file</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Watching Path: </span><span class="si">{</span><span class="n">paths</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">watchfiles</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">changes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reload_mod</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">is_file</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">use_thread</span><span class="p">:</span>
            <span class="n">helper</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">helper</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_register_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">module_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">func_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overriding function </span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="n">func_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="n">func_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">_create_decorator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                          <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">mod_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                          <span class="n">restrict_in_virtual_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                          <span class="n">api</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                          <span class="n">helper</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">initial</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">exit_f</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">samples</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">pre_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">post_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">api_methods</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">memory_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">file_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">request_as_kwarg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">row</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">memory_cache_max_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                          <span class="n">memory_cache_ttl</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">type_</span> <span class="o">=</span> <span class="n">type_</span><span class="o">.</span><span class="n">value</span>

        <span class="k">if</span> <span class="n">memory_cache</span> <span class="ow">and</span> <span class="n">file_cache</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Don&#39;t use both cash at the same time for the same fuction&quot;</span><span class="p">)</span>

        <span class="n">use_cache</span> <span class="o">=</span> <span class="n">memory_cache</span> <span class="ow">or</span> <span class="n">file_cache</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">file_cache</span><span class="p">:</span>
            <span class="n">cache</span> <span class="o">=</span> <span class="n">FileCache</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">cache</span><span class="se">\\</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span>
                              <span class="n">filename</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">cache</span><span class="se">\\</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="se">\\</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">cache.db&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">memory_cache</span><span class="p">:</span>
            <span class="n">cache</span> <span class="o">=</span> <span class="n">MemoryCache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">memory_cache_max_size</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="n">memory_cache_ttl</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">version</span>

        <span class="k">def</span> <span class="nf">a_additional_process</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

            <span class="k">async</span> <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">pre_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pre_compute</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">post_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_compute</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">row</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">((</span><span class="n">mod_name</span> <span class="k">if</span> <span class="n">mod_name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                       <span class="p">,</span> <span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
                                       <span class="p">,</span> <span class="n">type_</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">data_to</span> <span class="o">==</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">native</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">data_to</span> <span class="o">=</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">remote</span> <span class="k">if</span> <span class="n">api</span> <span class="k">else</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">native</span>
                <span class="c1"># Wenden Sie die to_api_result Methode auf das Ergebnis an, falls verfgbar</span>
                <span class="k">if</span> <span class="n">api</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;to_api_result&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">use_cache</span><span class="p">:</span>
                    <span class="k">return</span> <span class="k">await</span> <span class="n">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">cache_key</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mod_name</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">mod_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">cache_key</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mod_name</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">mod_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">bytes</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span>

                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">result</span>

            <span class="k">return</span> <span class="n">wrapper</span>

        <span class="k">def</span> <span class="nf">additional_process</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

            <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">pre_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">pre_compute</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">post_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">post_compute</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">row</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">((</span><span class="n">mod_name</span> <span class="k">if</span> <span class="n">mod_name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                       <span class="p">,</span> <span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
                                       <span class="p">,</span> <span class="n">type_</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">data_to</span> <span class="o">==</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">native</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">data_to</span> <span class="o">=</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">remote</span> <span class="k">if</span> <span class="n">api</span> <span class="k">else</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">native</span>
                <span class="c1"># Wenden Sie die to_api_result Methode auf das Ergebnis an, falls verfgbar</span>
                <span class="k">if</span> <span class="n">api</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;to_api_result&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">use_cache</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">cache_key</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mod_name</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">mod_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">cache_key</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mod_name</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">mod_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">bytes</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">result</span>

            <span class="k">return</span> <span class="n">wrapper</span>

        <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="n">sig</span> <span class="o">=</span> <span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="n">params</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
            <span class="n">module_name</span> <span class="o">=</span> <span class="n">mod_name</span> <span class="k">if</span> <span class="n">mod_name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="k">else</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="k">if</span> <span class="n">func_name</span> <span class="o">==</span> <span class="s1">&#39;on_start&#39;</span><span class="p">:</span>
                <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;on_startup&#39;</span>
            <span class="k">if</span> <span class="n">func_name</span> <span class="o">==</span> <span class="s1">&#39;on_exit&#39;</span><span class="p">:</span>
                <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;on_close&#39;</span>
            <span class="k">if</span> <span class="n">api</span> <span class="ow">or</span> <span class="n">pre_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">post_compute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">memory_cache</span> <span class="ow">or</span> <span class="n">file_cache</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                    <span class="n">func</span> <span class="o">=</span> <span class="n">a_additional_process</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">func</span> <span class="o">=</span> <span class="n">additional_process</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">api</span> <span class="ow">and</span> <span class="s1">&#39;Result&#39;</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">return_annotation</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fuction </span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2"> registered as &quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;Api fuction but uses </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">return_annotation</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                                 <span class="sa">f</span><span class="s2">&quot;Please change the sig from ..)-&gt; Result to ..)-&gt; ApiResult&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">type_</span><span class="p">,</span>
                <span class="s2">&quot;module_name&quot;</span><span class="p">:</span> <span class="n">module_name</span><span class="p">,</span>
                <span class="s2">&quot;func_name&quot;</span><span class="p">:</span> <span class="n">func_name</span><span class="p">,</span>
                <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">,</span>
                <span class="s2">&quot;restrict_in_virtual_mode&quot;</span><span class="p">:</span> <span class="n">restrict_in_virtual_mode</span><span class="p">,</span>
                <span class="s2">&quot;func&quot;</span><span class="p">:</span> <span class="n">func</span><span class="p">,</span>
                <span class="s2">&quot;api&quot;</span><span class="p">:</span> <span class="n">api</span><span class="p">,</span>
                <span class="s2">&quot;helper&quot;</span><span class="p">:</span> <span class="n">helper</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">version</span><span class="p">,</span>
                <span class="s2">&quot;initial&quot;</span><span class="p">:</span> <span class="n">initial</span><span class="p">,</span>
                <span class="s2">&quot;exit_f&quot;</span><span class="p">:</span> <span class="n">exit_f</span><span class="p">,</span>
                <span class="s2">&quot;api_methods&quot;</span><span class="p">:</span> <span class="n">api_methods</span> <span class="k">if</span> <span class="n">api_methods</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;AUTO&quot;</span><span class="p">],</span>
                <span class="s2">&quot;__module__&quot;</span><span class="p">:</span> <span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
                <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">sig</span><span class="p">,</span>
                <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                <span class="s2">&quot;row&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">,</span>
                <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="kc">False</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">state</span><span class="p">,</span>
                <span class="s2">&quot;do_test&quot;</span><span class="p">:</span> <span class="n">test</span><span class="p">,</span>
                <span class="s2">&quot;samples&quot;</span><span class="p">:</span> <span class="n">samples</span><span class="p">,</span>
                <span class="s2">&quot;request_as_kwarg&quot;</span><span class="p">:</span> <span class="n">request_as_kwarg</span><span class="p">,</span>

            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_function</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">exit_f</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;on_exit&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="s2">&quot;on_exit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="s2">&quot;on_exit&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">initial</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;on_start&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="s2">&quot;on_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">][</span><span class="s2">&quot;on_start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span>

        <span class="n">decorator</span><span class="o">.</span><span class="n">tb_init</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">decorator</span>

    <span class="k">def</span> <span class="nf">tb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
           <span class="n">mod_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="n">helper</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">test</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
           <span class="n">restrict_in_virtual_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">api</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">initial</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">exit_f</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">test_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">memory_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">file_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">request_as_kwarg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">row</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
           <span class="n">memory_cache_max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
           <span class="n">memory_cache_ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
           <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">dict</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">interface</span><span class="p">:</span> <span class="n">ToolBoxInterfaces</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">pre_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
           <span class="n">post_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
           <span class="n">api_methods</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
           <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A decorator for registering and configuring functions within a module.</span>

<span class="sd">    This decorator is used to wrap functions with additional functionality such as caching, API conversion, and lifecycle management (initialization and exit). It also handles the registration of the function in the module&#39;s function registry.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str, optional): The name to register the function under. Defaults to the function&#39;s own name.</span>
<span class="sd">        mod_name (str, optional): The name of the module the function belongs to.</span>
<span class="sd">        helper (str, optional): A helper string providing additional information about the function.</span>
<span class="sd">        version (str or None, optional): The version of the function or module.</span>
<span class="sd">        test (bool, optional): Flag to indicate if the function is for testing purposes.</span>
<span class="sd">        restrict_in_virtual_mode (bool, optional): Flag to restrict the function in virtual mode.</span>
<span class="sd">        api (bool, optional): Flag to indicate if the function is part of an API.</span>
<span class="sd">        initial (bool, optional): Flag to indicate if the function should be executed at initialization.</span>
<span class="sd">        exit_f (bool, optional): Flag to indicate if the function should be executed at exit.</span>
<span class="sd">        test_only (bool, optional): Flag to indicate if the function should only be used for testing.</span>
<span class="sd">        memory_cache (bool, optional): Flag to enable memory caching for the function.</span>
<span class="sd">        request_as_kwarg (bool, optional): Flag to get request if the fuction is calld from api.</span>
<span class="sd">        file_cache (bool, optional): Flag to enable file caching for the function.</span>
<span class="sd">        row (bool, optional): rather to auto wrap the result in Result type default False means no row data aka result type</span>
<span class="sd">        state (bool or None, optional): Flag to indicate if the function maintains state.</span>
<span class="sd">        level (int, optional): The level of the function, used for prioritization or categorization.</span>
<span class="sd">        memory_cache_max_size (int, optional): Maximum size of the memory cache.</span>
<span class="sd">        memory_cache_ttl (int, optional): Time-to-live for the memory cache entries.</span>
<span class="sd">        samples (list or dict or None, optional): Samples or examples of function usage.</span>
<span class="sd">        interface (str, optional): The interface type for the function.</span>
<span class="sd">        pre_compute (callable, optional): A function to be called before the main function.</span>
<span class="sd">        post_compute (callable, optional): A function to be called after the main function.</span>
<span class="sd">        api_methods (list[str], optional): default [&quot;AUTO&quot;] (GET if not params, POST if params) , GET, POST, PUT or DELETE.</span>

<span class="sd">    Returns:</span>
<span class="sd">        function: The decorated function with additional processing and registration capabilities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">interface</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">interface</span> <span class="o">=</span> <span class="s2">&quot;tb&quot;</span>
        <span class="k">if</span> <span class="n">test_only</span> <span class="ow">and</span> <span class="s1">&#39;test&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">args</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_decorator</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span>
                                      <span class="n">name</span><span class="p">,</span>
                                      <span class="n">mod_name</span><span class="p">,</span>
                                      <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
                                      <span class="n">restrict_in_virtual_mode</span><span class="o">=</span><span class="n">restrict_in_virtual_mode</span><span class="p">,</span>
                                      <span class="n">helper</span><span class="o">=</span><span class="n">helper</span><span class="p">,</span>
                                      <span class="n">api</span><span class="o">=</span><span class="n">api</span><span class="p">,</span>
                                      <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
                                      <span class="n">initial</span><span class="o">=</span><span class="n">initial</span><span class="p">,</span>
                                      <span class="n">exit_f</span><span class="o">=</span><span class="n">exit_f</span><span class="p">,</span>
                                      <span class="n">test</span><span class="o">=</span><span class="n">test</span><span class="p">,</span>
                                      <span class="n">samples</span><span class="o">=</span><span class="n">samples</span><span class="p">,</span>
                                      <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
                                      <span class="n">pre_compute</span><span class="o">=</span><span class="n">pre_compute</span><span class="p">,</span>
                                      <span class="n">post_compute</span><span class="o">=</span><span class="n">post_compute</span><span class="p">,</span>
                                      <span class="n">memory_cache</span><span class="o">=</span><span class="n">memory_cache</span><span class="p">,</span>
                                      <span class="n">file_cache</span><span class="o">=</span><span class="n">file_cache</span><span class="p">,</span>
                                      <span class="n">request_as_kwarg</span><span class="o">=</span><span class="n">request_as_kwarg</span><span class="p">,</span>
                                      <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span>
                                      <span class="n">api_methods</span><span class="o">=</span><span class="n">api_methods</span><span class="p">,</span>
                                      <span class="n">memory_cache_max_size</span><span class="o">=</span><span class="n">memory_cache_max_size</span><span class="p">,</span>
                                      <span class="n">memory_cache_ttl</span><span class="o">=</span><span class="n">memory_cache_ttl</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">autocompletion_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">module</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">function_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span>
                                       <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="p">[])}</span>  <span class="c1"># TODO get default from sig</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">autocompletion_dict</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;auto~~~~~~&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">autocompletion_dict</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="s2">&quot;auto~~~~~~&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_registry_as_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Ordner erstellen, falls nicht vorhanden</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

        <span class="c1"># Dateipfad vorbereiten</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

        <span class="c1"># Enum-Klassen als Strings generieren</span>
        <span class="n">enum_classes</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;&quot;&quot;&quot;Automatic generated by ToolBox v = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s1">&quot;&quot;&quot;&#39;</span>
                        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">from enum import Enum</span><span class="se">\n</span><span class="s1">from dataclasses import dataclass&#39;</span>
                        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">module</span><span class="p">,</span> <span class="n">functions</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;APP_INSTANCE&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">module</span>
            <span class="n">enum_members</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot; str = &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39;  &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;# Input: (</span><span class="si">{</span><span class="n">fuction_data</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fuction_data</span><span class="p">,</span><span class="w"> </span><span class="nb">dict</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">),&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot; Output: </span><span class="si">{</span><span class="n">fuction_data</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">return_annotation</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fuction_data</span><span class="p">,</span><span class="w"> </span><span class="nb">dict</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;None&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">for</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">fuction_data</span> <span class="ow">in</span> <span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
            <span class="n">enum_class</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;@dataclass</span><span class="se">\n</span><span class="s1">class </span><span class="si">{</span><span class="n">class_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">(Enum):&#39;</span>
                          <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    NAME = &#39;</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">    </span><span class="si">{</span><span class="n">enum_members</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">enum_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enum_class</span><span class="p">)</span>

        <span class="c1"># Enums in die Datei schreiben</span>
        <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">enum_classes</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid Enums Loosing content pleas delete it ur self in the (utils/system/all_functions_enums.py) or add mor new stuff :}&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Enums gespeichert in </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h2 id="toolboxv2.utils.toolbox.App.debug" class="doc doc-heading">
<code class="highlight language-python"><span class="n">debug</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.debug" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.a_exit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">a_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.a_exit" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">a_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_remove_all_modules</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
        <span class="o">*</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">f</span><span class="p">())</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span> <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f</span><span class="p">)])</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">remove_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.a_fuction_runner" class="doc doc-heading">
<code class="highlight language-python"><span class="n">a_fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.a_fuction_runner" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>parameters = function_data.get('params')
modular_name = function_data.get('module_name')
function_name = function_data.get('func_name')
mod_function_name = f"{modular_name}.{function_name}"</p>
<p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">a_fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>
    <span class="n">modular_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span>
    <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func_name&#39;</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">)</span>
    <span class="n">mod_function_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">if_self_state</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">parameters</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution done&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">formatted_result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">formatted_result</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Wrap the result in a Result object</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span>
                <span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                <span class="n">data_info</span><span class="o">=</span><span class="s2">&quot;Auto generated result&quot;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">info</span><span class="o">=</span><span class="s2">&quot;Function executed successfully&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function Exec code: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">exec_code</span><span class="si">}</span><span class="s2"> Info&#39;s: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">help_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function Exec data: </span><span class="si">{</span><span class="n">formatted_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="c1"># Wrap the exception in a Result object</span>
        <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="c1"># res = formatted_result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; executed wit an error </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_ok</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; executed successfully&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">formatted_result</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.a_remove_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">a_remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.a_remove_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">a_remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mod not active </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">on_exit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
        <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/BC&quot;</span><span class="p">):</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;on_exit&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">delete</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">helper</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_exit</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On exit </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f_</span><span class="p">):</span>
                    <span class="n">o</span> <span class="o">=</span> <span class="k">await</span> <span class="n">f_</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;closing function not found&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_exit error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">helper</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.a_run_any" class="doc doc-heading">
<code class="highlight language-python"><span class="n">a_run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.a_run_any" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">a_run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                    <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="c1"># if self.debug:</span>
    <span class="c1">#     self.logger.info(f&#39;Called from: {getouterframes(currentframe(), 2)}&#39;)</span>

    <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
    <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backwords_compability_variabel_string_holder</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="p">)</span>

    <span class="n">res</span><span class="p">:</span> <span class="n">Result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_run_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span>
                                            <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                            <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">,</span>
                                            <span class="n">args_</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="n">res</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">show_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">get_results</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">res</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.a_run_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">a_run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.a_run_function" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">a_run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                         <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span>
                         <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>

    <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
    <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown function type&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">modular_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>

    <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                  <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received fuction : </span><span class="si">{</span><span class="n">mod_function_name</span><span class="si">}</span><span class="s2">, with execode: </span><span class="si">{</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;async_initialized&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mod</span><span class="o">.</span><span class="n">async_initialized</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">mod</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                      <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function Not Found&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Result</span><span class="o">.</span><span class="n">default_user_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                          <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                          <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function is not decorated&quot;</span><span class="p">)</span><span class="o">.</span>
                <span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">300</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot; has no state (instance)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">exec_code</span><span class="o">=</span><span class="n">error_code</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Internal error&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tb_run_function_with_state</span><span class="p">:</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_data</span>
        <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">function</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profiling function&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.debug_rains" class="doc doc-heading">
<code class="highlight language-python"><span class="n">debug_rains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.debug_rains" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">debug_rains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">e</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.disconnect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disconnect</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.disconnect" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.exit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.exit" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_console</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">remove_all</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_all_modules</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exiting ToolBox interface&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alive</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">called_exit</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_exit</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">save_file_handler</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">SystemExit</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;If u ar testing this is fine else ...&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;daemon_app&#39;</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">threading</span>

        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;MainThread&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">Spinner</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing Thread </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s2">^50</span><span class="si">}</span><span class="s2">|&quot;</span><span class="p">,</span> <span class="n">symbols</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="n">count_down</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">time_in_s</span><span class="o">=</span><span class="mf">0.751</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="k">else</span> <span class="mf">0.6</span><span class="p">):</span>
                    <span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">0.751</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="k">else</span> <span class="mf">0.6</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Timeout error on exit </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Timeout </span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unsave Exit&quot;</span><span class="p">)</span>
                <span class="k">break</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;loop&#39;</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">Spinner</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing Event loop:&quot;</span><span class="p">,</span> <span class="n">symbols</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.exit_main" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exit_main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.exit_main" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">exit_main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.fuction_runner" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.fuction_runner" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>parameters = function_data.get('params')
modular_name = function_data.get('module_name')
function_name = function_data.get('func_name')
mod_function_name = f"{modular_name}.{function_name}"</p>
<p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fuction_runner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>
    <span class="n">modular_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span>
    <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func_name&#39;</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">)</span>
    <span class="n">mod_function_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">if_self_state</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">parameters</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="n">if_self_state</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution done&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">formatted_result</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ApiResult</span><span class="p">):</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">if</span> <span class="n">formatted_result</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">formatted_result</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span><span class="o">.</span><span class="n">to_api_result</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Wrap the result in a Result object</span>
            <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span>
                <span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                <span class="n">data_info</span><span class="o">=</span><span class="s2">&quot;Auto generated result&quot;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">info</span><span class="o">=</span><span class="s2">&quot;Function executed successfully&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function Exec code: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">exec_code</span><span class="si">}</span><span class="s2"> Info&#39;s: </span><span class="si">{</span><span class="n">formatted_result</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">help_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function Exec data: </span><span class="si">{</span><span class="n">formatted_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="c1"># Wrap the exception in a Result object</span>
        <span class="n">formatted_result</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>
        <span class="c1"># res = formatted_result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; executed wit an error </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;! Function ERROR: in </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_ok</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; executed successfully&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">formatted_result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.get_all_mods" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_mods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s1">&#39;mods&#39;</span><span class="p">,</span> <span class="n">path_to</span><span class="o">=</span><span class="s1">&#39;./runtime&#39;</span><span class="p">,</span> <span class="n">use_wd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.get_all_mods" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_mods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s2">&quot;mods&quot;</span><span class="p">,</span> <span class="n">path_to</span><span class="o">=</span><span class="s2">&quot;./runtime&quot;</span><span class="p">,</span> <span class="n">use_wd</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;collating all mods in working directory </span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">pr</span> <span class="o">=</span> <span class="s2">&quot;_dev&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">working_dir</span> <span class="o">==</span> <span class="s2">&quot;mods&quot;</span> <span class="ow">and</span> <span class="n">use_wd</span><span class="p">:</span>
        <span class="n">working_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./mods</span><span class="si">{</span><span class="n">pr</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">elif</span> <span class="n">use_wd</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">w_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">working_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_to</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">w_dir</span><span class="si">}</span><span class="s2">/mod_lib</span><span class="si">{</span><span class="n">pr</span><span class="si">}</span><span class="s2">/&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="si">}</span><span class="s2"> files&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_helper</span><span class="p">(</span><span class="n">_mod</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;mainTool&quot;</span> <span class="ow">in</span> <span class="n">_mod</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># if not _mod.endswith(&quot;.py&quot;):</span>
        <span class="c1">#     return False</span>
        <span class="k">if</span> <span class="n">_mod</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">_mod</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">r_endings</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">word</span>

    <span class="n">mods_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">r_endings</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">do_helper</span><span class="p">,</span> <span class="n">res</span><span class="p">)))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">mods_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> Modules&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mods_list</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.get_autocompletion_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.get_autocompletion_dict" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="s2">&quot;auto~~~~~~&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.get_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.get_function" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Kwargs for _get_function
    metadata:: return the registered function dictionary
        stateless: (function_data, None), 0
        stateful: (function_data, higher_order_function), 0
    state::boolean
        specification::str default app</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs for _get_function</span>
<span class="sd">        metadata:: return the registered function dictionary</span>
<span class="sd">            stateless: (function_data, None), 0</span>
<span class="sd">            stateful: (function_data, higher_order_function), 0</span>
<span class="sd">        state::boolean</span>
<span class="sd">            specification::str default app</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">as_str</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.get_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.get_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModuleType</span> <span class="ow">or</span> <span class="n">MainToolType</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mod</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">Result</span><span class="p">)</span> <span class="ow">and</span> <span class="n">mod</span><span class="o">.</span><span class="n">is_error</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> pleas install the module&quot;</span><span class="p">)</span>
    <span class="c1"># private = self.functions[name].get(f&quot;{spec}_private&quot;)</span>
    <span class="c1"># if private is not None:</span>
    <span class="c1">#     if private and spec != &#39;app&#39;:</span>
    <span class="c1">#         raise ValueError(&quot;Module is private&quot;)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; is not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_mod</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.get_username" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_input</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.get_username" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_input</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">get_file_handler</span><span class="p">(</span><span class="s2">&quot;ac_user:::&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">get_input</span> <span class="ow">and</span> <span class="n">user_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user_name</span> <span class="o">!=</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
        <span class="n">user_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Input your username</span><span class="se">\n</span><span class="s2">be sure to make no typos: &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;ac_user:::&quot;</span><span class="p">,</span> <span class="n">user_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">user_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">return</span> <span class="n">user_name</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.hide_console" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hide_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.hide_console" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">hide_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.inplace_load_instance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inplace_load_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;toolboxv2.mods.&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mfo</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.inplace_load_instance" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">inplace_load_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mfo</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dev_modi</span> <span class="ow">and</span> <span class="n">loc</span> <span class="o">==</span> <span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">:</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="s2">&quot;toolboxv2.mods_dev.&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">mod_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloading mod from : </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_mod</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">mfo</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">modular_file_object</span>
        <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> not found is type sensitive </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> not found is type sensitive </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="o">.</span><span class="n">sysPrint</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">python_module_import_classifier</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">loc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod_name</span><span class="si">}</span><span class="s2"> is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">):</span>
        <span class="n">tools_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">tools_class</span> <span class="o">=</span> <span class="n">modular_file_object</span>
            <span class="n">modular_file_object</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tools_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">modular_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">modular_file_object</span>
    <span class="n">app_instance_type</span> <span class="o">=</span> <span class="s2">&quot;file/application&quot;</span>

    <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">modular_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">modular_file_object</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">modular_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">modular_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">modular_file_object</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance loaded </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modular_file_object</span>

    <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tools_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_initialized_module</span><span class="p">(</span><span class="n">tools_class</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
        <span class="n">modular_id</span> <span class="o">=</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">name</span>
        <span class="n">app_instance_type</span> <span class="o">=</span> <span class="s2">&quot;functions/class&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>
    <span class="c1"># if private:</span>
    <span class="c1">#     self.functions[modular_id][f&quot;{spec}_private&quot;] = private</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">save</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">instance</span> <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">tools_class</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_instance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">app_instance_type</span><span class="p">,</span> <span class="n">tools_class</span><span class="o">=</span><span class="n">tools_class</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.load_all_mods_in_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_all_mods_in_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s1">&#39;mods&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.load_all_mods_in_file" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">load_all_mods_in_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="s2">&quot;mods&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LOADING ALL MODS FROM FOLDER : </span><span class="si">{</span><span class="n">working_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="c1"># Get the list of all modules</span>
    <span class="n">module_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_mods</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>
    <span class="n">open_modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">start_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">open_modules</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">om</span> <span class="ow">in</span> <span class="n">open_modules</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">om</span> <span class="ow">in</span> <span class="n">module_list</span><span class="p">:</span>
            <span class="n">module_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">om</span><span class="p">)</span>

    <span class="n">tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># if &#39;isaa&#39; in module_list:</span>
    <span class="c1">#     threading.Thread(target=self.save_load, args=(&quot;isaa&quot;, &#39;app&#39;), daemon=True).start()</span>
    <span class="c1">#     module_list.remove(&#39;isaa&#39;)</span>

    <span class="n">_</span> <span class="o">=</span> <span class="p">{</span><span class="n">tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">)))</span> <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">module_list</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">t</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened :&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An Error occurred while opening all modules error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="n">opened</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">start_len</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">opened</span><span class="si">}</span><span class="s2"> modules in </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">opened</span><span class="si">}</span><span class="s2"> modules in </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.load_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">mlm</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.load_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mlm</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="n">action_list_helper</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I (inplace load dill on error python)&#39;</span><span class="p">,</span>
                          <span class="c1"># &#39;C (coppy py file to runtime dir)&#39;,</span>
                          <span class="c1"># &#39;S (save py file to dill)&#39;,</span>
                          <span class="c1"># &#39;CS (coppy and save py file)&#39;,</span>
                          <span class="c1"># &#39;D (development mode, inplace load py file)&#39;</span>
                          <span class="p">]</span>
    <span class="n">action_list</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;I&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span>
                   <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copy_load</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                   <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mlm</span> <span class="ow">in</span> <span class="n">action_list</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">action_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mlm</span><span class="p">)()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;config mlm must be </span><span class="si">{</span><span class="s1">&#39; or &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">action_list_helper</span><span class="p">)</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">mlm</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;config mlm must be </span><span class="si">{</span><span class="s1">&#39; or &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">action_list_helper</span><span class="p">)</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">mlm</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;, with critical error :</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Loading Module &#39;</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="s2">&quot;info&#39;s in logs.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.mod_online" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mod_online</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.mod_online" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mod_online</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">installed</span> <span class="ow">and</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_load</span><span class="p">(</span><span class="n">mod_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mod_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.print" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.print" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># self.logger.info(f&quot;Output : {text}&quot;)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprint</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System$</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.reload_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reload_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">is_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;toolboxv2.mods.&#39;</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.reload_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reload_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">is_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_file</span><span class="p">:</span>
        <span class="n">mods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_mods</span><span class="p">(</span><span class="s2">&quot;./mods/&quot;</span> <span class="o">+</span> <span class="n">mod_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">mods</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">reload</span><span class="p">(</span><span class="n">import_module</span><span class="p">(</span><span class="n">loc</span> <span class="o">+</span> <span class="n">mod_name</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">mod</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloaded </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not load </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inplace_load_instance</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">,</span> <span class="n">mfo</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]))</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.remove_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.remove_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">mod_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mod not active </span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">on_exit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
        <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/BC&quot;</span><span class="p">):</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;on_exit&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="o">.</span><span class="n">on_exit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">delete</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">on_exit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">helper</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_exit</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On exit </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">f_</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">exit_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f_</span><span class="p">)</span>
                    <span class="n">o</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On Exit result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;closing function not found&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">mod_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_exit error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_exit</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">helper</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.run_a_from_sync" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_a_from_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.run_a_from_sync" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>run a async fuction</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_a_from_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.run_any" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.run_any" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">get_results</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="c1"># if self.debug:</span>
    <span class="c1">#     self.logger.info(f&#39;Called from: {getouterframes(currentframe(), 2)}&#39;)</span>

    <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
    <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backwords_compability_variabel_string_holder</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">backwords_compability_variabel_string_holder</span><span class="p">)</span>

    <span class="n">res</span><span class="p">:</span> <span class="n">Result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span>
                                    <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                    <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">,</span>
                                    <span class="n">args_</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">as_result</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="n">res</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">show_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">get_results</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Result</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">res</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.run_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">,</span> <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.run_function" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span>
                 <span class="n">tb_run_function_with_state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">tb_run_with_specification</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span>
                 <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>

    <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
    <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown function type&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="n">modular_name</span><span class="p">,</span> <span class="n">installed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>

    <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                  <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received fuction : </span><span class="si">{</span><span class="n">mod_function_name</span><span class="si">}</span><span class="s2">, with execode: </span><span class="si">{</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_mod</span><span class="p">(</span><span class="n">modular_name</span><span class="p">)</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tb_run_function_with_state</span><span class="p">,</span>
                                                      <span class="n">metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">tb_run_with_specification</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function Not Found&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Result</span><span class="o">.</span><span class="n">default_user_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                          <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                          <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function is not decorated&quot;</span><span class="p">)</span><span class="o">.</span>
                <span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot; has no state (instance)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">error_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">exec_code</span><span class="o">=</span><span class="n">error_code</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Internal error&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">.&quot;</span>
                                                  <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tb_run_function_with_state</span><span class="p">:</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">function_data</span>
        <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">function_data</span><span class="p">,</span> <span class="n">function</span> <span class="o">=</span> <span class="n">function_data</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">function</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="n">default_internal_error</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interface_type</span><span class="p">,</span>
                                             <span class="n">exec_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>
                                             <span class="n">info</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;function not found function&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_origin</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profiling function&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fuction </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2"> is Async use a_run_any&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuction_runner</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">function_data</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.run_http" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_http</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.run_http" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>run a function remote via http / https</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_http</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="p">:</span> <span class="n">Enum</span> <span class="ow">or</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">args_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">kwargs_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
                   <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">kwargs_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_</span>
    <span class="k">if</span> <span class="n">args_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args_</span>

    <span class="n">modular_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
    <span class="n">function_name</span> <span class="o">=</span> <span class="n">function_name</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mod_function_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">function_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_function_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod_function_name</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
        <span class="n">modular_name</span><span class="p">,</span> <span class="n">function_name</span> <span class="o">=</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">NAME</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">mod_function_name</span><span class="o">.</span><span class="n">value</span>


    <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/api/</span><span class="si">{</span><span class="n">modular_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">function_name</span><span class="si">}{</span><span class="s1">&#39;?&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">args_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">args_</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                                 <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.run_runnable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.run_runnable" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">..runabel</span> <span class="kn">import</span> <span class="n">runnable_dict</span> <span class="k">as</span> <span class="n">runnable_dict_func</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">,</span> <span class="o">**</span><span class="n">runnable_dict_func</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">]):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">](</span><span class="n">get_app</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="s2">&quot;runner&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span><span class="p">[</span><span class="n">name</span><span class="p">](</span><span class="n">get_app</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="s2">&quot;runner&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_sto</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_autocompletion_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_autocompletion_dict" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_autocompletion_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">autocompletion_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">module</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">function_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span>
                                   <span class="n">function_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="p">[])}</span>  <span class="c1"># TODO get default from sig</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">autocompletion_dict</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="s2">&quot;auto~~~~~~&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">autocompletion_dict</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_exit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_exit" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;save exiting saving data to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> states of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config_fh</span><span class="o">.</span><span class="n">add_to_save_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_initialized_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_initialized_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tools_class</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_initialized_module" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_initialized_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tools_class</span><span class="p">,</span> <span class="n">spec</span><span class="p">):</span>
    <span class="n">tools_class</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>
    <span class="n">live_tools_class</span> <span class="o">=</span> <span class="n">tools_class</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">live_tools_class</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_instance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s1">&#39;file/application&#39;</span><span class="p">,</span> <span class="n">tools_class</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_instance" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">modular_id</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;file/application&quot;</span><span class="p">,</span> <span class="n">tools_class</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">modular_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="ow">and</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;ERROR OVERRIDE&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module already known </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">on_start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;on_start&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">on_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">on_start</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">f_</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_function</span><span class="p">((</span><span class="n">modular_id</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running On start </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_start</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="n">f_</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function On start result: </span><span class="si">{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;starting function not found </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                        <span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;modular:</span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2"> on_start error </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">on_start</span><span class="p">)</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
                <span class="k">finally</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">elif</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">modular_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tools_class</span><span class="p">,</span> <span class="s1">&#39;tools&#39;</span><span class="p">):</span>
                <span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">get_version</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">tools_class</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">function_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">t_function_name</span> <span class="o">=</span> <span class="n">function_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">t_function_name</span> <span class="o">!=</span> <span class="s2">&quot;all&quot;</span> <span class="ow">and</span> <span class="n">t_function_name</span> <span class="o">!=</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">mod_name</span><span class="o">=</span><span class="n">modular_id</span><span class="p">)(</span><span class="n">tools_class</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">function_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;/BC&quot;</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting Module </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2"> compatibility failed with : </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">modular_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="ow">and</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">modular_id</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">_instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_type</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Modular </span><span class="si">{</span><span class="n">modular_id</span><span class="si">}</span><span class="s2"> is not a valid mod&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">instance</span> <span class="k">if</span> <span class="n">tools_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">tools_class</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_load" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_load" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Save load module </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">modname</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;no filename specified&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_mod</span><span class="p">(</span><span class="n">modname</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_rains</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.save_registry_as_enums" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_registry_as_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.save_registry_as_enums" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_registry_as_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="c1"># Ordner erstellen, falls nicht vorhanden</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

    <span class="c1"># Dateipfad vorbereiten</span>
    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Enum-Klassen als Strings generieren</span>
    <span class="n">enum_classes</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;&quot;&quot;&quot;Automatic generated by ToolBox v = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s1">&quot;&quot;&quot;&#39;</span>
                    <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">from enum import Enum</span><span class="se">\n</span><span class="s1">from dataclasses import dataclass&#39;</span>
                    <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n\n</span><span class="s1">&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">module</span><span class="p">,</span> <span class="n">functions</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;APP_INSTANCE&quot;</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="n">module</span>
        <span class="n">enum_members</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; str = &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39;  &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;# Input: (</span><span class="si">{</span><span class="n">fuction_data</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fuction_data</span><span class="p">,</span><span class="w"> </span><span class="nb">dict</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">),&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; Output: </span><span class="si">{</span><span class="n">fuction_data</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">return_annotation</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fuction_data</span><span class="p">,</span><span class="w"> </span><span class="nb">dict</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;None&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">fuction_data</span> <span class="ow">in</span> <span class="n">functions</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="n">enum_class</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;@dataclass</span><span class="se">\n</span><span class="s1">class </span><span class="si">{</span><span class="n">class_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">(Enum):&#39;</span>
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    NAME = &#39;</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">    </span><span class="si">{</span><span class="n">enum_members</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">enum_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enum_class</span><span class="p">)</span>

    <span class="c1"># Enums in die Datei schreiben</span>
    <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">enum_classes</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid Enums Loosing content pleas delete it ur self in the (utils/system/all_functions_enums.py) or add mor new stuff :}&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Enums gespeichert in </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.set_logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.set_logger" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-test&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                 <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Test Mode&quot;</span>
    <span class="k">elif</span> <span class="s2">&quot;live&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-live&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                 <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Live Mode&quot;</span>
        <span class="c1"># setup_logging(logging.WARNING, name=&quot;toolbox-live&quot;, is_online=True</span>
        <span class="c1">#              , online_level=logging.WARNING).info(&quot;Logger initialized&quot;)</span>
    <span class="k">elif</span> <span class="s2">&quot;debug&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-debug&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;toolbox-debug&quot;</span><span class="p">,</span> <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                 <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in debug Mode&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;toolbox-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">-debug&quot;</span><span class="p">,</span>
                                                 <span class="n">interminal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                 <span class="n">file_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in args debug Mode&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span> <span class="o">=</span> <span class="n">setup_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;toolbox-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">logger_info_str</span> <span class="o">=</span> <span class="s2">&quot;in Default&quot;</span>

    <span class="k">return</span> <span class="n">logger_info_str</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">logging_filename</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.set_runnable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.set_runnable" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_runnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runnable</span> <span class="o">=</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.show_console" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#toolboxv2.utils.toolbox.App.show_console" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">show_console</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;proxi attr&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.sprint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.sprint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># self.logger.info(f&quot;Output : {text}&quot;)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">CYAN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System$</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">kwargs</span> <span class="o">==</span> <span class="p">{}</span> <span class="ow">and</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">stram_print</span><span class="p">(</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.tb" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mod_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">helper</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">restrict_in_virtual_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exit_f</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">test_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">memory_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">file_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">request_as_kwarg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">memory_cache_max_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">memory_cache_ttl</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">samples</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pre_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">post_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_methods</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.tb" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>A decorator for registering and configuring functions within a module.</p>
<p>This decorator is used to wrap functions with additional functionality such as caching, API conversion, and lifecycle management (initialization and exit). It also handles the registration of the function in the module's function registry.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to register the function under. Defaults to the function's own name.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mod_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the module the function belongs to.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>helper</code></td>
        <td><code>str</code></td>
        <td><p>A helper string providing additional information about the function.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>version</code></td>
        <td><code>str or None</code></td>
        <td><p>The version of the function or module.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>test</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to indicate if the function is for testing purposes.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>restrict_in_virtual_mode</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to restrict the function in virtual mode.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>api</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to indicate if the function is part of an API.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>initial</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to indicate if the function should be executed at initialization.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>exit_f</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to indicate if the function should be executed at exit.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>test_only</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to indicate if the function should only be used for testing.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>memory_cache</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to enable memory caching for the function.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>request_as_kwarg</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to get request if the fuction is calld from api.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>file_cache</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to enable file caching for the function.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>row</code></td>
        <td><code>bool</code></td>
        <td><p>rather to auto wrap the result in Result type default False means no row data aka result type</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>state</code></td>
        <td><code>bool or None</code></td>
        <td><p>Flag to indicate if the function maintains state.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>level</code></td>
        <td><code>int</code></td>
        <td><p>The level of the function, used for prioritization or categorization.</p></td>
        <td><code>-1</code></td>
      </tr>
      <tr>
        <td><code>memory_cache_max_size</code></td>
        <td><code>int</code></td>
        <td><p>Maximum size of the memory cache.</p></td>
        <td><code>100</code></td>
      </tr>
      <tr>
        <td><code>memory_cache_ttl</code></td>
        <td><code>int</code></td>
        <td><p>Time-to-live for the memory cache entries.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>samples</code></td>
        <td><code>list or dict or None</code></td>
        <td><p>Samples or examples of function usage.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>interface</code></td>
        <td><code>str</code></td>
        <td><p>The interface type for the function.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pre_compute</code></td>
        <td><code>callable</code></td>
        <td><p>A function to be called before the main function.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>post_compute</code></td>
        <td><code>callable</code></td>
        <td><p>A function to be called after the main function.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>api_methods</code></td>
        <td><code>list[str]</code></td>
        <td><p>default ["AUTO"] (GET if not params, POST if params) , GET, POST, PUT or DELETE.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>function</code></td>
      <td><p>The decorated function with additional processing and registration capabilities.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">tb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
       <span class="n">mod_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="n">helper</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
       <span class="n">test</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
       <span class="n">restrict_in_virtual_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">api</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">initial</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">exit_f</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">test_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">memory_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">file_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">request_as_kwarg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">row</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
       <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
       <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
       <span class="n">memory_cache_max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
       <span class="n">memory_cache_ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
       <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">dict</span> <span class="ow">or</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
       <span class="n">interface</span><span class="p">:</span> <span class="n">ToolBoxInterfaces</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
       <span class="n">pre_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
       <span class="n">post_compute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
       <span class="n">api_methods</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
       <span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A decorator for registering and configuring functions within a module.</span>

<span class="sd">This decorator is used to wrap functions with additional functionality such as caching, API conversion, and lifecycle management (initialization and exit). It also handles the registration of the function in the module&#39;s function registry.</span>

<span class="sd">Args:</span>
<span class="sd">    name (str, optional): The name to register the function under. Defaults to the function&#39;s own name.</span>
<span class="sd">    mod_name (str, optional): The name of the module the function belongs to.</span>
<span class="sd">    helper (str, optional): A helper string providing additional information about the function.</span>
<span class="sd">    version (str or None, optional): The version of the function or module.</span>
<span class="sd">    test (bool, optional): Flag to indicate if the function is for testing purposes.</span>
<span class="sd">    restrict_in_virtual_mode (bool, optional): Flag to restrict the function in virtual mode.</span>
<span class="sd">    api (bool, optional): Flag to indicate if the function is part of an API.</span>
<span class="sd">    initial (bool, optional): Flag to indicate if the function should be executed at initialization.</span>
<span class="sd">    exit_f (bool, optional): Flag to indicate if the function should be executed at exit.</span>
<span class="sd">    test_only (bool, optional): Flag to indicate if the function should only be used for testing.</span>
<span class="sd">    memory_cache (bool, optional): Flag to enable memory caching for the function.</span>
<span class="sd">    request_as_kwarg (bool, optional): Flag to get request if the fuction is calld from api.</span>
<span class="sd">    file_cache (bool, optional): Flag to enable file caching for the function.</span>
<span class="sd">    row (bool, optional): rather to auto wrap the result in Result type default False means no row data aka result type</span>
<span class="sd">    state (bool or None, optional): Flag to indicate if the function maintains state.</span>
<span class="sd">    level (int, optional): The level of the function, used for prioritization or categorization.</span>
<span class="sd">    memory_cache_max_size (int, optional): Maximum size of the memory cache.</span>
<span class="sd">    memory_cache_ttl (int, optional): Time-to-live for the memory cache entries.</span>
<span class="sd">    samples (list or dict or None, optional): Samples or examples of function usage.</span>
<span class="sd">    interface (str, optional): The interface type for the function.</span>
<span class="sd">    pre_compute (callable, optional): A function to be called before the main function.</span>
<span class="sd">    post_compute (callable, optional): A function to be called after the main function.</span>
<span class="sd">    api_methods (list[str], optional): default [&quot;AUTO&quot;] (GET if not params, POST if params) , GET, POST, PUT or DELETE.</span>

<span class="sd">Returns:</span>
<span class="sd">    function: The decorated function with additional processing and registration capabilities.</span>
<span class="sd">&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">interface</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">interface</span> <span class="o">=</span> <span class="s2">&quot;tb&quot;</span>
    <span class="k">if</span> <span class="n">test_only</span> <span class="ow">and</span> <span class="s1">&#39;test&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">args</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_decorator</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span>
                                  <span class="n">name</span><span class="p">,</span>
                                  <span class="n">mod_name</span><span class="p">,</span>
                                  <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
                                  <span class="n">restrict_in_virtual_mode</span><span class="o">=</span><span class="n">restrict_in_virtual_mode</span><span class="p">,</span>
                                  <span class="n">helper</span><span class="o">=</span><span class="n">helper</span><span class="p">,</span>
                                  <span class="n">api</span><span class="o">=</span><span class="n">api</span><span class="p">,</span>
                                  <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
                                  <span class="n">initial</span><span class="o">=</span><span class="n">initial</span><span class="p">,</span>
                                  <span class="n">exit_f</span><span class="o">=</span><span class="n">exit_f</span><span class="p">,</span>
                                  <span class="n">test</span><span class="o">=</span><span class="n">test</span><span class="p">,</span>
                                  <span class="n">samples</span><span class="o">=</span><span class="n">samples</span><span class="p">,</span>
                                  <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
                                  <span class="n">pre_compute</span><span class="o">=</span><span class="n">pre_compute</span><span class="p">,</span>
                                  <span class="n">post_compute</span><span class="o">=</span><span class="n">post_compute</span><span class="p">,</span>
                                  <span class="n">memory_cache</span><span class="o">=</span><span class="n">memory_cache</span><span class="p">,</span>
                                  <span class="n">file_cache</span><span class="o">=</span><span class="n">file_cache</span><span class="p">,</span>
                                  <span class="n">request_as_kwarg</span><span class="o">=</span><span class="n">request_as_kwarg</span><span class="p">,</span>
                                  <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span>
                                  <span class="n">api_methods</span><span class="o">=</span><span class="n">api_methods</span><span class="p">,</span>
                                  <span class="n">memory_cache_max_size</span><span class="o">=</span><span class="n">memory_cache_max_size</span><span class="p">,</span>
                                  <span class="n">memory_cache_ttl</span><span class="o">=</span><span class="n">memory_cache_ttl</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.toolbox.App.watch_mod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">watch_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;toolboxv2.mods.&#39;</span><span class="p">,</span> <span class="n">use_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">path_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.toolbox.App.watch_mod" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>proxi attr</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/toolbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">watch_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;toolboxv2.mods.&quot;</span><span class="p">,</span> <span class="n">use_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">path_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">path_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">path_name</span> <span class="o">=</span> <span class="n">mod_name</span>
    <span class="n">is_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_dir</span> <span class="o">+</span> <span class="s1">&#39;/mods/&#39;</span> <span class="o">+</span> <span class="n">path_name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">watchfiles</span>
    <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;mods/</span><span class="si">{</span><span class="n">path_name</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;.py&#39;</span> <span class="k">if</span> <span class="n">is_file</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Watching Path: </span><span class="si">{</span><span class="n">paths</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">watchfiles</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">changes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reload_mod</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">is_file</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_thread</span><span class="p">:</span>
        <span class="n">helper</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">helper</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">

<a id="toolboxv2.utils.system.main_tool.MainTool"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/system/main_tool.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MainTool</span><span class="p">:</span>
    <span class="n">toolID</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># app = None</span>
    <span class="n">interface</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">spec</span> <span class="o">=</span> <span class="s2">&quot;app&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;Bold&quot;</span>
    <span class="n">stuf</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Standard constructor used for arguments pass</span>
<span class="sd">        Do not override. Use __ainit__ instead</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__storedargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_initialized</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">__ainit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;v&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;logs&quot;</span><span class="p">,</span> <span class="n">get_logger</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;WHITE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">todo</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A toolbox mod&quot;</span> <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">MainTool</span><span class="o">.</span><span class="n">interface</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">MainTool</span><span class="o">.</span><span class="n">interface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">interface_type</span>
        <span class="c1"># Result.default(self.app.interface)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">todo</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">todo</span><span class="p">):</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">todo</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">todo</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Error loading mod </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> no load require&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TOOL : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">spec</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> online&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">get_app</span><span class="p">(</span>
            <span class="n">from_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">spec</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toolID</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">toolID</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MainTool</span><span class="o">.</span><span class="n">toolID</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">MainTool</span><span class="o">.</span><span class="n">interface</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@app</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">PermissionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You cannot set the App Instance! </span><span class="si">{</span><span class="n">v</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">return_result</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">ToolBoxError</span> <span class="o">=</span> <span class="n">ToolBoxError</span><span class="o">.</span><span class="n">none</span><span class="p">,</span>
                      <span class="n">exec_code</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                      <span class="n">help_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                      <span class="n">data_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">data_to</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">data_to</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data_to</span> <span class="o">=</span> <span class="n">MainTool</span><span class="o">.</span><span class="n">interface</span> <span class="k">if</span> <span class="n">MainTool</span><span class="o">.</span><span class="n">interface</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ToolBoxInterfaces</span><span class="o">.</span><span class="n">cli</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">data_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data_info</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">return</span> <span class="n">Result</span><span class="p">(</span>
            <span class="n">error</span><span class="p">,</span>
            <span class="n">ToolBoxResult</span><span class="p">(</span><span class="n">data_info</span><span class="o">=</span><span class="n">data_info</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">data_to</span><span class="o">=</span><span class="n">data_to</span><span class="p">),</span>
            <span class="n">ToolBoxInfo</span><span class="p">(</span><span class="n">exec_code</span><span class="o">=</span><span class="n">exec_code</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">help_text</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stuf</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">style_dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">style_dic</span><span class="p">[</span><span class="s2">&quot;END&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_str_to_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid command must be key value&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">webInstall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_instance</span><span class="p">,</span> <span class="n">construct_render</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;Returns a web installer for the given user instance and construct render template&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;Returns the version&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">a_run_any</span><span class="p">(</span><span class="n">CLOUDM_AUTHMANAGER</span><span class="o">.</span><span class="n">GET_USER_BY_NAME</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">get_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">__initobj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Crutch used for __await__ after spawning&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_initialized</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_initialized</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># pass the parameters to __ainit__ that passed to __init__</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ainit__</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">__storedargs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">__storedargs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__await__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__initobj</span><span class="p">()</span><span class="o">.</span><span class="fm">__await__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.system.main_tool.MainTool.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#toolboxv2.utils.system.main_tool.MainTool.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Standard constructor used for arguments pass
Do not override. Use <strong>ainit</strong> instead</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/system/main_tool.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Standard constructor used for arguments pass</span>
<span class="sd">    Do not override. Use __ainit__ instead</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__storedargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.system.main_tool.MainTool.get_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.system.main_tool.MainTool.get_version" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>"Returns the version</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/system/main_tool.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;Returns the version&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h2 id="toolboxv2.utils.system.main_tool.MainTool.webInstall" class="doc doc-heading">
<code class="highlight language-python"><span class="n">webInstall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_instance</span><span class="p">,</span> <span class="n">construct_render</span><span class="p">)</span></code>


<a href="#toolboxv2.utils.system.main_tool.MainTool.webInstall" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>"Returns a web installer for the given user instance and construct render template</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/system/main_tool.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">webInstall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_instance</span><span class="p">,</span> <span class="n">construct_render</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;Returns a web installer for the given user instance and construct render template&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">

<a id="toolboxv2.utils.system.file_handler.FileHandler"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/system/file_handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileHandler</span><span class="p">(</span><span class="n">Code</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mainTool&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">defaults</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">defaults</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">keys</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">assert</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.config&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.data&quot;</span><span class="p">),</span> \
            <span class="sa">f</span><span class="s2">&quot;filename must end with .config or .data </span><span class="si">{</span><span class="n">filename</span><span class="si">=}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">/&quot;</span>
                                         <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">)</span>
        <span class="c1"># self.load_file_handler()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_defaults_keys_file_handler</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">defaults</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_open_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">rdu</span><span class="p">):</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">Bold</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opening file in mode : </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;.config/mainTool&quot;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">RED</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pleas create this file to prosed : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="si">}</span><span class="s2">&quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> FileNotFoundError cannot&quot;</span>
                                <span class="sa">f</span><span class="s2">&quot; be Created&quot;</span><span class="p">)</span>
                <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Try Creating File: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREEN</span><span class="p">(</span><span class="s2">&quot;File created successfully&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">rdu</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="ow">and</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span> <span class="nf">open_s_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open_file_handler</span><span class="p">(</span><span class="s1">&#39;w+&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_s_file_handler</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">open_l_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open_file_handler</span><span class="p">(</span><span class="s1">&#39;r+&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_l_file_handler</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">save_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;init Saving (S) </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="p">:</span>
            <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;WARNING file is already open (S): </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">open_s_file_handler</span><span class="p">()</span>

        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Elements to save : (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;closing file : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">add_to_save_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span> \
                <span class="n">warning</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                    <span class="s1">&#39;WARNING: key length is not 10 characters&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode_code</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">remove_key_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;Pka7237327&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cant remove Root Key&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">load_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">Style</span><span class="o">.</span><span class="n">BLUE</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;loading </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="p">:</span>
            <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;WARNING file is already open (L) </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">open_l_file_handler</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_code</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="ow">and</span> <span class="ne">Exception</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">heda</span> <span class="o">=</span> <span class="n">line</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">[</span><span class="n">heda</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>
                <span class="n">enc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_code</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">heda</span><span class="p">]</span> <span class="o">=</span> <span class="n">enc</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_storage</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">ITALIC</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREY</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collecting data from storage key : </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">objects</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_max_loaded_index_</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;No data  </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">  ; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ValueError Loading </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2"> ; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="n">Style</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Possible SyntaxError Loading </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2"> ; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1"># print(Style.YELLOW(f&quot;Data frc : {obj} ; {objects[1]}&quot;))</span>
                <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">[</span><span class="n">obj</span><span class="p">])</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning Default for </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">r</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no data found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">default</span>

    <span class="k">def</span> <span class="nf">set_defaults_keys_file_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">defaults</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">list_keys</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">keys</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="n">df_keys</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">list_keys</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_key_mapper</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span> <span class="o">=</span> <span class="n">key</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">df_keys</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">defaults</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_save</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode_code</span><span class="p">(</span><span class="n">defaults</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_load</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>

    <span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="p">)</span>
        <span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">GREEN</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File deleted </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_file_prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">file_handler_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">





















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">

<a id="toolboxv2.utils.extras.Style.Style"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>toolboxv2/utils/extras/Style.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Style</span><span class="p">:</span>
    <span class="n">_END</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[0m&#39;</span>
    <span class="n">_BLACK</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[30m&#39;</span>
    <span class="n">_RED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[31m&#39;</span>
    <span class="n">_GREEN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[32m&#39;</span>
    <span class="n">_YELLOW</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[33m&#39;</span>
    <span class="n">_BLUE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[34m&#39;</span>
    <span class="n">_MAGENTA</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[35m&#39;</span>
    <span class="n">_CYAN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[36m&#39;</span>
    <span class="n">_WHITE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[37m&#39;</span>

    <span class="n">_Bold</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[1m&#39;</span>
    <span class="n">_ITALIC</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[3m&#39;</span>
    <span class="n">_Underline</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[4m&#39;</span>
    <span class="n">_BLINK</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[5m&#39;</span>
    <span class="n">_BLINK2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[6m&#39;</span>
    <span class="n">_Reversed</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[7m&#39;</span>

    <span class="n">_BLACKBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[40m&#39;</span>
    <span class="n">_REDBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[41m&#39;</span>
    <span class="n">_GREENBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[42m&#39;</span>
    <span class="n">_YELLOWBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[43m&#39;</span>
    <span class="n">_BLUEBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[44m&#39;</span>
    <span class="n">_VIOLETBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[45m&#39;</span>
    <span class="n">_BEIGEBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[46m&#39;</span>
    <span class="n">_WHITEBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[47m&#39;</span>

    <span class="n">_GREY</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[90m&#39;</span>
    <span class="n">_RED2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[91m&#39;</span>
    <span class="n">_GREEN2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[92m&#39;</span>
    <span class="n">_YELLOW2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[93m&#39;</span>
    <span class="n">_BLUE2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[94m&#39;</span>
    <span class="n">_VIOLET2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[95m&#39;</span>
    <span class="n">_BEIGE2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[96m&#39;</span>
    <span class="n">_WHITE2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[97m&#39;</span>

    <span class="n">_GREYBG</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[100m&#39;</span>
    <span class="n">_REDBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[101m&#39;</span>
    <span class="n">_GREENBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[102m&#39;</span>
    <span class="n">_YELLOWBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[103m&#39;</span>
    <span class="n">_BLUEBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[104m&#39;</span>
    <span class="n">_VIOLETBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[105m&#39;</span>
    <span class="n">_BEIGEBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[106m&#39;</span>
    <span class="n">_WHITEBG2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\33</span><span class="s1">[107m&#39;</span>

    <span class="n">style_dic</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;END&quot;</span><span class="p">:</span> <span class="n">_END</span><span class="p">,</span>
        <span class="s2">&quot;BLACK&quot;</span><span class="p">:</span> <span class="n">_BLACK</span><span class="p">,</span>
        <span class="s2">&quot;RED&quot;</span><span class="p">:</span> <span class="n">_RED</span><span class="p">,</span>
        <span class="s2">&quot;GREEN&quot;</span><span class="p">:</span> <span class="n">_GREEN</span><span class="p">,</span>
        <span class="s2">&quot;YELLOW&quot;</span><span class="p">:</span> <span class="n">_YELLOW</span><span class="p">,</span>
        <span class="s2">&quot;BLUE&quot;</span><span class="p">:</span> <span class="n">_BLUE</span><span class="p">,</span>
        <span class="s2">&quot;MAGENTA&quot;</span><span class="p">:</span> <span class="n">_MAGENTA</span><span class="p">,</span>
        <span class="s2">&quot;CYAN&quot;</span><span class="p">:</span> <span class="n">_CYAN</span><span class="p">,</span>
        <span class="s2">&quot;WHITE&quot;</span><span class="p">:</span> <span class="n">_WHITE</span><span class="p">,</span>
        <span class="s2">&quot;Bold&quot;</span><span class="p">:</span> <span class="n">_Bold</span><span class="p">,</span>
        <span class="s2">&quot;Underline&quot;</span><span class="p">:</span> <span class="n">_Underline</span><span class="p">,</span>
        <span class="s2">&quot;Reversed&quot;</span><span class="p">:</span> <span class="n">_Reversed</span><span class="p">,</span>

        <span class="s2">&quot;ITALIC&quot;</span><span class="p">:</span> <span class="n">_ITALIC</span><span class="p">,</span>
        <span class="s2">&quot;BLINK&quot;</span><span class="p">:</span> <span class="n">_BLINK</span><span class="p">,</span>
        <span class="s2">&quot;BLINK2&quot;</span><span class="p">:</span> <span class="n">_BLINK2</span><span class="p">,</span>
        <span class="s2">&quot;BLACKBG&quot;</span><span class="p">:</span> <span class="n">_BLACKBG</span><span class="p">,</span>
        <span class="s2">&quot;REDBG&quot;</span><span class="p">:</span> <span class="n">_REDBG</span><span class="p">,</span>
        <span class="s2">&quot;GREENBG&quot;</span><span class="p">:</span> <span class="n">_GREENBG</span><span class="p">,</span>
        <span class="s2">&quot;YELLOWBG&quot;</span><span class="p">:</span> <span class="n">_YELLOWBG</span><span class="p">,</span>
        <span class="s2">&quot;BLUEBG&quot;</span><span class="p">:</span> <span class="n">_BLUEBG</span><span class="p">,</span>
        <span class="s2">&quot;VIOLETBG&quot;</span><span class="p">:</span> <span class="n">_VIOLETBG</span><span class="p">,</span>
        <span class="s2">&quot;BEIGEBG&quot;</span><span class="p">:</span> <span class="n">_BEIGEBG</span><span class="p">,</span>
        <span class="s2">&quot;WHITEBG&quot;</span><span class="p">:</span> <span class="n">_WHITEBG</span><span class="p">,</span>
        <span class="s2">&quot;GREY&quot;</span><span class="p">:</span> <span class="n">_GREY</span><span class="p">,</span>
        <span class="s2">&quot;RED2&quot;</span><span class="p">:</span> <span class="n">_RED2</span><span class="p">,</span>
        <span class="s2">&quot;GREEN2&quot;</span><span class="p">:</span> <span class="n">_GREEN2</span><span class="p">,</span>
        <span class="s2">&quot;YELLOW2&quot;</span><span class="p">:</span> <span class="n">_YELLOW2</span><span class="p">,</span>
        <span class="s2">&quot;BLUE2&quot;</span><span class="p">:</span> <span class="n">_BLUE2</span><span class="p">,</span>
        <span class="s2">&quot;VIOLET2&quot;</span><span class="p">:</span> <span class="n">_VIOLET2</span><span class="p">,</span>
        <span class="s2">&quot;BEIGE2&quot;</span><span class="p">:</span> <span class="n">_BEIGE2</span><span class="p">,</span>
        <span class="s2">&quot;WHITE2&quot;</span><span class="p">:</span> <span class="n">_WHITE2</span><span class="p">,</span>
        <span class="s2">&quot;GREYBG&quot;</span><span class="p">:</span> <span class="n">_GREYBG</span><span class="p">,</span>
        <span class="s2">&quot;REDBG2&quot;</span><span class="p">:</span> <span class="n">_REDBG2</span><span class="p">,</span>
        <span class="s2">&quot;GREENBG2&quot;</span><span class="p">:</span> <span class="n">_GREENBG2</span><span class="p">,</span>
        <span class="s2">&quot;YELLOWBG2&quot;</span><span class="p">:</span> <span class="n">_YELLOWBG2</span><span class="p">,</span>
        <span class="s2">&quot;BLUEBG2&quot;</span><span class="p">:</span> <span class="n">_BLUEBG2</span><span class="p">,</span>
        <span class="s2">&quot;VIOLETBG2&quot;</span><span class="p">:</span> <span class="n">_VIOLETBG2</span><span class="p">,</span>
        <span class="s2">&quot;BEIGEBG2&quot;</span><span class="p">:</span> <span class="n">_BEIGEBG2</span><span class="p">,</span>
        <span class="s2">&quot;WHITEBG2&quot;</span><span class="p">:</span> <span class="n">_WHITEBG2</span><span class="p">,</span>

    <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">END_</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">_END</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREEN_</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">_GREEN</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLUE</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLUE</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLACK</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLACK</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">RED</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_RED</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREEN</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREEN</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">YELLOW</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_YELLOW</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">MAGENTA</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_MAGENTA</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">CYAN</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_CYAN</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">WHITE</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_WHITE</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">Bold</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_Bold</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">Underline</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_Underline</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">Reversed</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_Reversed</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ITALIC</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_ITALIC</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLINK</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLINK</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLINK2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLINK2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLACKBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLACKBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">REDBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_REDBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREENBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREENBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">YELLOWBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_YELLOWBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLUEBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLUEBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">VIOLETBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_VIOLETBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BEIGEBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BEIGEBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">WHITEBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_WHITEBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREY</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREY</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">RED2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_RED2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREEN2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREEN2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">YELLOW2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_YELLOW2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLUE2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLUE2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">VIOLET2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_VIOLET2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BEIGE2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BEIGE2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">WHITE2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_WHITE2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREYBG</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREYBG</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">REDBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_REDBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">GREENBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_GREENBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">YELLOWBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_YELLOWBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BLUEBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BLUEBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">VIOLETBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_VIOLETBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">BEIGEBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_BEIGEBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">WHITEBG2</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">_WHITEBG2</span> <span class="o">+</span> <span class="n">text</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">_END</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">loading_al</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> /&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> -&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> </span><span class="se">\\</span><span class="s2">&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> |&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">END</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_END</span>

    <span class="k">def</span> <span class="nf">color_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dic</span><span class="p">[</span><span class="n">color</span><span class="p">]</span><span class="si">}</span><span class="s2">Effect</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Underline2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Underline</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























































  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">

<a id="toolboxv2.runabel"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">













  <div class="doc doc-object doc-module">



<h2 id="toolboxv2.runabel.chat" class="doc doc-heading">
        <code>chat</code>



<a href="#toolboxv2.runabel.chat" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">
















  <div class="doc doc-object doc-function">



<h3 id="toolboxv2.runabel.chat.init" class="doc doc-heading">
<code class="highlight language-python"><span class="n">init</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">pbar</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.runabel.chat.init" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initial Modules</p>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/runabel/chat.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">App</span><span class="p">,</span> <span class="n">pbar</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initial Modules&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">app</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="s2">&quot;CloudM&quot;</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">init_module</span><span class="p">(</span><span class="s2">&quot;CloudM&quot;</span><span class="p">)</span>
    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">app</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="s2">&quot;SocketManager&quot;</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">init_module</span><span class="p">(</span><span class="s2">&quot;SocketManager&quot;</span><span class="p">)</span>
    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">app</span><span class="o">.</span><span class="n">mod_online</span><span class="p">(</span><span class="s2">&quot;EventManager&quot;</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">init_module</span><span class="p">(</span><span class="s2">&quot;EventManager&quot;</span><span class="p">)</span>
    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c1"># try:</span>
    <span class="c1">#     if not app.mod_online(&quot;audio&quot;):</span>
    <span class="c1">#         app.load_mod(&quot;audio&quot;)</span>
    <span class="c1">#     pbar.write(&quot;audio Online&quot;)</span>
    <span class="c1"># except ImportError and RuntimeError as e:</span>
    <span class="c1">#     app.print(Style.YELLOW(f&quot;Error importing audio module no voice active&quot;))</span>
    <span class="c1">#     pbar.write(&quot;audio Offline&quot;)</span>
    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h2 id="toolboxv2.runabel.demon" class="doc doc-heading">
        <code>demon</code>



<a href="#toolboxv2.runabel.demon" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h3 id="toolboxv2.runabel.demon.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">programmabel_interface</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_server</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

<a href="#toolboxv2.runabel.demon.run" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The daemon runner is responsible for running a lightweight toolbox instance in the background
The name of the daemon instance is also the communication bridge.</p>
<p>workflow :</p>
<p>run the daemon as a .py script the daemon will then kill the Terminal interface and runs in the background
the daemon can then be used to start other toolbox runnabel processes like the cli thru a nothe Terminal by simply
naming the new instance as the daemon. This new generated instance the shadow daemon is then used to control the daemon.</p>
<p>crate the daemon</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ ToolBoxV2 -m daemon -n main # use the same name default is main
</code></pre></div></td></tr></table></div>
<p>creating the shadow daemon</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>same device

    $ ToolBoxV2 -m AnyMode[(default), cli, api]

    # to stop the daemon
    $ ToolBoxV2 -m daemon --kill

remote

    $ ToolBoxV2 -m AnyMode[(default), cli, api] -n (full-name) --remote
                                                optional --remote-direct-key [key] --host [host] --port [port]
</code></pre></div></td></tr></table></div>

        <details class="quote">
          <summary>Source code in <code>toolboxv2/runabel/demon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">App</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">AppArgs</span><span class="p">,</span> <span class="n">programmabel_interface</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_server</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The daemon runner is responsible for running a lightweight toolbox instance in the background</span>
<span class="sd">    The name of the daemon instance is also the communication bridge.</span>

<span class="sd">    workflow :</span>

<span class="sd">    run the daemon as a .py script the daemon will then kill the Terminal interface and runs in the background</span>
<span class="sd">    the daemon can then be used to start other toolbox runnabel processes like the cli thru a nothe Terminal by simply</span>
<span class="sd">    naming the new instance as the daemon. This new generated instance the shadow daemon is then used to control the daemon.</span>

<span class="sd">    crate the daemon</span>

<span class="sd">        $ ToolBoxV2 -m daemon -n main # use the same name default is main</span>

<span class="sd">    creating the shadow daemon</span>

<span class="sd">        same device</span>

<span class="sd">            $ ToolBoxV2 -m AnyMode[(default), cli, api]</span>

<span class="sd">            # to stop the daemon</span>
<span class="sd">            $ ToolBoxV2 -m daemon --kill</span>

<span class="sd">        remote</span>

<span class="sd">            $ ToolBoxV2 -m AnyMode[(default), cli, api] -n (full-name) --remote</span>
<span class="sd">                                                        optional --remote-direct-key [key] --host [host] --port [port]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">toolboxv2.mods.SocketManager</span> <span class="kn">import</span> <span class="n">SocketType</span>
    <span class="c1"># Start a New daemon</span>

    <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>

    <span class="n">client</span> <span class="o">=</span> <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">a_run_any</span><span class="p">(</span><span class="s1">&#39;SocketManager&#39;</span><span class="p">,</span> <span class="s1">&#39;create_socket&#39;</span><span class="p">,</span>
                         <span class="n">name</span><span class="o">=</span><span class="s2">&quot;daemon&quot;</span><span class="p">,</span>
                         <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">host</span> <span class="o">==</span> <span class="s1">&#39;0.0.0.0&#39;</span> <span class="k">else</span> <span class="n">args</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
                         <span class="n">port</span><span class="o">=</span><span class="mi">62436</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">port</span> <span class="o">==</span> <span class="mi">8000</span> <span class="k">else</span> <span class="n">args</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                         <span class="n">type_id</span><span class="o">=</span><span class="n">SocketType</span><span class="o">.</span><span class="n">client</span><span class="p">,</span>
                         <span class="n">max_connections</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                         <span class="n">endpoint_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">return_full_object</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">receiver_queue</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">as_client</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">as_client</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">as_client</span><span class="p">:</span>
        <span class="n">as_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connection_error&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">as_client</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;client&#39;</span>
        <span class="n">sender</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sender&#39;</span><span class="p">)</span>
        <span class="n">receiver_queue</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;receiver_queue&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">as_client</span> <span class="ow">and</span> <span class="n">as_server</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;server&#39;</span>
        <span class="n">server_controler</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">run_any</span><span class="p">(</span><span class="s1">&#39;SocketManager&#39;</span><span class="p">,</span> <span class="s1">&#39;tbSocketController&#39;</span><span class="p">,</span>
                                       <span class="n">name</span><span class="o">=</span><span class="s2">&quot;daemon&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">62436</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">programmabel_interface</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">server_controler</span><span class="p">[</span><span class="s2">&quot;get_status&quot;</span><span class="p">],</span> <span class="n">server_controler</span><span class="p">[</span><span class="s2">&quot;stop_server&quot;</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">helper</span><span class="p">():</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">t0</span> <span class="o">+</span> <span class="mi">9999</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">status_info</span> <span class="ow">in</span> <span class="n">server_controler</span><span class="p">[</span><span class="s2">&quot;get_status&quot;</span><span class="p">]():</span>
                    <span class="k">if</span> <span class="n">status_info</span> <span class="o">==</span> <span class="s2">&quot;KEEPALIVE&quot;</span><span class="p">:</span>
                        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Server status :&quot;</span><span class="p">,</span> <span class="n">status_info</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">status_info</span> <span class="o">==</span> <span class="s2">&quot;Server closed&quot;</span><span class="p">:</span>
                        <span class="k">break</span>

        <span class="n">t_1</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">helper</span><span class="p">)</span>
        <span class="n">t_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">run_any</span><span class="p">(</span><span class="n">TBEF</span><span class="o">.</span><span class="n">CLI_FUNCTIONS</span><span class="o">.</span><span class="n">GET_CHARACTER</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">gc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">word</span> <span class="o">==</span> <span class="s2">&quot;EXIT&quot;</span><span class="p">:</span>
                <span class="n">server_controler</span><span class="p">[</span><span class="s2">&quot;stop_server&quot;</span><span class="p">]()</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">char</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
                <span class="n">server_controler</span><span class="p">[</span><span class="s2">&quot;stop_server&quot;</span><span class="p">]()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">char</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">word</span><span class="p">)</span>
        <span class="n">t_1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="s1">&#39;client&#39;</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;closing daemon </span><span class="si">{</span><span class="n">app</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">status</span>

    <span class="k">if</span> <span class="n">programmabel_interface</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sender</span><span class="p">,</span> <span class="n">receiver_queue</span>

    <span class="n">alive</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">while</span> <span class="n">alive</span><span class="p">:</span>
        <span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;input dict from :&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_input</span> <span class="o">==</span> <span class="s2">&quot;exit&quot;</span><span class="p">:</span>
            <span class="n">user_input</span> <span class="o">=</span> <span class="s1">&#39;{&quot;exit&quot;: True}&#39;</span>
            <span class="n">alive</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">await</span> <span class="n">sender</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">user_input</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">receiver_queue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">receiver_queue</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="c1"># {</span>
    <span class="c1">#     &#39;socket&#39;: socket,</span>
    <span class="c1">#     &#39;receiver_socket&#39;: r_socket,</span>
    <span class="c1">#     &#39;host&#39;: host,</span>
    <span class="c1">#     &#39;port&#39;: port,</span>
    <span class="c1">#     &#39;p2p-port&#39;: endpoint_port,</span>
    <span class="c1">#     &#39;sender&#39;: send,</span>
    <span class="c1">#     &#39;receiver_queue&#39;: receiver_queue,</span>
    <span class="c1">#     &#39;connection_error&#39;: connection_error</span>
    <span class="c1"># }</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>








  </div>

    </div>

  </div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    2024-11-19
  </span>

    
    
    
    
  </aside>





                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "search.highlight"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>