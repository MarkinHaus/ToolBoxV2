
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://MarkinHaus.github.io/ToolBoxV2/tbjs/">
      
      
        <link rel="prev" href="../faq/">
      
      
        <link rel="next" href="../toolboxv2/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>TBjs - ToolBoxV2 Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tbjs-mini-framework-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ToolBoxV2 Docs" class="md-header__button md-logo" aria-label="ToolBoxV2 Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ToolBoxV2 Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TBjs
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/MarkinHaus/ToolBoxV2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ToolBoxV2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ToolBoxV2 Docs" class="md-nav__button md-logo" aria-label="ToolBoxV2 Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ToolBoxV2 Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MarkinHaus/ToolBoxV2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ToolBoxV2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    TBjs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    TBjs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      2. Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-setup" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-core-modules" class="md-nav__link">
    <span class="md-ellipsis">
      3. Core Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Core Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-tbconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration (TB.config)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-management-tbstate" class="md-nav__link">
    <span class="md-ellipsis">
      State Management (TB.state)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-tbrouter" class="md-nav__link">
    <span class="md-ellipsis">
      Routing (TB.router)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-communication-tbapi" class="md-nav__link">
    <span class="md-ellipsis">
      API Communication (TB.api)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-system-tbevents" class="md-nav__link">
    <span class="md-ellipsis">
      Event System (TB.events)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-tblogger" class="md-nav__link">
    <span class="md-ellipsis">
      Logging (TB.logger)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-detection-tbenv" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Detection (TB.env)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptography-tbcrypto" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptography (TB.crypto)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-management-tbuser" class="md-nav__link">
    <span class="md-ellipsis">
      User Management (TB.user)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-sent-events-tbsse" class="md-nav__link">
    <span class="md-ellipsis">
      Server-Sent Events (TB.sse)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-worker-tbsw" class="md-nav__link">
    <span class="md-ellipsis">
      Service Worker (TB.sw)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilities-tbutils" class="md-nav__link">
    <span class="md-ellipsis">
      Utilities (TB.utils)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ui-system-tbui" class="md-nav__link">
    <span class="md-ellipsis">
      4. UI System (TB.ui)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. UI System (TB.ui)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theme-management-tbuitheme" class="md-nav__link">
    <span class="md-ellipsis">
      Theme Management (TB.ui.theme)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graphics-tbgraphics" class="md-nav__link">
    <span class="md-ellipsis">
      Graphics (TB.graphics)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmx-integration-tbuihtmxintegration" class="md-nav__link">
    <span class="md-ellipsis">
      HTMX Integration (TB.ui.htmxIntegration)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-content-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Content Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modal-tbuimodal" class="md-nav__link">
    <span class="md-ellipsis">
      Modal (TB.ui.Modal)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toast-tbuitoast" class="md-nav__link">
    <span class="md-ellipsis">
      Toast (TB.ui.Toast)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loader-tbuiloader" class="md-nav__link">
    <span class="md-ellipsis">
      Loader (TB.ui.Loader)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#button-tbuibutton" class="md-nav__link">
    <span class="md-ellipsis">
      Button (TB.ui.Button)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#darkmodetoggle-tbuidarkmodetoggle" class="md-nav__link">
    <span class="md-ellipsis">
      DarkModeToggle (TB.ui.DarkModeToggle)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiebanner-tbuicookiebanner" class="md-nav__link">
    <span class="md-ellipsis">
      CookieBanner (TB.ui.CookieBanner)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markdownrenderer-tbuimarkdownrenderer" class="md-nav__link">
    <span class="md-ellipsis">
      MarkdownRenderer (TB.ui.MarkdownRenderer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autocompletewidget-tbuiautocompletewidget" class="md-nav__link">
    <span class="md-ellipsis">
      AutocompleteWidget (TB.ui.AutocompleteWidget)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navmenu-tbuinavmenu" class="md-nav__link">
    <span class="md-ellipsis">
      NavMenu (TB.ui.NavMenu)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      5. Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Application Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-data-and-updating-state" class="md-nav__link">
    <span class="md-ellipsis">
      Fetching Data and Updating State
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-side-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Client-Side Routing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-a-modal" class="md-nav__link">
    <span class="md-ellipsis">
      Displaying a Modal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      User Authentication Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-styling-with-tailwind-css" class="md-nav__link">
    <span class="md-ellipsis">
      6. Styling with Tailwind CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-building-tbjs-for-developers" class="md-nav__link">
    <span class="md-ellipsis">
      7. Building tbjs (For Developers)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/MarkinHaus/ToolBoxV2/issues" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Report Issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolboxv2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    toolboxv2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      2. Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-setup" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-core-modules" class="md-nav__link">
    <span class="md-ellipsis">
      3. Core Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Core Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-tbconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration (TB.config)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-management-tbstate" class="md-nav__link">
    <span class="md-ellipsis">
      State Management (TB.state)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-tbrouter" class="md-nav__link">
    <span class="md-ellipsis">
      Routing (TB.router)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-communication-tbapi" class="md-nav__link">
    <span class="md-ellipsis">
      API Communication (TB.api)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-system-tbevents" class="md-nav__link">
    <span class="md-ellipsis">
      Event System (TB.events)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-tblogger" class="md-nav__link">
    <span class="md-ellipsis">
      Logging (TB.logger)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-detection-tbenv" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Detection (TB.env)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptography-tbcrypto" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptography (TB.crypto)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-management-tbuser" class="md-nav__link">
    <span class="md-ellipsis">
      User Management (TB.user)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-sent-events-tbsse" class="md-nav__link">
    <span class="md-ellipsis">
      Server-Sent Events (TB.sse)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-worker-tbsw" class="md-nav__link">
    <span class="md-ellipsis">
      Service Worker (TB.sw)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilities-tbutils" class="md-nav__link">
    <span class="md-ellipsis">
      Utilities (TB.utils)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ui-system-tbui" class="md-nav__link">
    <span class="md-ellipsis">
      4. UI System (TB.ui)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. UI System (TB.ui)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theme-management-tbuitheme" class="md-nav__link">
    <span class="md-ellipsis">
      Theme Management (TB.ui.theme)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graphics-tbgraphics" class="md-nav__link">
    <span class="md-ellipsis">
      Graphics (TB.graphics)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmx-integration-tbuihtmxintegration" class="md-nav__link">
    <span class="md-ellipsis">
      HTMX Integration (TB.ui.htmxIntegration)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-content-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Content Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modal-tbuimodal" class="md-nav__link">
    <span class="md-ellipsis">
      Modal (TB.ui.Modal)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toast-tbuitoast" class="md-nav__link">
    <span class="md-ellipsis">
      Toast (TB.ui.Toast)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loader-tbuiloader" class="md-nav__link">
    <span class="md-ellipsis">
      Loader (TB.ui.Loader)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#button-tbuibutton" class="md-nav__link">
    <span class="md-ellipsis">
      Button (TB.ui.Button)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#darkmodetoggle-tbuidarkmodetoggle" class="md-nav__link">
    <span class="md-ellipsis">
      DarkModeToggle (TB.ui.DarkModeToggle)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiebanner-tbuicookiebanner" class="md-nav__link">
    <span class="md-ellipsis">
      CookieBanner (TB.ui.CookieBanner)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markdownrenderer-tbuimarkdownrenderer" class="md-nav__link">
    <span class="md-ellipsis">
      MarkdownRenderer (TB.ui.MarkdownRenderer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autocompletewidget-tbuiautocompletewidget" class="md-nav__link">
    <span class="md-ellipsis">
      AutocompleteWidget (TB.ui.AutocompleteWidget)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navmenu-tbuinavmenu" class="md-nav__link">
    <span class="md-ellipsis">
      NavMenu (TB.ui.NavMenu)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      5. Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Application Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-data-and-updating-state" class="md-nav__link">
    <span class="md-ellipsis">
      Fetching Data and Updating State
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-side-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Client-Side Routing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-a-modal" class="md-nav__link">
    <span class="md-ellipsis">
      Displaying a Modal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      User Authentication Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-styling-with-tailwind-css" class="md-nav__link">
    <span class="md-ellipsis">
      6. Styling with Tailwind CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-building-tbjs-for-developers" class="md-nav__link">
    <span class="md-ellipsis">
      7. Building tbjs (For Developers)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  


  
  


<h1 id="tbjs-mini-framework-documentation">tbjs Mini Framework Documentation<a class="headerlink" href="#tbjs-mini-framework-documentation" title="Permanent link">&para;</a></h1>
<p><strong>Version:</strong> 0.1.0-alpha</p>
<p><code>tbjs</code> is a lightweight, modular JavaScript framework designed for building modern web applications, with a focus on integrating with tools like HTMX and Three.js. It provides core functionalities such as routing, state management, API communication, and a UI component system.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#html-setup">HTML Setup</a></li>
<li><a href="#initialization">Initialization</a></li>
</ul>
</li>
<li><a href="#core-modules">Core Modules</a><ul>
<li><a href="#configuration-tbconfig">Configuration (<code>TB.config</code>)</a></li>
<li><a href="#state-management-tbstate">State Management (<code>TB.state</code>)</a></li>
<li><a href="#routing-tbrouter">Routing (<code>TB.router</code>)</a></li>
<li><a href="#api-communication-tbapi">API Communication (<code>TB.api</code>)</a></li>
<li><a href="#event-system-tbevents">Event System (<code>TB.events</code>)</a></li>
<li><a href="#logging-tblogger">Logging (<code>TB.logger</code>)</a></li>
<li><a href="#environment-detection-tbenv">Environment Detection (<code>TB.env</code>)</a></li>
<li><a href="#cryptography-tbcrypto">Cryptography (<code>TB.crypto</code>)</a></li>
<li><a href="#user-management-tbuser">User Management (<code>TB.user</code>)</a></li>
<li><a href="#server-sent-events-tbsse">Server-Sent Events (<code>TB.sse</code>)</a></li>
<li><a href="#service-worker-tbsw">Service Worker (<code>TB.sw</code>)</a></li>
<li><a href="#utilities-tbutils">Utilities (<code>TB.utils</code>)</a></li>
</ul>
</li>
<li><a href="#ui-system-tbui">UI System (<code>TB.ui</code>)</a><ul>
<li><a href="#theme-management-tbuitheme">Theme Management (<code>TB.ui.theme</code>)</a></li>
<li><a href="#graphics-tbgraphics">Graphics (<code>TB.graphics</code>)</a></li>
<li><a href="#htmx-integration-tbuihtmxintegration">HTMX Integration (<code>TB.ui.htmxIntegration</code>)</a></li>
<li><a href="#dynamic-content-processing">Dynamic Content Processing</a></li>
<li><a href="#components">Components</a><ul>
<li><a href="#modal-tbuimodal">Modal (<code>TB.ui.Modal</code>)</a></li>
<li><a href="#toast-tbuitoast">Toast (<code>TB.ui.Toast</code>)</a></li>
<li><a href="#loader-tbuiloader">Loader (<code>TB.ui.Loader</code>)</a></li>
<li><a href="#button-tbuibutton">Button (<code>TB.ui.Button</code>)</a></li>
<li><a href="#darkmodetoggle-tbuidarkmodetoggle">DarkModeToggle (<code>TB.ui.DarkModeToggle</code>)</a></li>
<li><a href="#cookiebanner-tbuicookiebanner">CookieBanner (<code>TB.ui.CookieBanner</code>)</a></li>
<li><a href="#markdownrenderer-tbuimarkdownrenderer">MarkdownRenderer (<code>TB.ui.MarkdownRenderer</code>)</a></li>
<li><a href="#autocompletewidget-tbuiautocompletewidget">AutocompleteWidget (<code>TB.ui.AutocompleteWidget</code>)</a></li>
<li><a href="#navmenu-tbuinavmenu">NavMenu (<code>TB.ui.NavMenu</code>)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#usage-examples">Usage Examples</a><ul>
<li><a href="#basic-application-setup">Basic Application Setup</a></li>
<li><a href="#fetching-data-and-updating-state">Fetching Data and Updating State</a></li>
<li><a href="#client-side-routing">Client-Side Routing</a></li>
<li><a href="#displaying-a-modal">Displaying a Modal</a></li>
<li><a href="#user-authentication-flow">User Authentication Flow</a></li>
</ul>
</li>
<li><a href="#styling-with-tailwind-css">Styling with Tailwind CSS</a></li>
<li><a href="#building-tbjs-for-developers">Building tbjs (For Developers)</a></li>
</ol>
<hr />
<h2 id="1-introduction">1. Introduction<a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h2>
<p><code>tbjs</code> aims to provide a solid foundation for single-page applications (SPAs) and dynamic web experiences. It's built with modularity in mind, allowing you to use only the parts you need. Key features include:</p>
<ul>
<li><strong>Configuration-driven</strong>: Easily customize framework behavior.</li>
<li><strong>State Management</strong>: Centralized application state.</li>
<li><strong>SPA Router</strong>: Handles client-side navigation and view loading.</li>
<li><strong>API Abstraction</strong>: Simplifies backend communication (HTTP &amp; Tauri).</li>
<li><strong>Event Bus</strong>: Decoupled communication between modules.</li>
<li><strong>UI System</strong>: Includes theme management and reusable components.</li>
<li><strong>3D Graphics</strong>: Integration with Three.js for dynamic backgrounds or scenes.</li>
<li><strong>User Authentication</strong>: Built-in support for various authentication flows, including WebAuthn.</li>
<li><strong>HTMX Friendly</strong>: Designed to work alongside HTMX for enhancing HTML.</li>
</ul>
<hr />
<h2 id="2-getting-started">2. Getting Started<a class="headerlink" href="#2-getting-started" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>Before using <code>tbjs</code>, ensure you have the following:</p>
<ol>
<li><strong>HTMX</strong>: <code>tbjs</code> is designed to work well with HTMX. Include HTMX in your project.
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/htmx.org@2.0.0/dist/htmx.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></li>
<li><strong>Three.js</strong> (Optional, if using <code>TB.graphics</code>):
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/three.js/0.153.0/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></li>
<li><strong>Marked &amp; Highlight.js</strong> (Optional, if using <code>TB.ui.MarkdownRenderer</code>): These should be available globally.
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/marked/marked.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Optional: Styles for highlight.js --&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css&quot;</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- If using marked-highlight extension --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/marked-highlight/lib/index.umd.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
    <em>Note: Ensure <code>window.marked</code> and <code>window.hljs</code> (and <code>window.markedHighlight</code> if using the extension) are available before <code>TB.ui.MarkdownRenderer.init()</code> is called or any markdown rendering is attempted.</em></li>
</ol>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p><code>tbjs</code> is distributed as <code>tbjs.js</code> and <code>tbjs.css</code>.</p>
<ol>
<li><strong>Build <code>tbjs</code></strong>: If you have the source, run <code>npm run build</code> to generate the <code>dist/</code> folder.</li>
<li><strong>Include files in your HTML</strong>:
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;path/to/your/tbjs/dist/tbjs.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;path/to/your/tbjs/dist/tbjs.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
    If you are using <code>tbjs</code> as a module in your own build system, you can import it:
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">TB</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;path/to/your/tbjs/src/index.js&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Or from dist/tbjs.js if UMD</span>
</code></pre></div></td></tr></table></div></li>
</ol>
<h3 id="html-setup">HTML Setup<a class="headerlink" href="#html-setup" title="Permanent link">&para;</a></h3>
<p>Your main HTML file (<code>index.html</code>) should have a root element for your application content and optionally, containers for background effects or 3D graphics.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>My tbjs App<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- tbjs CSS --&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;path/to/tbjs/dist/tbjs.css&quot;</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Tailwind (if you&#39;re using it directly in your app) --&gt;</span>
    <span class="cm">&lt;!-- &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt; --&gt;</span>
    <span class="cm">&lt;!-- Or your compiled Tailwind CSS --&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;path/to/your/app.css&quot;</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- HTMX --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/htmx.org@2.0.0/dist/htmx.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Three.js (if using graphics module) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/three.js/0.153.0/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Marked &amp; Highlight.js (if using MarkdownRenderer) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/marked/marked.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/marked-highlight/lib/index.umd.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css&quot;</span><span class="p">&gt;</span>


    <span class="cm">&lt;!-- Material Symbols (used by some components) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&quot;</span> <span class="p">/&gt;</span>

    <span class="cm">&lt;!-- tbjs Script (type=&quot;module&quot; if loading the ES module directly) --&gt;</span>
    <span class="cm">&lt;!-- Option 1: Loading tbjs as a module --&gt;</span>
    <span class="cm">&lt;!-- &lt;script type=&quot;module&quot; src=&quot;path/to/tbjs/src/index.js&quot;&gt;&lt;/script&gt; --&gt;</span>
    <span class="cm">&lt;!-- Option 2: Loading the UMD build --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;path/to/tbjs/dist/tbjs.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Dedicated background container (used by TB.ui.theme) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;appBackgroundContainer&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Optional: Container for 3D graphics (used by TB.graphics) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;threeDScene&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Main application root --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app-root&quot;</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Initial content or loader can go here --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;loaderCenter&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: flex; justify-content: center; align-items: center; height: 100vh;&quot;</span><span class="p">&gt;</span>
            Loading application...
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Your main application script --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="c1">// Import TB if using ES Modules and not UMD global</span>
<span class="w">        </span><span class="c1">// import TB from &#39;path/to/tbjs/src/index.js&#39;; // or from &#39;path/to/tbjs/dist/tbjs.js&#39; if it&#39;s an ES module build</span>

<span class="w">        </span><span class="c1">// Wait for the DOM to be fully loaded</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Access TB (it&#39;s global if you included the UMD build)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">TB</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nb">window</span><span class="p">.</span><span class="nx">TB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">appRootId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-root&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Matches the div above</span>
<span class="w">                    </span><span class="nx">baseApiUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/api&#39;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Your backend API base URL</span>
<span class="w">                    </span><span class="c1">// baseFileUrl: window.location.origin + &#39;/app/&#39;, // If HTML files are in a subfolder</span>
<span class="w">                    </span><span class="nx">initialState</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">appName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My Awesome App&#39;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nx">themeSettings</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">defaultPreference</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;light&#39;, &#39;dark&#39;, or &#39;system&#39;</span>
<span class="w">                        </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;color&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;color&#39;, &#39;image&#39;, or &#39;3d&#39;</span>
<span class="w">                            </span><span class="nx">light</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#f0f0f0&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">                            </span><span class="nx">dark</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#202020&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">                            </span><span class="c1">// placeholder: { image: &#39;/path/to/placeholder.jpg&#39;, displayUntil3DReady: true }</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="c1">// You can predefine routes, though router primarily fetches HTML</span>
<span class="w">                        </span><span class="c1">// { path: &#39;/home&#39;, component: &#39;views/home.html&#39; }</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nx">logLevel</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;debug&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;debug&#39;, &#39;info&#39;, &#39;warn&#39;, &#39;error&#39;</span>
<span class="w">                    </span><span class="nx">serviceWorker</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">enabled</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// Set to true to enable</span>
<span class="w">                        </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/sw.js&#39;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;TB object not found. Ensure tbjs.js is loaded correctly.&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="initialization">Initialization<a class="headerlink" href="#initialization" title="Permanent link">&para;</a></h3>
<p>Initialize <code>tbjs</code> by calling <code>TB.init()</code> with your application's configuration. This is typically done in a <code>&lt;script type="module"&gt;</code> tag at the end of your <code>&lt;body&gt;</code> or after the <code>DOMContentLoaded</code> event.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// In your main application script (e.g., app.js or inline script)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
<span class="w">        </span><span class="nx">appRootId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-root&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">baseApiUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/api/v1&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Example: your backend API</span>
<span class="w">        </span><span class="c1">// baseFileUrl: window.location.origin, // Default</span>
<span class="w">        </span><span class="nx">initialState</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">userPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">notifications</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">themeSettings</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">defaultPreference</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;light&#39;, &#39;dark&#39;, or &#39;system&#39;</span>
<span class="w">            </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;3d&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;color&#39;, &#39;image&#39;, &#39;3d&#39;</span>
<span class="w">                </span><span class="nx">light</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#FFFFFF&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fallback if 3D fails or not used</span>
<span class="w">                </span><span class="nx">dark</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#121212&#39;</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Fallback</span>
<span class="w">                </span><span class="nx">placeholder</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/images/background-placeholder.jpg&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">displayUntil3DReady</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">             </span><span class="c1">// Example: Define a route that maps to an HTML file.</span>
<span class="w">             </span><span class="c1">// { path: &#39;/dashboard&#39;, view: &#39;/web/pages/dashboard.html&#39; }, // Not directly used by current router.navigateTo structure</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nx">logLevel</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;debug&#39;, &#39;info&#39;, &#39;warn&#39;, &#39;error&#39;, &#39;none&#39;</span>
<span class="w">        </span><span class="nx">isProduction</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// Manually set or let tbjs infer</span>
<span class="w">        </span><span class="nx">serviceWorker</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">enabled</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/custom-sw.js&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/&#39;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// Example: Listen for tbjs initialization completion</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;tbjs:initialized&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">tbInstance</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;tbjs is ready!&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">tbInstance</span><span class="p">.</span><span class="nx">VERSION</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// You can now safely use all TB modules</span>
<span class="w">        </span><span class="c1">// Example: TB.router.navigateTo(&#39;/home&#39;);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div>
If the <code>appRootId</code> element is not found on the page when <code>TB.init()</code> is called, <code>tbjs</code> will attempt to redirect to <code>/index.html</code> after storing the intended path in <code>sessionStorage</code>. This helps handle deep linking when the main HTML shell hasn't loaded yet.</p>
<hr />
<h2 id="3-core-modules">3. Core Modules<a class="headerlink" href="#3-core-modules" title="Permanent link">&para;</a></h2>
<h3 id="configuration-tbconfig">Configuration (<code>TB.config</code>)<a class="headerlink" href="#configuration-tbconfig" title="Permanent link">&para;</a></h3>
<p>The configuration module (<code>TB.config</code>) manages all framework and application settings. It's initialized by <code>TB.init()</code> with default values merged with your provided configuration.</p>
<p><strong>Default Configuration Structure:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nx">appRootId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-root&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">baseApiUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/api&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">baseFileUrl</span><span class="o">:</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">origin</span><span class="p">,</span><span class="w"> </span><span class="c1">// Base URL for HTML views</span>
<span class="w">    </span><span class="nx">initialState</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nx">themeSettings</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">defaultPreference</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;light&#39;, &#39;dark&#39;, &#39;system&#39;</span>
<span class="w">        </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;color&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// &#39;3d&#39;, &#39;image&#39;, &#39;color&#39;, &#39;none&#39;</span>
<span class="w">            </span><span class="nx">light</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nx">dark</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#121212&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nx">placeholder</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">displayUntil3DReady</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// Primarily for reference, router fetches HTML directly</span>
<span class="w">    </span><span class="nx">logLevel</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isProduction</span><span class="o">:</span><span class="w"> </span><span class="cm">/* inferred or user-set */</span><span class="p">,</span>
<span class="w">    </span><span class="nx">serviceWorker</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">enabled</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/sw.js&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Methods:</strong>
*   <code>TB.config.init(initialUserConfig)</code>: Called internally by <code>TB.init()</code>. Merges user config with defaults.
    *   <code>baseApiUrl</code> is made absolute. If relative (e.g., <code>/api</code>), it's prepended with <code>window.location.origin</code>. If just <code>api</code>, it becomes <code>/api</code>.
    *   <code>baseFileUrl</code> ensures it ends with a <code>/</code> if it contains a path.
    *   <code>isProduction</code> is inferred based on hostname (<code>localhost</code>, <code>127.0.0.1</code>) if not explicitly set.
*   <code>TB.config.get(key)</code>: Retrieves a configuration value. Supports dot notation for nested properties (e.g., <code>TB.config.get('themeSettings.background.type')</code>).
*   <code>TB.config.getAll()</code>: Returns a copy of the entire configuration object.
*   <code>TB.config.set(key, value)</code>: Sets a configuration value. Supports dot notation. <em>Note: Use with caution after initialization, as not all modules may react to live changes.</em></p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">apiUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;baseApiUrl&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;API URL:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">apiUrl</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">isProd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;isProduction&#39;</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isProd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">setLevel</span><span class="p">(</span><span class="s1">&#39;warn&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="state-management-tbstate">State Management (<code>TB.state</code>)<a class="headerlink" href="#state-management-tbstate" title="Permanent link">&para;</a></h3>
<p><code>TB.state</code> provides a simple, centralized store for your application's state.</p>
<p><strong>Methods:</strong>
*   <code>TB.state.init(initialState)</code>: Called internally by <code>TB.init()</code>. Loads any persisted state from <code>localStorage</code>.
*   <code>TB.state.get(key)</code>: Retrieves a state value. Supports dot notation. If <code>key</code> is undefined, returns a copy of the entire state.
*   <code>TB.state.set(key, value, options = { persist: false })</code>: Sets a state value.
    *   <code>options.persist</code>: If <code>true</code>, the top-level key of this state will be saved to <code>localStorage</code> and reloaded on next init.
    *   Emits <code>state:changed</code> event with <code>{ key, value, fullState }</code>.
    *   Emits <code>state:changed:your:key</code> (dots replaced with colons) for more specific listeners.
*   <code>TB.state.delete(key, options = { persist: false })</code>: Deletes a key from the state. Handles persisted state removal.
*   Legacy methods for simple key-value persistence (discouraged for new code, prefer structured state with <code>persist</code> option):
    *   <code>TB.state.initVar(v_name, v_value)</code>: Initializes if not set, persists.
    *   <code>TB.state.delVar(v_name)</code>: Deletes, persists change.
    *   <code>TB.state.getVar(v_name)</code>: Gets value.
    *   <code>TB.state.setVar(v_name, v_value)</code>: Sets value, persists.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Set initial user data (e.g., after login)</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;user.profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">persist</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// Get user name</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">userName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;user.profile.name&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Alice</span>

<span class="c1">// Listen for changes to a specific part of the state</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;state:changed:user:profile:theme&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newTheme</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User theme changed to:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newTheme</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Update UI or apply theme</span>
<span class="p">});</span>

<span class="c1">// Update the theme</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;user.profile.theme&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;light&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Listener above will be triggered</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="routing-tbrouter">Routing (<code>TB.router</code>)<a class="headerlink" href="#routing-tbrouter" title="Permanent link">&para;</a></h3>
<p><code>TB.router</code> handles client-side navigation for your SPA. It fetches HTML content for views and updates the DOM.</p>
<p><strong>Key Features:</strong>
*   Loads HTML content from <code>TB.config.get('baseFileUrl') + path</code>.
*   Updates browser history (<code>pushState</code>, <code>replaceState</code>).
*   Handles <code>popstate</code> events (browser back/forward).
*   Intercepts clicks on local links.
*   Manages script execution for dynamically loaded content:
    *   Scripts with <code>src</code> are loaded and executed once (cached by URL).
    *   Inline scripts are executed.
    *   Inline scripts with <code>unsave="true"</code> are executed via a Blob URL (fresh execution each time).
    *   <strong>Important</strong>: It attempts to prevent re-execution of main application bundle scripts (e.g., <code>main.js</code>, <code>bundle.js</code>) if they are found within fetched HTML.
*   Optional session-based caching for HTML content.
*   Emits router events (<code>router:beforeNavigation</code>, <code>router:navigationSuccess</code>, <code>router:navigationError</code>, <code>router:contentProcessed</code>).</p>
<p><strong>Methods:</strong>
*   <code>TB.router.init(rootElement, predefinedRoutes)</code>: Initializes the router.
    *   <code>rootElement</code>: The DOM element where views will be rendered.
    *   <code>predefinedRoutes</code>: (Currently for reference) Array of route objects.
    *   Automatically navigates to the initial URL.
*   <code>TB.router.navigateTo(path, replace = false, isInitialLoad = false)</code>: Navigates to the given path.
    *   <code>path</code>: The URL path (e.g., <code>/about</code>, <code>/users/123?param=value#section</code>). Can be absolute or relative.
    *   <code>replace</code>: If <code>true</code>, uses <code>history.replaceState</code> instead of <code>history.pushState</code>.
    *   <code>isInitialLoad</code>: Internal flag for the first navigation.
    *   Handles 404 errors by trying to navigate to <code>/web/assets/404.html</code>.
    *   Handles 401 errors by trying to navigate to <code>/web/assets/401.html</code>.
*   <code>TB.router.getCurrentPath()</code>: Returns the current normalized path.
*   <code>TB.router.clearCache(path)</code>: Clears the sessionStorage cache for a specific path or all cached pages if <code>path</code> is omitted. (Only if <code>USE_SESSION_CACHE</code> is true in <code>router.js</code>).</p>
<p><strong>Example: Navigating and Handling Events</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- In your main HTML --&gt;</span>
<span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/home&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/products&quot;</span><span class="p">&gt;</span>Products<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/web/assets/contact.html&quot;</span><span class="p">&gt;</span>Contact (relative to baseFileUrl)<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app-root&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Initialize router (typically done in TB.init)</span>
<span class="c1">// TB.router.init(document.getElementById(&#39;app-root&#39;));</span>

<span class="c1">// Programmatic navigation</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">);</span>

<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;router:navigationSuccess&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">path</span><span class="p">,</span><span class="w"> </span><span class="nx">contentSource</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Navigated to </span><span class="si">${</span><span class="nx">path</span><span class="si">}</span><span class="sb"> (from </span><span class="si">${</span><span class="nx">contentSource</span><span class="si">}</span><span class="sb">)`</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// TB.ui.processDynamicContent is called internally by the router for the appRootElement</span>
<span class="w">    </span><span class="c1">// but if you load content into other areas, you might call it manually:</span>
<span class="w">    </span><span class="c1">// TB.ui.processDynamicContent(document.getElementById(&#39;some-other-area&#39;));</span>
<span class="p">});</span>

<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;router:navigationError&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">path</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Failed to navigate to </span><span class="si">${</span><span class="nx">path</span><span class="si">}</span><span class="sb">:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="sb">`Could not load page: </span><span class="si">${</span><span class="nx">path</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="api-communication-tbapi">API Communication (<code>TB.api</code>)<a class="headerlink" href="#api-communication-tbapi" title="Permanent link">&para;</a></h3>
<p><code>TB.api</code> is responsible for all backend communication, supporting standard HTTP requests and Tauri <code>invoke</code> calls.</p>
<p><strong>Key Structures:</strong>
*   <strong><code>Result</code> Object</strong>: Standardized wrapper for API responses.
    *   <code>origin</code>: Source of the data (e.g., <code>['http']</code>, <code>['tauri']</code>).
    *   <code>error</code>: Error type (e.g., <code>TB.api.ToolBoxError.none</code>, <code>TB.api.ToolBoxError.input_error</code>).
    *   <code>result</code>: A <code>ToolBoxResult</code> object.
        *   <code>data_to</code>: Interface target (e.g., <code>TB.api.ToolBoxInterfaces.api</code>, <code>.cli</code>).
        *   <code>data_info</code>: Additional info about the data.
        *   <code>data</code>: The actual payload.
    *   <code>info</code>: A <code>ToolBoxInfo</code> object.
        *   <code>exec_code</code>: Execution code (e.g., HTTP status or custom code).
        *   <code>help_text</code>: Descriptive message.
    *   Methods: <code>.log()</code>, <code>.html()</code>, <code>.get()</code> (returns <code>result.data</code>).
*   <code>ToolBoxError</code>: Enum for error types.
*   <code>ToolBoxInterfaces</code>: Enum for data destinations.</p>
<p><strong>Main Method: <code>TB.api.request()</code></strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span>
<span class="w">    </span><span class="nx">moduleName</span><span class="p">,</span><span class="w">      </span><span class="c1">// string: Backend module/class OR full path (e.g., &#39;/special/endpoint&#39;)</span>
<span class="w">    </span><span class="nx">functionName</span><span class="p">,</span><span class="w">    </span><span class="c1">// string: Backend function/method (ignored if moduleName is full path)</span>
<span class="w">                     </span><span class="c1">// OR object: Query parameters for GET/DELETE if moduleName is full path</span>
<span class="w">    </span><span class="nx">payload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">  </span><span class="c1">// object|string: Data to send. If string, used as query params for GET/POST-URL.</span>
<span class="w">    </span><span class="nx">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// string: HTTP method (&#39;GET&#39;, &#39;POST&#39;, &#39;PUT&#39;, &#39;DELETE&#39;, etc.)</span>
<span class="w">    </span><span class="nx">useTauri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;auto&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// string: &#39;auto&#39;, &#39;force&#39; (Tauri only), or &#39;never&#39; (HTTP only)</span>
<span class="w">    </span><span class="nx">isSpecialAuthRoute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// boolean: For routes with custom auth header handling (rarely needed)</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
*   <strong>Tauri Integration</strong>: If <code>env.isTauri()</code> is true and <code>useTauri</code> is 'auto' or 'force', it attempts <code>window.__TAURI__.invoke("moduleName.functionName", payload)</code>. Falls back to HTTP if 'auto' and invoke fails.
*   <strong>HTTP Requests</strong>:
    *   URL construction:
        *   Standard: <code>baseApiUrl/moduleName/functionName</code>
        *   Full path: <code>baseApiUrl/moduleName</code> (where <code>moduleName</code> is e.g., <code>/login</code>)
    *   Headers:
        *   <code>Content-Type: application/json</code> and <code>Accept: application/json</code> by default for JSON.
        *   <code>Authorization: Bearer &lt;token&gt;</code> is added if <code>TB.state.get('user.token')</code> exists (unless <code>isSpecialAuthRoute</code> has special handling, though current <code>_getRequestHeaders</code> adds it generally).
    *   Payload:
        *   GET/DELETE: Payload (object or string) becomes URL query parameters.
        *   POST/PUT/PATCH: Object payload is JSON.stringified. String payload for POST can be query params if URL doesn't already have them.
    *   Response Handling:
        *   Automatically parses JSON responses.
        *   Handles non-JSON responses (e.g., 204 No Content) gracefully.
        *   Wraps responses (or errors) in a <code>Result</code> object.</p>
<p><strong>Helper Methods:</strong>
*   <code>TB.api.fetchHtml(path)</code>: Fetches HTML content, typically used by the router. Path is relative to <code>baseFileUrl</code>.
*   <code>TB.api.httpPostData(module_name, function_name, data)</code>: Alias for <code>request(..., 'POST')</code>.
*   <code>TB.api.AuthHttpPostData(username)</code>: Specific method for session validation. Calls <code>/validateSession</code> with <code>jwt_claim_device</code> and <code>Username</code>.
*   <code>TB.api.logoutServer()</code>: Calls <code>/web/logoutS</code> to notify the server of logout.</p>
<p><strong>Example: Making a GET Request</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchProducts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;Fetching products...&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// GET /api/ProductManager/getProductsList?category=electronics&amp;limit=10</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;ProductManager&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;getProductsList&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;electronics&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="s1">&#39;GET&#39;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ToolBoxError</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// products === result.result.data</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Products:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="p">);</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;products.list&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Failed to fetch products:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="p">);</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Could not load products.&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Network errors or other exceptions</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Network error fetching products:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="s1">&#39;Network error. Please try again.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">fetchProducts</span><span class="p">();</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Example: Tauri Invoke or HTTP POST</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">saveData</span><span class="p">(</span><span class="nx">dataToSave</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span>
<span class="w">        </span><span class="s1">&#39;DataManager&#39;</span><span class="p">,</span><span class="w">  </span><span class="c1">// Tauri: DataManager.save_data</span>
<span class="w">        </span><span class="s1">&#39;save_data&#39;</span><span class="p">,</span><span class="w">    </span><span class="c1">// HTTP: /api/DataManager/save_data</span>
<span class="w">        </span><span class="nx">dataToSave</span><span class="p">,</span><span class="w">     </span><span class="c1">// Payload</span>
<span class="w">        </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w">         </span><span class="c1">// HTTP Method</span>
<span class="w">        </span><span class="s1">&#39;auto&#39;</span><span class="w">          </span><span class="c1">// Try Tauri first, then HTTP</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span><span class="w"> </span><span class="c1">// Logs the structured result to console</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ToolBoxError</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Data saved successfully!&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// Return the data from server response</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="sb">`Save failed: </span><span class="si">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="event-system-tbevents">Event System (<code>TB.events</code>)<a class="headerlink" href="#event-system-tbevents" title="Permanent link">&para;</a></h3>
<p>A simple publish/subscribe system for decoupled communication.</p>
<p><strong>Methods:</strong>
*   <code>TB.events.on(eventName, callback)</code>: Subscribes to an event.
*   <code>TB.events.off(eventName, callback)</code>: Unsubscribes from an event.
*   <code>TB.events.emit(eventName, data)</code>: Publishes an event with optional data.
*   <code>TB.events.once(eventName, callback)</code>: Subscribes to an event for a single occurrence.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Module A</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user:actionCompleted&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;saveSettings&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Module B</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user:actionCompleted&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">eventData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">eventData</span><span class="p">.</span><span class="nx">action</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;saveSettings&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">eventData</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User settings saved!&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div>
Framework Core Events (Examples):
*   <code>state:changed</code>
*   <code>state:changed:path:to:key</code>
*   <code>router:beforeNavigation</code>, <code>router:navigationSuccess</code>, <code>router:navigationError</code>, <code>router:contentProcessed</code>
*   <code>theme:changed</code>
*   <code>tbjs:initialized</code>
*   <code>api:networkError</code>
*   <code>graphics:initialized</code>, <code>graphics:disposed</code>
*   <code>cookieConsent:updated</code>
*   <code>user:stateChanged</code>, <code>user:loggedOut</code></p>
<h3 id="logging-tblogger">Logging (<code>TB.logger</code>)<a class="headerlink" href="#logging-tblogger" title="Permanent link">&para;</a></h3>
<p>Provides prefixed and timestamped console logging with different levels.</p>
<p><strong>Methods:</strong>
*   <code>TB.logger.init({ logLevel })</code>: Called internally.
*   <code>TB.logger.setLevel(levelName)</code>: Sets the minimum log level ('debug', 'info', 'warn', 'error', 'none').
*   <code>TB.logger.debug(...args)</code>
*   <code>TB.logger.log(...args)</code> (alias for <code>info</code>)
*   <code>TB.logger.info(...args)</code>
*   <code>TB.logger.warn(...args)</code>
*   <code>TB.logger.error(...args)</code></p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;This is a debug message with an object:&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Application started.&#39;</span><span class="p">);</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;Something might be wrong here.&#39;</span><span class="p">);</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;A critical error occurred!&#39;</span><span class="p">,</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Oops&#39;</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
Log level is configured via <code>TB.config.logLevel</code> during <code>TB.init</code>.</p>
<h3 id="environment-detection-tbenv">Environment Detection (<code>TB.env</code>)<a class="headerlink" href="#environment-detection-tbenv" title="Permanent link">&para;</a></h3>
<p>Detects the current runtime environment.</p>
<p><strong>Methods:</strong>
*   <code>TB.env.detect()</code>: Called internally by <code>TB.init()</code>.
*   <code>TB.env.isTauri()</code>: Returns <code>true</code> if running in a Tauri environment.
*   <code>TB.env.isWeb()</code>: Returns <code>true</code> if running in a standard web browser environment.
*   <code>TB.env.isMobile()</code>: (Placeholder) Intended for Tauri mobile detection, currently may not be fully implemented.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">TB</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">isTauri</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Running in Tauri, specific Tauri features can be used.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Example: window.__TAURI__.fs.readTextFile(...)</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">TB</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">isWeb</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Running in a web browser.&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="cryptography-tbcrypto">Cryptography (<code>TB.crypto</code>)<a class="headerlink" href="#cryptography-tbcrypto" title="Permanent link">&para;</a></h3>
<p>Provides various cryptographic utilities, including WebAuthn support.</p>
<p><strong>Key Management:</strong>
*   <code>TB.crypto.generateAsymmetricKeys()</code>: Generates RSA-OAEP key pair (PEM and base64).
*   <code>TB.crypto.decryptAsymmetric(encryptedTextBase64, privateKeyBase64, convertHex = false)</code>: Decrypts RSA-OAEP encrypted text.
*   <code>TB.crypto.signMessage(privateKeyBase64, message)</code>: Signs a message using RSA-PSS with the private key.
*   <code>TB.crypto.storePrivateKey(privateKeyBase64, username)</code>: Stores private key in <code>localStorage</code>.
*   <code>TB.crypto.retrievePrivateKey(username)</code>: Retrieves private key from <code>localStorage</code>.</p>
<p><strong>Symmetric Encryption (Example - requires careful IV handling):</strong>
*   <code>TB.crypto.generateSymmetricKey()</code>: Generates an AES-GCM key (base64 raw).
*   <code>TB.crypto.decryptSymmetric(encryptedDataB64, password)</code>: Decrypts AES-GCM data. <em>Note: This implementation assumes the IV is prepended to the ciphertext (first 12 bytes). The <code>password</code> is used to derive the key via PBKDF2.</em></p>
<p><strong>WebAuthn:</strong>
*   <strong><code>getRpId()</code> (internal, used by WebAuthn functions):</strong> Determines the Relying Party ID based on <code>TB.config.get('baseAppUrl')</code> or <code>window.location.hostname</code>. For localhost, it's "localhost".
*   <code>TB.crypto.registerWebAuthnCredential(registrationData, sing)</code>:
    *   <code>registrationData</code>: <code>{ challenge, userId, username }</code>.
        *   <code>challenge</code>: Server-provided challenge (string, base64url encoded then decoded to ArrayBuffer).
        *   <code>userId</code>: Server-provided user ID (string, base64url encoded then decoded to ArrayBuffer).
        *   <code>username</code>: User's display name.
    *   <code>sing</code>: Additional data (e.g., session token) that might be included in the payload sent to the server.
    *   Calls <code>navigator.credentials.create()</code>.
    *   Returns a promise resolving to the payload object to be sent to the server for <code>/register_user_personal_key</code> (or similar endpoint).
*   <code>TB.crypto.authorizeWebAuthnCredential(rawIdAsBase64, challenge, username)</code>:
    *   <code>rawIdAsBase64</code>: Base64 representation of the credential's rawId (from server).
    *   <code>challenge</code>: Server-provided challenge string.
    *   <code>username</code>: User's display name.
    *   Calls <code>navigator.credentials.get()</code>.
    *   Returns a promise resolving to the payload object to be sent to the server for <code>/validate_persona</code> (or similar endpoint).</p>
<p><strong>Helper Functions:</strong>
*   <code>arrayBufferToBase64(buffer)</code>
*   <code>base64ToArrayBuffer(base64)</code>
*   <code>strToArrayBuffer(str)</code>
*   <code>arrayBufferToStr(arrayBuffer)</code>
*   And others...</p>
<p><strong>Example: Registering a WebAuthn Credential (Passkey)</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Assuming &#39;username&#39; is known and user is authenticated to add a new key</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">registerNewPasskey</span><span class="p">(</span><span class="nx">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 1. Client requests challenge from server for this user</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">challengeRes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">&#39;AuthManager&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;getWebAuthnRegistrationChallenge&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">challengeRes</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ToolBoxError</span><span class="p">.</span><span class="nx">none</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">challengeRes</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span><span class="o">?</span><span class="p">.</span><span class="nx">challengeInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">challengeRes</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;Failed to get registration challenge.&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">challenge</span><span class="p">,</span><span class="w"> </span><span class="nx">userId</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">challengeRes</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">challengeInfo</span><span class="p">;</span><span class="w"> </span><span class="c1">// Server provides its internal userId for WebAuthn</span>

<span class="w">        </span><span class="c1">// 2. Client uses TB.crypto to create credential</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSessionToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getToken</span><span class="p">();</span><span class="w"> </span><span class="c1">// Example for &#39;sing&#39; parameter</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">webAuthnPayload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">crypto</span><span class="p">.</span><span class="nx">registerWebAuthnCredential</span><span class="p">(</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">challenge</span><span class="p">,</span><span class="w"> </span><span class="nx">userId</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nx">currentSessionToken</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 3. Client sends new credential to server for verification and storage</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">registrationResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">&#39;AuthManager&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;completeWebAuthnRegistration&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">webAuthnPayload</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">registrationResult</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ToolBoxError</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Passkey registered successfully!&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="sb">`Passkey registration failed: </span><span class="si">${</span><span class="nx">registrationResult</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;[WebAuthnDemo] Registration error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;An error occurred during passkey registration.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="user-management-tbuser">User Management (<code>TB.user</code>)<a class="headerlink" href="#user-management-tbuser" title="Permanent link">&para;</a></h3>
<p>Manages user authentication state, sessions, and user-specific data.</p>
<p><strong>State:</strong> The user's state (isAuthenticated, username, token, etc.) is stored under <code>TB.state.get('user')</code>.</p>
<p><strong>Methods:</strong>
*   <code>TB.user.init(forceServerFetch = false)</code>: Initializes the user module.
    *   Loads session from <code>localStorage</code> (<code>tbjs_user_session</code>).
    *   If authenticated, validates the session with the server (<code>TB.api.AuthHttpPostData</code>).
    *   Synchronizes <code>userData</code> based on timestamps (<code>tbjs_user_data_timestamp</code>) if <code>forceServerFetch</code> is true or server data is newer.
*   <code>TB.user.signup(username, email, initiationKey, registerAsPersona = false)</code>: Placeholder for signup flow.
*   <code>TB.user.loginWithDeviceKey(username)</code>: Performs login using a locally stored asymmetric key.
    1.  Retrieves private key using <code>TB.crypto.retrievePrivateKey()</code>.
    2.  Requests challenge from <code>CloudM.AuthManager.get_to_sing_data</code>.
    3.  Signs challenge using <code>TB.crypto.signMessage()</code>.
    4.  Validates signature with <code>CloudM.AuthManager.validate_device</code>.
    5.  If successful, updates user state with token and user data.
*   <code>TB.user.loginWithWebAuthn(username)</code>: Performs WebAuthn (passkey) login.
    1.  Requests challenge &amp; rawId from <code>CloudM.AuthManager.get_to_sing_data</code> (<code>personal_key: true</code>).
    2.  Calls <code>TB.crypto.authorizeWebAuthnCredential()</code>.
    3.  Sends assertion to <code>CloudM.AuthManager.validate_persona</code>.
*   <code>TB.user.requestMagicLink(username)</code>: Requests a magic link email via <code>CloudM.AuthManager.get_magic_link_email</code>.
*   <code>TB.user.registerDeviceWithInvitation(username, invitationKey)</code>: Registers a new device using an invitation key.
    1.  Generates new asymmetric keys (<code>TB.crypto.generateAsymmetricKeys()</code>).
    2.  Stores private key (<code>TB.crypto.storePrivateKey()</code>).
    3.  Sends public key and invitation to <code>CloudM.AuthManager.add_user_device</code>.
    4.  Attempts login via <code>loginWithDeviceKey()</code> upon success.
*   <code>TB.user.registerWebAuthnForCurrentUser(username)</code>: Registers a WebAuthn credential for an already authenticated user.
*   <code>TB.user.logout(notifyServer = true)</code>: Logs out the user, clears local session, and optionally notifies the server via <code>TB.api.logoutServer()</code>.
*   <code>TB.user.checkSessionValidity()</code>: Checks if current session token is valid via <code>/IsValidSession</code>.
*   <strong>Getters:</strong>
    *   <code>TB.user.isAuthenticated()</code>
    *   <code>TB.user.getUsername()</code>
    *   <code>TB.user.getUserLevel()</code>
    *   <code>TB.user.getToken()</code>
    *   <code>TB.user.isDeviceRegisteredWithKey()</code>
*   <strong>User Data Management:</strong>
    *   <code>TB.user.getUserData(key)</code>: Gets a specific piece of user data from <code>TB.state.get('user.userData')</code>.
    *   <code>TB.user.setUserData(keyOrObject, value, syncToServer = false)</code>: Sets user data locally. If <code>syncToServer</code> is true, calls <code>syncUserData</code>.
    *   <code>TB.user.syncUserData(updatedFields = null)</code>: Syncs <code>userData</code> (or specified fields) to the server via <code>UserManager.updateUserData</code>.
    *   <code>TB.user.fetchUserData()</code>: Fetches all user data from <code>UserManager.getUserData</code>.</p>
<p><strong>Example: Login and Accessing User Info</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleLogin</span><span class="p">(</span><span class="nx">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">loginResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">loginWithDeviceKey</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">loginResult</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="sb">`Welcome, </span><span class="si">${</span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUsername</span><span class="p">()</span><span class="si">}</span><span class="sb">!`</span><span class="p">);</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">&#39;/dashboard&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="nx">loginResult</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Check if user is logged in before accessing a protected route</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User Level:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUserLevel</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="server-sent-events-tbsse">Server-Sent Events (<code>TB.sse</code>)<a class="headerlink" href="#server-sent-events-tbsse" title="Permanent link">&para;</a></h3>
<p>Manages Server-Sent Event (SSE) connections.</p>
<p><strong>Methods:</strong>
*   <code>TB.sse.connect(url, options = {})</code>: Establishes an SSE connection.
    *   <code>url</code>: The SSE endpoint URL.
    *   <code>options</code>:
        *   <code>eventSourceOptions</code>: Options passed directly to the <code>EventSource</code> constructor (e.g., <code>{ withCredentials: true }</code>).
        *   <code>onOpen</code>: Callback for <code>open</code> event.
        *   <code>onError</code>: Callback for <code>error</code> event.
        *   <code>onMessage</code>: Callback for generic <code>message</code> events.
        *   <code>listeners</code>: An object of <code>{ eventName: handlerFunction }</code> for custom named SSE events.
    *   Emits events like <code>sse:open:&lt;url&gt;</code>, <code>sse:error:&lt;url&gt;</code>, <code>sse:message:&lt;url&gt;</code>, <code>sse:event:&lt;url&gt;:&lt;eventName&gt;</code>.
*   <code>TB.sse.disconnect(url)</code>: Closes a specific SSE connection.
*   <code>TB.sse.disconnectAll()</code>: Closes all active SSE connections.
*   <code>TB.sse.getConnection(url)</code>: Returns the <code>EventSource</code> object for a given URL.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">sseConnection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">sse</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;/api/notifications&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">onOpen</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;SSE connection for notifications opened.&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">onError</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;SSE notifications error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">),</span>
<span class="w">    </span><span class="nx">listeners</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">&#39;new_message&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showInfo</span><span class="p">(</span><span class="sb">`New message: </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="s1">&#39;user_update&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;userDetails&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// To close</span>
<span class="c1">// TB.sse.disconnect(&#39;/api/notifications&#39;);</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="service-worker-tbsw">Service Worker (<code>TB.sw</code>)<a class="headerlink" href="#service-worker-tbsw" title="Permanent link">&para;</a></h3>
<p>Manages the registration and communication with your application's Service Worker.</p>
<p><strong>Configuration (<code>TB.config.serviceWorker</code>):</strong>
*   <code>enabled</code>: (boolean) Master switch for SW registration.
*   <code>url</code>: (string) Path to your <code>sw.js</code> file (default: <code>/sw.js</code>).
*   <code>scope</code>: (string) Scope for the Service Worker (default: <code>/</code>).</p>
<p><strong>Methods:</strong>
*   <code>TB.sw.register()</code>: Registers the Service Worker based on configuration.
    *   Handles <code>updatefound</code> and state changes of the installing worker.
    *   Emits <code>sw:updateAvailable</code> or <code>sw:contentCached</code>.
*   <code>TB.sw.unregister()</code>: Unregisters all active Service Workers for the current origin.
*   <code>TB.sw.sendMessage(message)</code>: Sends a message to the active Service Worker controller and returns a Promise for the response.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// In TB.init config:</span>
<span class="c1">// serviceWorker: { enabled: true, url: &#39;/my-app-sw.js&#39; }</span>

<span class="c1">// tbjs will attempt to register it automatically.</span>

<span class="c1">// Listening for updates</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;sw:updateAvailable&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">registration</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">&#39;A new version is available. Reload to update?&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Logic to skip waiting and activate new SW</span>
<span class="w">        </span><span class="nx">registration</span><span class="p">.</span><span class="nx">waiting</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKIP_WAITING&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="c1">// Usually, you&#39;d listen for &#39;controllerchange&#39; event then reload</span>
<span class="w">        </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;controllerchange&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Sending a message to SW</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">clearAppCacheViaSW</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">sw</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;CLEAR_CACHE&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">cacheName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-data-v1&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;SW Cache Clear Response:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">);</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;App cache cleared by Service Worker.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="sb">`Error communicating with SW: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="utilities-tbutils">Utilities (<code>TB.utils</code>)<a class="headerlink" href="#utilities-tbutils" title="Permanent link">&para;</a></h3>
<p>A collection of general-purpose helper functions.</p>
<p><strong>Methods:</strong>
*   <code>TB.utils.autocomplete(inputElement, array)</code>: Adds basic autocomplete to an input field.
*   <code>TB.utils.debounce(func, delay)</code>: Debounces a function.
*   <code>TB.utils.throttle(func, limit)</code>: Throttles a function.
*   <code>TB.utils.uniqueId(prefix = 'id-')</code>: Generates a simple unique ID.
*   <code>TB.utils.deepClone(obj)</code>: Deep clones an object or array.
*   <code>TB.utils.cleanUrl(url)</code>: Removes protocol from a URL.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">myInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">suggestions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Orange&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Apricot&#39;</span><span class="p">];</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">autocomplete</span><span class="p">(</span><span class="nx">myInput</span><span class="p">,</span><span class="w"> </span><span class="nx">suggestions</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">debouncedSave</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">debounce</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Saving data:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// TB.api.request(...) to save</span>
<span class="p">},</span><span class="w"> </span><span class="mf">500</span><span class="p">);</span>

<span class="nx">myInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">debouncedSave</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">));</span>
</code></pre></div></td></tr></table></div></p>
<hr />
<h2 id="4-ui-system-tbui">4. UI System (<code>TB.ui</code>)<a class="headerlink" href="#4-ui-system-tbui" title="Permanent link">&para;</a></h2>
<p>The <code>TB.ui</code> namespace contains modules and components for managing the user interface.</p>
<h3 id="theme-management-tbuitheme">Theme Management (<code>TB.ui.theme</code>)<a class="headerlink" href="#theme-management-tbuitheme" title="Permanent link">&para;</a></h3>
<p>Manages application themes (light/dark mode) and dynamic backgrounds.</p>
<p><strong>Configuration (<code>TB.config.themeSettings</code>):</strong>
*   <code>defaultPreference</code>: 'light', 'dark', or 'system'.
*   <code>background</code>: Object defining background types and sources.
    *   <code>type</code>: 'color', 'image', '3d', 'none'.
    *   <code>light</code>: <code>{ color: '#hex', image: 'path/to/image.jpg' }</code>
    *   <code>dark</code>: <code>{ color: '#hex', image: 'path/to/image.jpg' }</code>
    *   <code>placeholder</code>: <code>{ image: 'path/to/placeholder.jpg', displayUntil3DReady: true }</code> (used when <code>type</code> is '3d').</p>
<p><strong>Initialization:</strong>
<code>TB.ui.theme.init()</code> is called by <code>TB.init()</code> using <code>TB.config.get('themeSettings')</code>. It:
*   Loads user preference from <code>localStorage</code> or defaults.
*   Sets up a background container div (<code>#appBackgroundContainer</code>) if not present.
*   Applies the initial theme and background.
*   Listens for system theme changes and <code>graphics:initialized</code>/<code>graphics:disposed</code> events to update the background.</p>
<p><strong>Methods:</strong>
*   <code>TB.ui.theme.setPreference(preference)</code>: Sets the theme preference ('light', 'dark', 'system') and saves to <code>localStorage</code>. Updates the theme immediately.
*   <code>TB.ui.theme.togglePreference()</code>: Toggles between 'light' and 'dark' modes. If current preference is 'system', it effectively picks the opposite of the current <em>effective</em> mode.
*   <code>TB.ui.theme.getCurrentMode()</code>: Returns the current active mode ('light' or 'dark').
*   <code>TB.ui.theme.getPreference()</code>: Returns the user's set preference ('light', 'dark', or 'system').
*   <code>TB.ui.theme.getBackgroundConfig()</code>: Returns the current background configuration.</p>
<p><strong>Events:</strong>
*   <code>theme:changed</code>: Emitted with <code>{ mode: 'light'|'dark' }</code> when the effective theme changes.
*   The <code>TB.graphics.updateTheme(mode)</code> method is called internally when the theme changes and graphics are active.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// In your app initialization (TB.init config)</span>
<span class="c1">// themeSettings: {</span>
<span class="c1">//   defaultPreference: &#39;system&#39;,</span>
<span class="c1">//   background: {</span>
<span class="c1">//     type: &#39;image&#39;,</span>
<span class="c1">//     light: { image: &#39;/images/bg-light.jpg&#39;, color: &#39;#E0E0E0&#39; },</span>
<span class="c1">//     dark: { image: &#39;/images/bg-dark.jpg&#39;, color: &#39;#303030&#39; }</span>
<span class="c1">//   }</span>
<span class="c1">// }</span>

<span class="c1">// Toggle theme with a button</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">themeToggleButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;theme-toggle-btn&#39;</span><span class="p">);</span>
<span class="nx">themeToggleButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">theme</span><span class="p">.</span><span class="nx">togglePreference</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// Listen for theme changes to update other UI elements</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;theme:changed&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">eventData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Theme is now:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">eventData</span><span class="p">.</span><span class="nx">mode</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Update icons, specific component styles, etc.</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div>
The background container <code>#appBackgroundContainer</code> is styled to be fixed and behind all other content (<code>z-index: -1</code>). The 3D graphics, if used as a background, are expected to render into <code>#threeDScene</code>.</p>
<h3 id="graphics-tbgraphics">Graphics (<code>TB.graphics</code>)<a class="headerlink" href="#graphics-tbgraphics" title="Permanent link">&para;</a></h3>
<p>Manages 3D rendering using Three.js, often used for dynamic backgrounds.</p>
<p><strong>Initialization:</strong>
<code>TB.graphics.init(canvasContainerSelector, options = {})</code>
*   <code>canvasContainerSelector</code>: A CSS selector for the DOM element where the Three.js canvas will be appended (e.g., <code>#threeDScene</code>).
*   <code>options</code>:
    *   <code>cameraY</code>, <code>cameraZ</code>: Initial camera position.
    *   <code>sierpinskiDepth</code>: Depth for the default Sierpinski tetrahedron animation.
    *   <code>loaderHideDelay</code>: Delay in ms before hiding a <code>.loaderCenter</code> element after graphics init.</p>
<p><strong>Key Features &amp; Methods:</strong>
*   Creates a WebGLRenderer, Scene, and PerspectiveCamera.
*   Builds a default Sierpinski tetrahedron fractal.
*   Adds ambient and point lights.
*   <code>TB.graphics.updateTheme(themeMode)</code>: Adjusts light colors based on 'light' or 'dark' mode. Called automatically by <code>TB.ui.theme</code>.
*   <code>TB.graphics.setSierpinskiDepth(newDepth)</code>: Rebuilds the fractal with new depth.
*   <code>TB.graphics.setAnimationSpeed(x, y, z, factor)</code>: Controls the rotation speed of the main 3D object.
*   <code>TB.graphics.adjustCameraZoom(delta)</code> / <code>TB.graphics.setCameraZoom(value)</code>: Controls camera Z position.
*   Interactive rotation via mouse/touch drag.
*   <strong>Animation Sequences:</strong>
    *   <code>TB.graphics.playAnimationSequence(sequenceString, onComplete, baseSpeed, speedFactor)</code>: Plays a predefined animation sequence.
        *   <code>sequenceString</code>: Colon-separated steps, e.g., <code>"R1+32:P2-51:Y1+15"</code>.
            *   Format: <code>Type(1)Repeat(N)Direction(1)Speed(1)Complexity(1)</code>
            *   Type: <code>R</code> (Roll/X), <code>P</code> (Pan/Z), <code>Y</code> (Yaw/Y), <code>Z</code> (Zoom - placeholder).
            *   Repeat: Number of repetitions.
            *   Direction: <code>+</code> or <code>-</code>.
            *   Speed: 1-9.
            *   Complexity: 1-9 (influences duration).
    *   <code>TB.graphics.stopAnimationSequence()</code>: Stops the current sequence.
*   <code>TB.graphics.pause()</code> / <code>TB.graphics.resume()</code>: Pause/resume rendering loop.
*   <code>TB.graphics.dispose()</code>: Cleans up Three.js resources and removes event listeners.</p>
<p><strong>Events:</strong>
*   <code>graphics:initialized</code>: Emitted when graphics setup is complete. <code>TB.ui.theme</code> listens to this.
*   <code>graphics:disposed</code>: Emitted on cleanup.</p>
<p><strong>Example: Initializing 3D Background</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- In your HTML --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;myThreeCanvasContainer&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// In your TB.init config:</span>
<span class="c1">// themeSettings: {</span>
<span class="c1">//   background: {</span>
<span class="c1">//     type: &#39;3d&#39;</span>
<span class="c1">//   }</span>
<span class="c1">// }</span>

<span class="c1">// If TB.ui.theme is configured with type &#39;3d&#39;, it will attempt to initialize graphics automatically.</span>
<span class="c1">// However, you might need to ensure the container exists and is ready.</span>
<span class="c1">// Or, initialize manually if you don&#39;t use themeSettings.background for it:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">TB</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;themeSettings.background.type&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;3d&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">graphicsContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="s1">&#39;#myThreeCanvasContainer&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sierpinskiDepth</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span>
<span class="w">            </span><span class="nx">cameraZ</span><span class="o">:</span><span class="w"> </span><span class="mf">8</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">graphicsContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;3D Graphics initialized for background.&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Example: Play an animation sequence</span>
<span class="c1">// TB.graphics.playAnimationSequence(&quot;R5+55:P2-22&quot;, () =&gt; console.log(&quot;Sequence done!&quot;));</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="htmx-integration-tbuihtmxintegration">HTMX Integration (<code>TB.ui.htmxIntegration</code>)<a class="headerlink" href="#htmx-integration-tbuihtmxintegration" title="Permanent link">&para;</a></h3>
<p>Manages interactions with HTMX.</p>
<p><strong>Initialization:</strong>
<code>TB.ui.htmxIntegration.init()</code> is called by <code>TB.init()</code>. It sets up global event listeners for HTMX events.</p>
<p><strong>Event Handling:</strong>
*   <strong><code>htmx:afterSwap</code></strong>:
    *   Triggered after HTMX swaps content into the DOM.
    *   Calls <code>TB.ui.processDynamicContent(event.detail.target)</code> to initialize <code>tbjs</code> components, run scripts, and apply Markdown rendering on the newly added content.
*   <strong><code>htmx:afterRequest</code></strong>:
    *   Triggered after an HTMX AJAX request completes.
    *   If the response is JSON:
        *   It attempts to wrap the JSON data in a <code>TB.api.Result</code> object.
        *   Logs errors and shows a <code>TB.ui.Toast</code> if the <code>Result</code> indicates an error.
        *   If the <code>Result.result.data_to</code> is <code>TB.api.ToolBoxInterfaces.remote</code> and contains a <code>render</code> command, it emits a <code>ws:renderCommand</code> event (for potential WebSocket/SSE driven rendering updates).
        *   Emits an <code>htmx:jsonResponse</code> event with the processed data.
    *   If the response is HTML, HTMX handles the swap, and <code>htmx:afterSwap</code> will subsequently fire.</p>
<p><strong>Usage:</strong> This module works mostly in the background. Ensure your HTMX-powered components return appropriate HTML fragments or structured JSON that <code>tbjs</code> can understand.</p>
<p><strong>Example: HTMX with JSON Response</strong>
Backend (Python/Flask example) returning JSON that might trigger a toast or update state:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/htmx/submit-form&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">submit_form_htmx</span><span class="p">():</span>
    <span class="c1"># ... process form ...</span>
    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;data_to&quot;</span><span class="p">:</span> <span class="s2">&quot;API&quot;</span><span class="p">,</span> <span class="c1"># Or &quot;CLIENT&quot;</span>
                <span class="s2">&quot;data_info&quot;</span><span class="p">:</span> <span class="s2">&quot;Form submitted successfully.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;new_id&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Item created.&quot;</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;exec_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Success&quot;</span><span class="p">}</span>
        <span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;InputError&quot;</span><span class="p">,</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;exec_code&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid data provided.&quot;</span><span class="p">}</span>
        <span class="p">}),</span> <span class="mi">400</span>
</code></pre></div></td></tr></table></div>
JavaScript to listen for custom JSON processing:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;htmx:jsonResponse&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">detail</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">tbResult</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;HTMX JSON Response:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">tbResult</span><span class="p">.</span><span class="nx">get</span><span class="p">());</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">tbResult</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">tbResult</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showInfo</span><span class="p">(</span><span class="nx">tbResult</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="dynamic-content-processing">Dynamic Content Processing<a class="headerlink" href="#dynamic-content-processing" title="Permanent link">&para;</a></h3>
<p><code>TB.ui.processDynamicContent(parentElement, options = {})</code></p>
<p>This function is crucial when new HTML is added to the DOM, for example, by <code>TB.router</code> or HTMX after an <code>hx-swap</code>.</p>
<ul>
<li><code>parentElement</code>: The DOM element (or a wrapper around) the newly added content.</li>
<li><code>options</code>:<ul>
<li><code>addScripts</code> (boolean, default <code>true</code>): Whether to process <code>&lt;script&gt;</code> tags.</li>
<li><code>scriptCache</code> (Set, default <code>new Set()</code>): A Set to keep track of loaded script URLs to prevent re-execution. <code>TB.router</code> passes its cache.</li>
</ul>
</li>
</ul>
<p><strong>Actions Performed:</strong>
1.  Calls <code>window.htmx.process(parentElement)</code> to initialize HTMX attributes on the new content.
2.  Handles <code>&lt;script&gt;</code> tags (see <code>TB.router</code> script handling for details).
3.  Initializes <code>tbjs</code> UI components found within <code>parentElement</code> (e.g., by looking for specific data attributes or classes).
4.  Calls <code>TB.ui.MarkdownRenderer.renderAllIn(parentElement)</code> if applicable.</p>
<p><strong>Usage:</strong>
Generally, you don't need to call this manually if content is loaded via <code>TB.router</code> or standard HTMX swaps, as <code>TB.router</code> and <code>TB.ui.htmxIntegration</code> handle it. However, if you manually inject HTML that needs <code>tbjs</code> processing:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">newContentContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;dynamic-area&#39;</span><span class="p">);</span>
<span class="nx">newContentContainer</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;... new HTML with tbjs components, markdown, or scripts ...&#39;</span><span class="p">;</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">processDynamicContent</span><span class="p">(</span><span class="nx">newContentContainer</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h3>
<p><code>tbjs</code> provides a set of pre-built UI components. They generally use Tailwind CSS classes for styling (often prefixed with <code>tb-</code> as per <code>tailwind.config.js</code>) and can be initialized programmatically or sometimes via data attributes.</p>
<h4 id="modal-tbuimodal">Modal (<code>TB.ui.Modal</code>)<a class="headerlink" href="#modal-tbuimodal" title="Permanent link">&para;</a></h4>
<p>Displays content in a modal dialog.</p>
<p><strong>Options:</strong>
*   <code>content</code>: HTML string or HTMLElement for the modal body.
*   <code>title</code>: (string) Optional modal title.
*   <code>closeOnOutsideClick</code>: (boolean, default <code>true</code>)
*   <code>closeOnEsc</code>: (boolean, default <code>true</code>)
*   <code>buttons</code>: Array of button config objects: <code>{ text, action, variant, className, size }</code>.
*   <code>onOpen</code>, <code>onClose</code>, <code>beforeClose</code>: Callbacks. <code>beforeClose</code> can return <code>false</code> to prevent closing.
*   <code>maxWidth</code>: (string, Tailwind class, default <code>'max-w-lg'</code>)
*   <code>modalId</code>: Custom ID for the modal element.
*   <code>customClasses</code>: Object to override default Tailwind classes for <code>overlay</code>, <code>modalContainer</code>, etc.</p>
<p><strong>Methods:</strong>
*   <code>modal.show()</code>: Displays the modal.
*   <code>modal.close()</code>: Closes the modal.</p>
<p><strong>Static Method:</strong>
*   <code>TB.ui.Modal.show(options)</code>: Creates and shows a modal.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Modal</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Confirm Action&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;p&gt;Are you sure you want to delete this item?&lt;/p&gt;&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">maxWidth</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;max-w-md&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Tailwind class</span>
<span class="w">    </span><span class="nx">buttons</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cancel&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;secondary&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Uses TB.ui.Button styling</span>
<span class="w">            </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">modal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">modal</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Delete&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;danger&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">modal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Item deleted!&#39;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">modal</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">                </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Item deleted successfully.&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nx">onOpen</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Confirmation modal opened.&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">onClose</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Confirmation modal closed.&#39;</span><span class="p">)</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="toast-tbuitoast">Toast (<code>TB.ui.Toast</code>)<a class="headerlink" href="#toast-tbuitoast" title="Permanent link">&para;</a></h4>
<p>Displays small, non-blocking notification messages.</p>
<p><strong>Options:</strong>
*   <code>message</code>: (string) The message content.
*   <code>type</code>: <code>'info'</code>, <code>'success'</code>, <code>'warning'</code>, <code>'error'</code> (default <code>'info'</code>).
*   <code>duration</code>: (number) Milliseconds to display (0 for sticky, default <code>5000</code>).
*   <code>position</code>: <code>'top-right'</code>, <code>'top-center'</code>, etc. (default <code>'top-right'</code>).
*   <code>title</code>: (string) Optional title.
*   <code>actions</code>: Array of action objects: <code>[{ text: 'Undo', action: () =&gt; { /* ... */ } }]</code>.
*   <code>icon</code>: (boolean, default <code>true</code>) Show type-specific icon.
*   <code>closable</code>: (boolean, default <code>true</code>) Show a close button.
*   <code>customClasses</code>: For overriding default styling of toast elements.</p>
<p><strong>Static Methods:</strong>
*   <code>TB.ui.Toast.showInfo(message, options)</code>
*   <code>TB.ui.Toast.showSuccess(message, options)</code>
*   <code>TB.ui.Toast.showWarning(message, options)</code>
*   <code>TB.ui.Toast.showError(message, options)</code>
*   <code>TB.ui.Toast.hideAll()</code></p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Profile updated successfully!&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="mf">3000</span><span class="p">,</span>
<span class="w">    </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bottom-center&#39;</span>
<span class="p">});</span>

<span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="s1">&#39;Failed to connect to server.&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Network Error&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="c1">// Sticky</span>
<span class="w">    </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Retry&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Retry clicked!&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="loader-tbuiloader">Loader (<code>TB.ui.Loader</code>)<a class="headerlink" href="#loader-tbuiloader" title="Permanent link">&para;</a></h4>
<p>Displays a loading indicator.</p>
<p><strong>Options:</strong>
*   <code>text</code>: (string, default <code>'Loading...'</code>) Text displayed below the spinner.
*   <code>fullscreen</code>: (boolean, default <code>true</code>) If true, covers the whole page.
*   <code>customSpinnerHtml</code>: (string) Custom HTML for the spinner.
*   <code>customClasses</code>: For overriding default styling of overlay, spinner container, text.</p>
<p><strong>Static Methods:</strong>
*   <code>TB.ui.Loader.show(textOrOptions)</code>: Shows a fullscreen loader. Returns the loader DOM element.
*   <code>TB.ui.Loader.hide(loaderElement)</code>: Hides a specific loader element or the default fullscreen loader.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Show default fullscreen loader</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">myLoader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;Processing your request...&#39;</span><span class="p">);</span>

<span class="c1">// Simulate an async operation</span>
<span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">myLoader</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hide the specific loader instance</span>
<span class="w">    </span><span class="c1">// Or TB.ui.Loader.hide(); to hide the default ID loader</span>
<span class="p">},</span><span class="w"> </span><span class="mf">2000</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<em>Note: The Loader component injects its own minimal CSS for the spinner animation (<code>tbjs_spin</code>) and basic layout if not overridden by Tailwind classes.</em></p>
<h4 id="button-tbuibutton">Button (<code>TB.ui.Button</code>)<a class="headerlink" href="#button-tbuibutton" title="Permanent link">&para;</a></h4>
<p>A class to create styled button elements programmatically.</p>
<p><strong>Options:</strong>
*   <code>text</code>: (string, default <code>'Button'</code>)
*   <code>action</code>: (function) Click handler <code>(event, buttonInstance) =&gt; {}</code>.
*   <code>variant</code>: <code>'primary'</code>, <code>'secondary'</code>, <code>'danger'</code>, <code>'outline'</code>, <code>'ghost'</code>, <code>'link'</code> (default <code>'primary'</code>).
*   <code>size</code>: <code>'sm'</code>, <code>'md'</code>, <code>'lg'</code> (default <code>'md'</code>).
*   <code>type</code>: <code>'button'</code>, <code>'submit'</code>, <code>'reset'</code> (default <code>'button'</code>).
*   <code>disabled</code>: (boolean, default <code>false</code>)
*   <code>isLoading</code>: (boolean, default <code>false</code>)
*   <code>iconLeft</code>, <code>iconRight</code>: HTML string for icons (e.g., Material Symbol span).
*   <code>customClasses</code>: Additional CSS classes.
*   <code>attributes</code>: Object of custom attributes.</p>
<p><strong>Instance Methods:</strong>
*   <code>setText(text)</code>
*   <code>setLoading(isLoading, updateDom = true)</code>
*   <code>setDisabled(isDisabled, updateDom = true)</code>
*   <code>element</code>: The DOM element of the button.</p>
<p><strong>Static Method:</strong>
*   <code>TB.ui.Button.create(text, action, options)</code>: Creates a button and returns its DOM element.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">submitBtnElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Button</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">&#39;Submit Form&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">btnInstance</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">btnInstance</span><span class="p">.</span><span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// await someApiCall();</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Form submitted!&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="s1">&#39;Submission failed.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">btnInstance</span><span class="p">.</span><span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">variant</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;primary&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lg&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">iconLeft</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;span class=&quot;material-symbols-outlined&quot;&gt;save&lt;/span&gt;&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">attributes</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;data-form-id&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user-reg-form&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;form-actions&#39;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">submitBtnElement</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="darkmodetoggle-tbuidarkmodetoggle">DarkModeToggle (<code>TB.ui.DarkModeToggle</code>)<a class="headerlink" href="#darkmodetoggle-tbuidarkmodetoggle" title="Permanent link">&para;</a></h4>
<p>Manages a dark mode toggle button/UI element, syncing with <code>TB.ui.theme</code>.</p>
<p><strong>Options (passed to constructor or <code>TB.ui.DarkModeToggle.init()</code>):</strong>
*   <code>containerSelector</code>: (string, default <code>'#darkModeToggleContainer'</code>) The main clickable element or wrapper.
*   <code>iconSelector</code>: (string, default <code>.tb-toggle-icon'</code>) Selector for the icon element (e.g., a <code>&lt;span&gt;</code> for Material Symbols).
*   <code>checkboxSelector</code>: (string, default <code>'#darkModeSwitch'</code>) Selector for an optional underlying <code>&lt;input type="checkbox"&gt;</code>.
*   <code>lightModeIconClass</code>, <code>darkModeIconClass</code>: Text content for the icon (e.g., Material Symbol names like <code>'light_mode'</code>, <code>'dark_mode'</code>).
*   <code>rotationActiveDeg</code>, <code>rotationInactiveDeg</code>, <code>rotationTransition</code>: For icon rotation animation.</p>
<p><strong>Initialization:</strong>
*   <code>new TB.ui.DarkModeToggle(options)</code>
*   <code>TB.ui.DarkModeToggle.init(optionsOrSelector)</code>: Static convenience method.</p>
<p><strong>HTML Structure Examples:</strong></p>
<ol>
<li>
<p><strong>Icon-only Toggle (recommended):</strong>
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;darkModeToggleContainer&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle dark mode&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-p-2 tb-rounded-full hover:tb-bg-gray-200 dark:hover:tb-bg-gray-700&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;material-symbols-outlined tb-toggle-icon&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
    Initialize with: <code>TB.ui.DarkModeToggle.init();</code> (uses default selectors) or <code>TB.ui.DarkModeToggle.init('#darkModeToggleContainer');</code></p>
</li>
<li>
<p><strong>Checkbox-driven Toggle:</strong>
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;darkModeSwitch&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;darkModeToggleContainer&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-inline-flex tb-items-center tb-cursor-pointer&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;darkModeSwitch&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-sr-only tb-peer&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-relative tb-w-11 tb-h-6 tb-bg-gray-200 peer-focus:tb-outline-none peer-focus:tb-ring-4 peer-focus:tb-ring-blue-300 dark:peer-focus:tb-ring-blue-800 tb-rounded-full peer dark:tb-bg-gray-700 peer-checked:tb-after:tb-translate-x-full rtl:peer-checked:tb-after:-tb-translate-x-full peer-checked:tb-after:tb-border-white tb-after:tb-content-[&#39;&#39;] tb-after:tb-absolute tb-after:tb-top-[2px] tb-after:tb-start-[2px] tb-after:tb-bg-white tb-after:tb-border-gray-300 tb-after:tb-border tb-after:tb-rounded-full tb-after:tb-h-5 tb-after:tb-w-5 tb-after:tb-transition-all dark:tb-border-gray-600 peer-checked:tb-bg-blue-600&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;material-symbols-outlined tb-toggle-icon tb-ml-3 tb-text-gray-900 dark:tb-text-gray-300&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
    Initialize with: <code>TB.ui.DarkModeToggle.init({ containerSelector: '#darkModeToggleContainer', iconSelector: '.tb-toggle-icon', checkboxSelector: '#darkModeSwitch' });</code></p>
</li>
</ol>
<p><strong>Functionality:</strong>
*   Updates its visual state (icon, checkbox checked status) based on <code>TB.ui.theme.getCurrentMode()</code>.
*   Listens for clicks (on container or changes on checkbox) to call <code>TB.ui.theme.setPreference()</code> or <code>TB.ui.theme.togglePreference()</code>.
*   Reacts to <code>theme:changed</code> events to keep its visual state synchronized.</p>
<h4 id="cookiebanner-tbuicookiebanner">CookieBanner (<code>TB.ui.CookieBanner</code>)<a class="headerlink" href="#cookiebanner-tbuicookiebanner" title="Permanent link">&para;</a></h4>
<p>Displays a cookie consent banner and optional settings modal.</p>
<p><strong>Options:</strong>
*   <code>title</code>, <code>message</code>, <code>termsLink</code>, <code>termsLinkText</code>, <code>acceptMinimalText</code>, <code>showAdvancedOptions</code>, <code>advancedOptionsText</code>: Text and behavior customization.
*   <code>onConsent</code>: Callback <code>(consentSettings) =&gt; {}</code> triggered when consent is given/updated.
*   <code>customClasses</code>: For styling banner, modal, etc.</p>
<p><strong>Static Method:</strong>
*   <code>TB.ui.CookieBanner.show(options)</code>: Creates and displays the banner if no consent is found in <code>localStorage</code> (<code>tbjs_cookie_consent</code>).
*   <code>TB.ui.CookieBanner.getConsent()</code>: Retrieves current consent status from <code>localStorage</code>.</p>
<p><strong>Functionality:</strong>
*   Shows a banner at the bottom of the page.
*   Allows accepting recommended settings or opening a modal for granular control (Essential, Preferences, Analytics).
*   Saves consent to <code>localStorage</code>.
*   Emits <code>cookieConsent:updated</code> event with consent settings: <code>{ essential, preferences, analytics, source }</code>.</p>
<p><strong>Example:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// This can be called early in your application setup</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">CookieBanner</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Our Cookie Policy&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;We use cookies to improve your experience. By clicking &quot;Accept&quot;, you agree to our use of cookies.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">termsLink</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/privacy-policy&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onConsent</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Cookie consent given:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">settings</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">analytics</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Initialize analytics tools</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Check consent later</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">consent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">CookieBanner</span><span class="p">.</span><span class="nx">getConsent</span><span class="p">();</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">consent</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">consent</span><span class="p">.</span><span class="nx">analytics</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="markdownrenderer-tbuimarkdownrenderer">MarkdownRenderer (<code>TB.ui.MarkdownRenderer</code>)<a class="headerlink" href="#markdownrenderer-tbuimarkdownrenderer" title="Permanent link">&para;</a></h4>
<p>Renders Markdown content to HTML, with optional syntax highlighting using <code>highlight.js</code>.</p>
<p><strong>Prerequisites:</strong>
*   <code>marked.js</code> (e.g., <code>window.marked</code>) must be globally available.
*   <code>highlight.js</code> (e.g., <code>window.hljs</code>) must be globally available for syntax highlighting.
*   <code>marked-highlight</code> (e.g., <code>window.markedHighlight</code>) if using the extension for <code>hljs</code>.</p>
<p><strong>Methods:</strong>
*   <code>TB.ui.MarkdownRenderer.init()</code>: Initializes <code>marked</code> with <code>highlight.js</code>. Called automatically on first render if needed, or can be called explicitly.
*   <code>TB.ui.MarkdownRenderer.render(markdownString)</code>: Converts a Markdown string to HTML.
*   <code>TB.ui.MarkdownRenderer.renderElement(element)</code>: Renders the content of a DOM element (if it has class <code>.markdown</code> and not already rendered). Adds Tailwind Prose classes.
*   <code>TB.ui.MarkdownRenderer.renderAllIn(parentElement)</code>: Finds all elements with class <code>.markdown</code> within <code>parentElement</code> (that haven't been rendered yet) and renders them.</p>
<p><strong>Usage:</strong>
Typically used by <code>TB.ui.processDynamicContent</code> when new HTML containing elements with the class <code>markdown</code> is added to the DOM.</p>
<p><strong>Example:</strong>
HTML:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;markdown&quot;</span><span class="p">&gt;</span>
# My Markdown Title

This is some **bold** text and a [link](https://example.com).

```javascript
console.log(&#39;This is JavaScript code&#39;);
</code></pre></div></td></tr></table></div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>JavaScript (rendering is often automatic after content swap):
```javascript
// If you add markdown content dynamically outside of router/HTMX swaps:
const myDiv = document.createElement(&#39;div&#39;);
myDiv.className = &#39;markdown&#39;;
myDiv.textContent = &#39;## Subtitle\n* Item 1\n* Item 2&#39;;
document.body.appendChild(myDiv);
TB.ui.MarkdownRenderer.renderElement(myDiv); // Or TB.ui.MarkdownRenderer.renderAllIn(document.body);
</code></pre></div></td></tr></table></div>
The rendered output will be styled with Tailwind Prose classes (<code>prose dark:prose-invert max-w-none</code>).</p>
<h4 id="autocompletewidget-tbuiautocompletewidget">AutocompleteWidget (<code>TB.ui.AutocompleteWidget</code>)<a class="headerlink" href="#autocompletewidget-tbuiautocompletewidget" title="Permanent link">&para;</a></h4>
<p>Provides autocomplete functionality for input fields.</p>
<p><strong>Options:</strong>
*   <code>source</code>: Array of strings, or a function <code>(inputValue) =&gt; Promise&lt;string[]&gt;</code> or <code>(inputValue) =&gt; string[]</code>.
*   <code>minLength</code>: (number, default <code>1</code>) Minimum characters to type before suggestions appear.
*   <code>onSelect</code>: Callback <code>(value, inputElement) =&gt; {}</code> when an item is selected.
*   <code>customClasses</code>: Object to customize Tailwind classes for <code>list</code>, <code>item</code>, <code>activeItem</code>, <code>highlight</code>.</p>
<p><strong>Initialization:</strong>
*   <code>new TB.ui.AutocompleteWidget(inputElement, options)</code>
*   <code>TB.ui.AutocompleteWidget.initAll(selector = 'input[data-tb-autocomplete]')</code>: Initializes for all matching elements.
    *   Uses <code>data-tb-autocomplete-source</code> attribute (JSON array or global function name) if present.</p>
<p><strong>Example:</strong>
HTML:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-relative&quot;</span><span class="p">&gt;</span> <span class="cm">&lt;!-- Autocomplete list will be positioned relative to this --&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;myAutocompleteInput&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-border tb-p-2 tb-w-full&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search...&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-relative&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">data-tb-autocomplete</span> <span class="na">data-tb-autocomplete-source</span><span class="o">=</span><span class="s">&#39;[&quot;Apple&quot;, &quot;Banana&quot;, &quot;Cherry&quot;]&#39;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-border tb-p-2 tb-w-full&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Fruit Search...&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
JavaScript:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">acInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;myAutocompleteInput&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">mySourceFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">term</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// In a real app, fetch from an API</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;JavaScript&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Java&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Python&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;PHP&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Perl&#39;</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">term</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()));</span>
<span class="p">};</span>

<span class="ow">new</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">AutocompleteWidget</span><span class="p">(</span><span class="nx">acInput</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="nx">mySourceFunction</span><span class="p">,</span>
<span class="w">    </span><span class="nx">minLength</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onSelect</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">el</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Selected: </span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb"> from input:`</span><span class="p">,</span><span class="w"> </span><span class="nx">el</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Initialize declarative autocomplete inputs</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">AutocompleteWidget</span><span class="p">.</span><span class="nx">initAll</span><span class="p">();</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="navmenu-tbuinavmenu">NavMenu (<code>TB.ui.NavMenu</code>)<a class="headerlink" href="#navmenu-tbuinavmenu" title="Permanent link">&para;</a></h4>
<p>Manages a responsive navigation menu, typically a slide-in or modal menu for mobile.</p>
<p><strong>Options:</strong>
*   <code>triggerSelector</code>: (string, default <code>'#links'</code>) Selector for the menu toggle button.
*   <code>menuContentHtml</code>: (string) HTML content for the menu.
*   <code>menuId</code>: (string, default <code>'tb-nav-menu-modal'</code>) ID for the menu container.
*   <code>openIconClass</code>, <code>closeIconClass</code>: Material Symbols class names for the toggle icon.
*   <code>customClasses</code>: For styling <code>overlay</code>, <code>menuContainer</code>, <code>iconContainer</code>.</p>
<p><strong>HTML Structure Expectation (for default trigger):</strong>
The trigger element (e.g., <code>#links</code>) should ideally contain a <code>&lt;span&gt;</code> (often with <code>class="material-symbols-outlined"</code>) for the icon. If empty, the component will append one. The menu itself is appended to an element with <code>id="Nav-Main"</code>.</p>
<p><strong>Example HTML:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Nav-Main&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-bg-gray-800 tb-text-white tb-p-4 tb-flex tb-justify-between tb-items-center&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-text-xl tb-font-bold&quot;</span><span class="p">&gt;</span>MyApp<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;menuTrigger&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-p-2 md:tb-hidden&quot;</span><span class="p">&gt;</span> <span class="cm">&lt;!-- md:hidden to hide on larger screens --&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;material-symbols-outlined&quot;</span><span class="p">&gt;</span>menu<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden md:tb-flex tb-space-x-4&quot;</span><span class="p">&gt;</span> <span class="cm">&lt;!-- Desktop links --&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/page1&quot;</span><span class="p">&gt;</span>Page 1<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/page2&quot;</span><span class="p">&gt;</span>Page 2<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<strong>Example JavaScript:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Initialize the NavMenu</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">navMenu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">NavMenu</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
<span class="w">    </span><span class="nx">triggerSelector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#menuTrigger&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Custom trigger</span>
<span class="w">    </span><span class="nx">menuContentHtml</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;ul class=&quot;tb-space-y-2 tb-p-4&quot;&gt;</span>
<span class="sb">            &lt;li&gt;&lt;a href=&quot;/home&quot; class=&quot;tb-block tb-p-2 hover:tb-bg-gray-700 tb-rounded&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;</span>
<span class="sb">            &lt;li&gt;&lt;a href=&quot;/about&quot; class=&quot;tb-block tb-p-2 hover:tb-bg-gray-700 tb-rounded&quot;&gt;About&lt;/a&gt;&lt;/li&gt;</span>
<span class="sb">            &lt;li&gt;&lt;a href=&quot;/contact&quot; class=&quot;tb-block tb-p-2 hover:tb-bg-gray-700 tb-rounded&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;</span>
<span class="sb">        &lt;/ul&gt;</span>
<span class="sb">    `</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// customize classes if needed, e.g., for a different background:</span>
<span class="w">    </span><span class="c1">// customClasses: {</span>
<span class="w">    </span><span class="c1">//   menuContainer: &#39;fixed top-0 left-0 h-full w-64 sm:w-72 bg-neutral-800 shadow-xl z-[1041] transform -translate-x-full transition-transform duration-300 ease-in-out text-white&#39;,</span>
<span class="w">    </span><span class="c1">// }</span>
<span class="p">});</span>

<span class="c1">// The menu links will automatically close the menu upon navigation if handled by TB.router.</span>
</code></pre></div></td></tr></table></div></p>
<hr />
<h2 id="5-usage-examples">5. Usage Examples<a class="headerlink" href="#5-usage-examples" title="Permanent link">&para;</a></h2>
<h3 id="basic-application-setup">Basic Application Setup<a class="headerlink" href="#basic-application-setup" title="Permanent link">&para;</a></h3>
<p>This example shows a minimal setup to get <code>tbjs</code> running with a simple home page.</p>
<p><strong><code>index.html</code>:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>tbjs App<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;path/to/tbjs/dist/tbjs.css&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;your-app-styles.css&quot;</span><span class="p">&gt;</span> <span class="cm">&lt;!-- Your app specific styles --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/htmx.org@2.0.0/dist/htmx.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;path/to/tbjs/dist/tbjs.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/home&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/about&quot;</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">main</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app-root&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
<span class="w">                </span><span class="nx">appRootId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-root&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">baseApiUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/api&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">logLevel</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;debug&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="c1">// Default initial navigation will be to current path or /index.html handled by router</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></p>
<p><strong><code>/web/pages/home.html</code></strong> (assuming <code>baseFileUrl</code> allows fetching this via <code>/home</code> or similar)
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome to the Home Page!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This content was loaded by tbjs router.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">hx-get</span><span class="o">=</span><span class="s">&quot;/api/time&quot;</span> <span class="na">hx-target</span><span class="o">=</span><span class="s">&quot;#time-div&quot;</span><span class="p">&gt;</span>Get Server Time<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;time-div&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
*   <code>TB.init()</code> sets up the router, which loads the initial page content (e.g., based on URL, or defaults to <code>/index.html</code> which might then redirect or show base content).
*   Router intercepts clicks on <code>&lt;a&gt;</code> tags.
*   HTMX integration is active.</p>
<h3 id="fetching-data-and-updating-state">Fetching Data and Updating State<a class="headerlink" href="#fetching-data-and-updating-state" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// products.js</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadAndDisplayProducts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;Loading products...&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;list&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s1">&#39;GET&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ToolBoxError</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;shop.products&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="p">);</span>
<span class="w">        </span><span class="nx">renderProductList</span><span class="p">(</span><span class="nx">products</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="s1">&#39;Failed to load products: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">help_text</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">renderProductList</span><span class="p">(</span><span class="nx">products</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;product-list-container&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">container</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;ul class=&quot;tb-list-disc tb-pl-5&quot;&gt;</span>
<span class="sb">            </span><span class="si">${</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`&lt;li class=&quot;tb-mb-2&quot;&gt;</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> - $</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">price</span><span class="si">}</span><span class="sb">&lt;/li&gt;`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span>
<span class="sb">        &lt;/ul&gt;</span>
<span class="sb">    `</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Listen for state changes to re-render if needed elsewhere</span>
<span class="nx">TB</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;state:changed:shop.products&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newProducts</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Potentially update other parts of the UI, or just log</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Product list updated in state:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newProducts</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Initial load</span>
<span class="c1">// loadAndDisplayProducts(); // Call this when the relevant view is loaded</span>
</code></pre></div></td></tr></table></div>
<h3 id="client-side-routing">Client-Side Routing<a class="headerlink" href="#client-side-routing" title="Permanent link">&para;</a></h3>
<p>The router automatically handles link clicks and browser navigation.</p>
<p><strong><code>/web/pages/about.html</code>:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>About Us<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the about page, loaded dynamically by the router.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="c1">// This script will be executed when about.html is loaded</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;About page script executed!&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;[AboutPage] Loaded and script ran.&#39;</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
*   When a user clicks <code>&lt;a href="/about"&gt;About&lt;/a&gt;</code>, <code>TB.router</code> fetches <code>/web/pages/about.html</code> (assuming <code>baseFileUrl</code> + <code>/about</code> maps to it) and injects its content into <code>#app-root</code>.
*   The inline script in <code>about.html</code> is executed.</p>
<h3 id="displaying-a-modal">Displaying a Modal<a class="headerlink" href="#displaying-a-modal" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;show-info-modal&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Modal</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
<span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Important Information&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">            &lt;p&gt;This is some important information presented in a modal.&lt;/p&gt;</span>
<span class="sb">            &lt;p&gt;Current time from state: </span><span class="si">${</span><span class="nx">TB</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;app.currentTime&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Not set&#39;</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
<span class="sb">        `</span><span class="p">,</span>
<span class="w">        </span><span class="nx">buttons</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;OK&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">modal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">modal</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="w"> </span><span class="nx">variant</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;primary&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="user-authentication-flow">User Authentication Flow<a class="headerlink" href="#user-authentication-flow" title="Permanent link">&para;</a></h3>
<p>A simplified example of a device key login.</p>
<p><strong>HTML for Login:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- login.html --&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Login with Device Key<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Username&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-border tb-p-2&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;loginButton&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tb-bg-blue-500 tb-text-white tb-p-2 tb-rounded&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;login-status&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>JavaScript for login.html (or global script managing this view):</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Assuming this script runs when login.html is loaded</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Or use TB.events router:contentProcessed</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">loginButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;loginButton&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">usernameInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">statusDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;login-status&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">loginButton</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">loginButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">usernameInput</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">statusDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Please enter a username.&#39;</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nx">statusDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Attempting login...&#39;</span><span class="p">;</span>
<span class="w">            </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;Logging in...&#39;</span><span class="p">);</span>

<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">loginWithDeviceKey</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="w">                </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">statusDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Login successful! Welcome </span><span class="si">${</span><span class="nx">TB</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUsername</span><span class="p">()</span><span class="si">}</span><span class="sb">.`</span><span class="p">;</span>
<span class="w">                    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showSuccess</span><span class="p">(</span><span class="s1">&#39;Login successful!&#39;</span><span class="p">);</span>
<span class="w">                    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">&#39;/dashboard&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Navigate to a protected area</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">statusDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Login failed: </span><span class="si">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">                    </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">showError</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">TB</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">Loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
<span class="w">                </span><span class="nx">statusDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Login error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">                </span><span class="nx">TB</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Login process error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div></td></tr></table></div></p>
<hr />
<h2 id="6-styling-with-tailwind-css">6. Styling with Tailwind CSS<a class="headerlink" href="#6-styling-with-tailwind-css" title="Permanent link">&para;</a></h2>
<p><code>tbjs</code> components are designed to be styled with Tailwind CSS. The framework includes a <code>tailwind.config.js</code> and <code>postcss.config.js</code>.</p>
<p><strong>Key Points:</strong>
*   <strong>Prefix:</strong> The provided <code>tailwind.config.js</code> uses <code>prefix: 'tb-'</code>. This means all Tailwind utility classes used internally by <code>tbjs</code> components will be prefixed (e.g., <code>tb-bg-blue-500</code>, <code>tb-text-lg</code>). This helps avoid conflicts with your application's own Tailwind classes if it doesn't use a prefix or uses a different one.
*   <strong>CSS Variables:</strong> The configuration defines CSS variables for theming (e.g., <code>--tb-color-primary-500</code>, <code>--tb-color-background</code>). These are used in the <code>theme.extend.colors</code> section of <code>tailwind.config.js</code> and in <code>tbjs-main.css</code>. This allows themes (light/dark) to be easily applied and customized.
*   <strong><code>tbjs-main.css</code>:</strong> This file imports Tailwind utilities and defines the base CSS variables and some default styles for components like the Loader.
*   <strong>Customization:</strong> You can customize the <code>tbjs</code> Tailwind configuration (<code>tbjs/tailwind.config.js</code>) or integrate its plugin settings into your main application's Tailwind config.</p>
<p><strong>Using <code>tbjs</code> Tailwind Config in Your Project:</strong>
If your project also uses Tailwind CSS, you can either:
1.  <strong>Run two PostCSS processes</strong>: One for <code>tbjs</code> (using its config) and one for your app (using your app's config).
2.  <strong>Merge configurations</strong>: If your app's Tailwind setup can consume the <code>tbjs</code> Tailwind config (e.g., as a preset or by merging <code>content</code> paths and <code>theme</code> extensions).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code>Example of merging in your app&#39;s `tailwind.config.js`:
```javascript
// your-app/tailwind.config.js
import tbjsTailwindConfig from &#39;path/to/tbjs/tailwind.config.js&#39;;

export default {
  content: [
    &#39;./src/**/*.{html,js}&#39;, // Your app&#39;s content
    &#39;./node_modules/tbjs/src/**/*.{html,js}&#39;, // Include tbjs components for scanning
  ],
  darkMode: &#39;class&#39;, // Ensure consistency
  prefix: &#39;&#39;, // Or your app&#39;s prefix
  theme: {
    extend: {
      // Merge tbjs theme extensions if needed, being mindful of prefix differences
      colors: {
        ...tbjsTailwindConfig.theme.extend.colors, // May need adjustment if your app doesn&#39;t use &#39;tb-&#39; prefix
        // Your app-specific colors
      },
      // ... other extensions
    },
  },
  plugins: [
    // Your app&#39;s plugins
  ],
};
```
*The key is to ensure Tailwind processes the classes used in `tbjs` components.* Using the `tb-` prefix in `tbjs` helps isolate its styles.
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="7-building-tbjs-for-developers">7. Building <code>tbjs</code> (For Developers)<a class="headerlink" href="#7-building-tbjs-for-developers" title="Permanent link">&para;</a></h2>
<p>If you are modifying the <code>tbjs</code> framework itself:</p>
<ul>
<li><strong>Dependencies</strong>: Install development dependencies: <code>npm install</code></li>
<li><strong>Build</strong>: <code>npm run build</code> (creates production build in <code>dist/</code>)</li>
<li><strong>Watch</strong>: <code>npm run watch</code> (watches for changes and rebuilds in production mode)</li>
<li><strong>Lint</strong>: <code>npm run lint</code> (checks JavaScript code style)</li>
</ul>
<p>The build process uses Webpack, configured in <code>webpack.config.js</code>. It bundles the JavaScript into <code>dist/tbjs.js</code> (UMD format) and extracts CSS into <code>dist/tbjs.css</code>.</p>
<hr />












                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "search.highlight"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>