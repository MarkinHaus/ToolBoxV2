<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Gateway - Self-Hosted AI API</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --bg: #0a0a0f;
            --bg2: #12121a;
            --bg3: #1a1a25;
            --text: #e0e0e0;
            --text2: #888;
            --accent: #6366f1;
            --accent2: #818cf8;
            --green: #22c55e;
            --red: #ef4444;
            --yellow: #eab308;
            --border: #2a2a3a;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        a { color: var(--accent2); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* Nav */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 100;
        }
        .logo {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            align-items: center;
        }
        .nav-links a { color: var(--text2); font-size: 14px; }
        .nav-links a:hover { color: var(--text); text-decoration: none; }

        /* Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 120px 24px 80px;
            background:
                radial-gradient(ellipse at top, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                var(--bg);
        }
        .hero h1 {
            font-size: clamp(36px, 6vw, 64px);
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--text) 0%, var(--accent2) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .hero p {
            font-size: 18px;
            color: var(--text2);
            max-width: 600px;
            margin-bottom: 32px;
        }
        .hero-buttons {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Buttons */
        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        .btn-primary:hover {
            background: var(--accent2);
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: var(--bg3);
            color: var(--text);
            border: 1px solid var(--border);
        }
        .btn-secondary:hover {
            border-color: var(--accent);
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 20px;
            font-size: 13px;
            color: var(--green);
            margin-bottom: 24px;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Sections */
        section {
            padding: 80px 24px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .section-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }
        .section-subtitle {
            color: var(--text2);
            text-align: center;
            margin-bottom: 48px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Models Grid */
        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .model-card {
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.2s;
        }
        .model-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
        }
        .model-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        .model-name {
            font-size: 18px;
            font-weight: 600;
        }
        .model-status {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .model-status.online {
            background: rgba(34, 197, 94, 0.15);
            color: var(--green);
        }
        .model-status.offline {
            background: rgba(136, 136, 136, 0.15);
            color: var(--text2);
        }
        .model-type {
            display: inline-block;
            padding: 4px 10px;
            background: var(--bg3);
            border-radius: 6px;
            font-size: 12px;
            color: var(--text2);
            margin-bottom: 12px;
        }
        .model-type.text { background: rgba(99, 102, 241, 0.15); color: var(--accent2); }
        .model-type.vision { background: rgba(234, 179, 8, 0.15); color: var(--yellow); }
        .model-type.audio { background: rgba(34, 197, 94, 0.15); color: var(--green); }
        .model-meta {
            font-size: 13px;
            color: var(--text2);
        }

        /* Features */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }
        .feature-card {
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 28px;
        }
        .feature-icon {
            font-size: 32px;
            margin-bottom: 16px;
        }
        .feature-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .feature-desc {
            color: var(--text2);
            font-size: 14px;
        }

        /* Pricing */
        .pricing-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            max-width: 800px;
            margin: 0 auto;
        }
        .pricing-card {
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 32px;
            text-align: center;
        }
        .pricing-card.featured {
            border-color: var(--accent);
            position: relative;
        }
        .pricing-card.featured::before {
            content: 'Popular';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            padding: 4px 16px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .pricing-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .pricing-price {
            font-size: 36px;
            font-weight: 700;
            color: var(--accent2);
            margin-bottom: 8px;
        }
        .pricing-price span {
            font-size: 16px;
            color: var(--text2);
            font-weight: 400;
        }
        .pricing-desc {
            color: var(--text2);
            font-size: 14px;
            margin-bottom: 24px;
        }
        .pricing-features {
            text-align: left;
            margin-bottom: 24px;
        }
        .pricing-features li {
            list-style: none;
            padding: 8px 0;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pricing-features li::before {
            content: '‚úì';
            color: var(--green);
            font-weight: bold;
        }

        /* Code Example */
        .code-section {
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            max-width: 700px;
            margin: 0 auto;
        }
        .code-header {
            padding: 12px 20px;
            background: var(--bg3);
            border-bottom: 1px solid var(--border);
            font-size: 13px;
            color: var(--text2);
            display: flex;
            gap: 8px;
        }
        .code-header span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
        }
        .code-header span:nth-child(1) { background: #ff5f57; }
        .code-header span:nth-child(2) { background: #febc2e; }
        .code-header span:nth-child(3) { background: #28c840; }
        .code-block {
            padding: 24px;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 13px;
            line-height: 1.7;
            overflow-x: auto;
        }
        .code-block .comment { color: var(--text2); }
        .code-block .keyword { color: #c678dd; }
        .code-block .string { color: #98c379; }
        .code-block .function { color: #61afef; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            width: 100%;
            max-width: 420px;
        }
        .modal h2 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        .modal p {
            color: var(--text2);
            margin-bottom: 24px;
            font-size: 14px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }
        input, select {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg3);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 15px;
            transition: border-color 0.2s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
        }
        .form-hint {
            font-size: 12px;
            color: var(--text2);
            margin-top: 6px;
        }
        .modal-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        .modal-buttons .btn { flex: 1; justify-content: center; }

        /* Footer */
        footer {
            border-top: 1px solid var(--border);
            padding: 40px 24px;
            text-align: center;
            color: var(--text2);
            font-size: 14px;
        }
        footer a { margin: 0 16px; }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px 24px;
            background: var(--bg2);
            border: 1px solid var(--border);
            border-radius: 12px;
            z-index: 300;
            animation: slideIn 0.3s;
            max-width: 400px;
        }
        .toast.success { border-color: var(--green); }
        .toast.error { border-color: var(--red); }
        .toast-title { font-weight: 600; margin-bottom: 4px; }
        .toast-msg { font-size: 13px; color: var(--text2); }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav { padding: 12px 16px; }
            .nav-links { gap: 12px; }
            .hero { padding: 100px 16px 60px; }
            section { padding: 60px 16px; }
        }
    </style>
</head>
<body>
    <nav>
        <div class="logo">‚ö° LLM Gateway</div>
        <div class="nav-links">
            <a href="#models">Models</a>
            <a href="#pricing">Pricing</a>
            <a href="#docs">Docs</a>
            <a href="/user/" class="btn btn-secondary" style="padding: 8px 16px;">Dashboard</a>
        </div>
    </nav>

    <section class="hero">
        <div class="status-badge" id="statusBadge">
            <span class="status-dot"></span>
            <span id="statusText">Loading...</span>
        </div>

        <h1>Self-Hosted AI API</h1>
        <p>OpenAI-compatible API running on local hardware. No data leaves your infrastructure. Pay only for what you use.</p>

        <div class="hero-buttons">
            <button class="btn btn-primary" onclick="openSignup()">
                Create Account
            </button>
            <a href="#docs" class="btn btn-secondary">
                View Docs
            </a>
        </div>
    </section>

    <section id="models">
        <h2 class="section-title">Available Models</h2>
        <p class="section-subtitle">All models run locally on our servers. Real-time availability shown below.</p>

        <div id="modelsGrid" class="models-grid">
            <div class="model-card">
                <div style="color: var(--text2); padding: 40px; text-align: center;">
                    Loading models...
                </div>
            </div>
        </div>
    </section>

    <section id="features">
        <h2 class="section-title">Why Choose Us</h2>
        <p class="section-subtitle">Enterprise-grade AI infrastructure you can trust.</p>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <div class="feature-title">100% Private</div>
                <div class="feature-desc">All data stays on our local servers. No third-party API calls. Complete data sovereignty.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <div class="feature-title">OpenAI Compatible</div>
                <div class="feature-desc">Drop-in replacement for OpenAI API. Works with LangChain, LiteLLM, and any OpenAI SDK.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üí∞</div>
                <div class="feature-title">Pay As You Go</div>
                <div class="feature-desc">No subscriptions required. Only pay for the tokens you actually use. Transparent pricing.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üß†</div>
                <div class="feature-title">Multiple Models</div>
                <div class="feature-desc">Text, Vision, and Audio models available. Switch models with a single parameter change.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <div class="feature-title">Usage Dashboard</div>
                <div class="feature-desc">Track your usage, costs, and performance in real-time. Export data anytime.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üõ†Ô∏è</div>
                <div class="feature-title">Tool Calling</div>
                <div class="feature-desc">Full function/tool calling support. Build agents and complex workflows.</div>
            </div>
        </div>
    </section>

    <section id="docs">
        <h2 class="section-title">Quick Start</h2>
        <p class="section-subtitle">Get started in under a minute.</p>

        <div class="code-section">
            <div class="code-header">
                <span></span><span></span><span></span>
                <span style="width: auto; background: none; margin-left: 12px;">Python</span>
            </div>
            <div class="code-block">
<pre><span class="comment"># Install OpenAI SDK</span>
<span class="keyword">pip install</span> openai

<span class="comment"># Use our endpoint</span>
<span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI

client = OpenAI(
    base_url=<span class="string" id="codeBaseUrl">"https://gateway.simplecore.app/v1"</span>,
    api_key=<span class="string">"your-api-key"</span>
)

response = client.<span class="function">chat.completions.create</span>(
    model=<span class="string" id="codeModel">"model-name"</span>,
    messages=[{<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: <span class="string">"Hello!"</span>}],
    stream=<span class="keyword">True</span>
)

<span class="keyword">for</span> chunk <span class="keyword">in</span> response:
    <span class="function">print</span>(chunk.choices[0].delta.content, end=<span class="string">""</span>)</pre>
            </div>
        </div>
    </section>

    <section id="pricing">
        <h2 class="section-title">Simple Pricing</h2>
        <p class="section-subtitle">Transparent, usage-based pricing. No hidden fees.</p>

        <div class="pricing-cards">
            <div class="pricing-card">
                <div class="pricing-name">Pay As You Go</div>
                <div class="pricing-price">‚Ç¨0.0001 <span>/ 1K tokens</span></div>
                <div class="pricing-desc">Perfect for getting started</div>
                <ul class="pricing-features">
                    <li>No minimum commitment</li>
                    <li>All models included</li>
                    <li>Streaming support</li>
                    <li>5 requests/minute</li>
                    <li>Pay via bank transfer</li>
                </ul>
                <button class="btn btn-secondary" style="width: 100%;" onclick="openSignup('payg')">Get Started</button>
            </div>
            <div class="pricing-card featured">
                <div class="pricing-name">Subscription</div>
                <div class="pricing-price">‚Ç¨39 <span>/ month</span></div>
                <div class="pricing-desc">Best value for regular usage</div>
                <ul class="pricing-features">
                    <li>Unlimited tokens</li>
                    <li>All models included</li>
                    <li>10 requests/minute</li>
                    <li>Priority support</li>
                    <li>Monthly invoicing</li>
                </ul>
                <button class="btn btn-primary" style="width: 100%;" onclick="openSignup('sub')">Subscribe</button>
            </div>
        </div>
    </section>

    <footer>
        <p>¬© 2025 LLM Gateway. Self-hosted AI infrastructure.</p>
        <div style="margin-top: 16px;">
            <a href="/user/">Dashboard</a>
            <a href="/admin/">Admin</a>
            <a href="/health">Status</a>
        </div>
    </footer>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal-overlay">
        <div class="modal">
            <h2>Create Account</h2>
            <p>Sign up to get your API key and start using the service.</p>

            <form id="signupForm" onsubmit="submitSignup(event)">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="signupEmail" required placeholder="you@example.com">
                </div>
                <div class="form-group">
                    <label>Plan</label>
                    <select id="signupTier">
                        <option value="payg">Pay As You Go</option>
                        <option value="sub">Subscription (Contact for pricing)</option>
                    </select>
                </div>
                <p class="form-hint">
                    After registration, an admin will review your account and provide your API key + initial balance via email.
                </p>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Request Access</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal-overlay">
        <div class="modal">
            <h2>Contact Us</h2>
            <p>For subscription plans and custom requirements.</p>

            <div class="form-group">
                <label>Email</label>
                <input type="email" id="contactEmail" placeholder="you@company.com">
            </div>
            <div class="form-group">
                <label>Message</label>
                <textarea id="contactMessage" rows="4" style="width: 100%; padding: 12px 16px; background: var(--bg3); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 15px; resize: vertical;" placeholder="Tell us about your requirements..."></textarea>
            </div>
            <p class="form-hint">
                Payment via N26 bank transfer. We'll contact you with details.
            </p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitContact()">Send Message</button>
            </div>
        </div>
    </div>

    <script>
        // Update base URL in code example
        document.getElementById('codeBaseUrl').textContent = `"${window.location.origin}/v1"`;

        // Load models and status
        async function loadStatus() {
            try {
                const resp = await fetch('/health');
                const data = await resp.json();

                if (data.status === 'ok') {
                    document.getElementById('statusBadge').style.borderColor = 'rgba(34, 197, 94, 0.3)';
                    document.getElementById('statusBadge').style.background = 'rgba(34, 197, 94, 0.1)';
                    document.getElementById('statusText').textContent = `${data.active_slots} models online`;
                } else {
                    showOffline();
                }
            } catch (e) {
                showOffline();
            }
        }

        function showOffline() {
            document.getElementById('statusBadge').style.borderColor = 'rgba(239, 68, 68, 0.3)';
            document.getElementById('statusBadge').style.background = 'rgba(239, 68, 68, 0.1)';
            document.getElementById('statusBadge').querySelector('.status-dot').style.background = 'var(--red)';
            document.getElementById('statusText').textContent = 'Service Offline';
            document.getElementById('statusText').style.color = 'var(--red)';
        }

        async function loadModels() {
            try {
                const resp = await fetch('/api/models');

                if (!resp.ok) {
                    showNoModels();
                    return;
                }

                const data = await resp.json();
                const models = data.models || [];

                if (models.length === 0) {
                    showNoModels();
                    return;
                }

                // Update code example with first model
                document.getElementById('codeModel').textContent = `"${models[0].id}"`;

                document.getElementById('modelsGrid').innerHTML = models.map(m => {
                    const type = m.type || 'text';

                    return `
                        <div class="model-card">
                            <div class="model-header">
                                <div class="model-name">${m.id}</div>
                                <span class="model-status online">Online</span>
                            </div>
                            <span class="model-type ${type}">${type}</span>
                            <div class="model-meta">Ready for requests</div>
                        </div>
                    `;
                }).join('');

            } catch (e) {
                showNoModels();
            }
        }

        function showNoModels() {
            document.getElementById('modelsGrid').innerHTML = `
                <div class="model-card">
                    <div style="text-align: center; padding: 20px; color: var(--text2);">
                        <div style="font-size: 32px; margin-bottom: 12px;">üîß</div>
                        <div>No models currently loaded</div>
                        <div style="font-size: 13px; margin-top: 8px;">Check back soon or contact admin</div>
                    </div>
                </div>
            `;
        }

        // Modals
        function openSignup(tier = 'payg') {
            document.getElementById('signupTier').value = tier;
            document.getElementById('signupModal').classList.add('active');
        }

        function openContact() {
            document.getElementById('contactModal').classList.add('active');
        }

        function closeModal() {
            document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
        }

        // Close modal on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) closeModal();
            });
        });

        // Form submissions
        async function submitSignup(e) {
            e.preventDefault();

            const email = document.getElementById('signupEmail').value;
            const tier = document.getElementById('signupTier').value;

            try {
                const resp = await fetch('/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, tier })
                });

                const data = await resp.json();

                if (resp.ok) {
                    showToast(
                        'Request Submitted! ‚úì',
                        `We'll review your request and send your API key to ${email}. This usually takes 1-2 business days.`,
                        'success'
                    );
                    closeModal();
                } else {
                    showToast('Error', data.detail || 'Failed to submit request', 'error');
                }
            } catch (e) {
                showToast('Error', 'Network error. Please try again.', 'error');
            }
        }

        function submitContact() {
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;

            if (!email) {
                showToast('Error', 'Please enter your email', 'error');
                return;
            }

            showToast(
                'Message Sent',
                `We'll contact you at ${email} soon.`,
                'success'
            );
            closeModal();
        }

        function showToast(title, msg, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="toast-title">${title}</div>
                <div class="toast-msg">${msg}</div>
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 5000);
        }

        // Init
        loadStatus();
        loadModels();

        // Refresh every 30s
        setInterval(() => {
            loadStatus();
            loadModels();
        }, 30000);
    </script>
</body>
</html>
